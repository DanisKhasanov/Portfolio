var OE=Object.defineProperty;var U1=n=>{throw TypeError(n)};var FE=(n,t,e)=>t in n?OE(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var N=(n,t,e)=>FE(n,typeof t!="symbol"?t+"":t,e),Hg=(n,t,e)=>t.has(n)||U1("Cannot "+e);var a=(n,t,e)=>(Hg(n,t,"read from private field"),e?e.call(n):t.get(n)),A=(n,t,e)=>t.has(n)?U1("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),g=(n,t,e,i)=>(Hg(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e),b=(n,t,e)=>(Hg(n,t,"access private method"),e);var Ge=(n,t,e,i)=>({set _(s){g(n,t,s,e)},get _(){return a(n,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function jw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var zw={exports:{}},pg={},$w={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jd=Symbol.for("react.element"),jE=Symbol.for("react.portal"),zE=Symbol.for("react.fragment"),$E=Symbol.for("react.strict_mode"),BE=Symbol.for("react.profiler"),HE=Symbol.for("react.provider"),UE=Symbol.for("react.context"),VE=Symbol.for("react.forward_ref"),GE=Symbol.for("react.suspense"),WE=Symbol.for("react.memo"),XE=Symbol.for("react.lazy"),V1=Symbol.iterator;function KE(n){return n===null||typeof n!="object"?null:(n=V1&&n[V1]||n["@@iterator"],typeof n=="function"?n:null)}var Bw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hw=Object.assign,Uw={};function Vc(n,t,e){this.props=n,this.context=t,this.refs=Uw,this.updater=e||Bw}Vc.prototype.isReactComponent={};Vc.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};Vc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Vw(){}Vw.prototype=Vc.prototype;function Ry(n,t,e){this.props=n,this.context=t,this.refs=Uw,this.updater=e||Bw}var Ly=Ry.prototype=new Vw;Ly.constructor=Ry;Hw(Ly,Vc.prototype);Ly.isPureReactComponent=!0;var G1=Array.isArray,Gw=Object.prototype.hasOwnProperty,My={current:null},Ww={key:!0,ref:!0,__self:!0,__source:!0};function Xw(n,t,e){var i,s={},r=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(r=""+t.key),t)Gw.call(t,i)&&!Ww.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(l===1)s.children=e;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:jd,type:n,key:r,ref:o,props:s,_owner:My.current}}function qE(n,t){return{$$typeof:jd,type:n.type,key:t,ref:n.ref,props:n.props,_owner:n._owner}}function Iy(n){return typeof n=="object"&&n!==null&&n.$$typeof===jd}function YE(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(e){return t[e]})}var W1=/\/+/g;function Ug(n,t){return typeof n=="object"&&n!==null&&n.key!=null?YE(""+n.key):t.toString(36)}function kf(n,t,e,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case jd:case jE:o=!0}}if(o)return o=n,s=s(o),n=i===""?"."+Ug(o,0):i,G1(s)?(e="",n!=null&&(e=n.replace(W1,"$&/")+"/"),kf(s,t,e,"",function(u){return u})):s!=null&&(Iy(s)&&(s=qE(s,e+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(W1,"$&/")+"/")+n)),t.push(s)),1;if(o=0,i=i===""?".":i+":",G1(n))for(var l=0;l<n.length;l++){r=n[l];var c=i+Ug(r,l);o+=kf(r,t,e,c,s)}else if(c=KE(n),typeof c=="function")for(n=c.call(n),l=0;!(r=n.next()).done;)r=r.value,c=i+Ug(r,l++),o+=kf(r,t,e,c,s);else if(r==="object")throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ef(n,t,e){if(n==null)return n;var i=[],s=0;return kf(n,i,"","",function(r){return t.call(e,r,s++)}),i}function QE(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(e){(n._status===0||n._status===-1)&&(n._status=1,n._result=e)},function(e){(n._status===0||n._status===-1)&&(n._status=2,n._result=e)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var nn={current:null},Tf={transition:null},ZE={ReactCurrentDispatcher:nn,ReactCurrentBatchConfig:Tf,ReactCurrentOwner:My};function Kw(){throw Error("act(...) is not supported in production builds of React.")}ot.Children={map:ef,forEach:function(n,t,e){ef(n,function(){t.apply(this,arguments)},e)},count:function(n){var t=0;return ef(n,function(){t++}),t},toArray:function(n){return ef(n,function(t){return t})||[]},only:function(n){if(!Iy(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ot.Component=Vc;ot.Fragment=zE;ot.Profiler=BE;ot.PureComponent=Ry;ot.StrictMode=$E;ot.Suspense=GE;ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZE;ot.act=Kw;ot.cloneElement=function(n,t,e){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=Hw({},n.props),s=n.key,r=n.ref,o=n._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,o=My.current),t.key!==void 0&&(s=""+t.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in t)Gw.call(t,c)&&!Ww.hasOwnProperty(c)&&(i[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)i.children=e;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:jd,type:n.type,key:s,ref:r,props:i,_owner:o}};ot.createContext=function(n){return n={$$typeof:UE,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:HE,_context:n},n.Consumer=n};ot.createElement=Xw;ot.createFactory=function(n){var t=Xw.bind(null,n);return t.type=n,t};ot.createRef=function(){return{current:null}};ot.forwardRef=function(n){return{$$typeof:VE,render:n}};ot.isValidElement=Iy;ot.lazy=function(n){return{$$typeof:XE,_payload:{_status:-1,_result:n},_init:QE}};ot.memo=function(n,t){return{$$typeof:WE,type:n,compare:t===void 0?null:t}};ot.startTransition=function(n){var t=Tf.transition;Tf.transition={};try{n()}finally{Tf.transition=t}};ot.unstable_act=Kw;ot.useCallback=function(n,t){return nn.current.useCallback(n,t)};ot.useContext=function(n){return nn.current.useContext(n)};ot.useDebugValue=function(){};ot.useDeferredValue=function(n){return nn.current.useDeferredValue(n)};ot.useEffect=function(n,t){return nn.current.useEffect(n,t)};ot.useId=function(){return nn.current.useId()};ot.useImperativeHandle=function(n,t,e){return nn.current.useImperativeHandle(n,t,e)};ot.useInsertionEffect=function(n,t){return nn.current.useInsertionEffect(n,t)};ot.useLayoutEffect=function(n,t){return nn.current.useLayoutEffect(n,t)};ot.useMemo=function(n,t){return nn.current.useMemo(n,t)};ot.useReducer=function(n,t,e){return nn.current.useReducer(n,t,e)};ot.useRef=function(n){return nn.current.useRef(n)};ot.useState=function(n){return nn.current.useState(n)};ot.useSyncExternalStore=function(n,t,e){return nn.current.useSyncExternalStore(n,t,e)};ot.useTransition=function(){return nn.current.useTransition()};ot.version="18.3.1";$w.exports=ot;var D=$w.exports;const Ia=jw(D);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JE=D,t_=Symbol.for("react.element"),e_=Symbol.for("react.fragment"),n_=Object.prototype.hasOwnProperty,i_=JE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s_={key:!0,ref:!0,__self:!0,__source:!0};function qw(n,t,e){var i,s={},r=null,o=null;e!==void 0&&(r=""+e),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)n_.call(t,i)&&!s_.hasOwnProperty(i)&&(s[i]=t[i]);if(n&&n.defaultProps)for(i in t=n.defaultProps,t)s[i]===void 0&&(s[i]=t[i]);return{$$typeof:t_,type:n,key:r,ref:o,props:s,_owner:i_.current}}pg.Fragment=e_;pg.jsx=qw;pg.jsxs=qw;zw.exports=pg;var C=zw.exports,Yw={exports:{}},jn={},Qw={exports:{}},Zw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(O,V){var X=O.length;O.push(V);t:for(;0<X;){var at=X-1>>>1,tt=O[at];if(0<s(tt,V))O[at]=V,O[X]=tt,X=at;else break t}}function e(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var V=O[0],X=O.pop();if(X!==V){O[0]=X;t:for(var at=0,tt=O.length,dt=tt>>>1;at<dt;){var Vt=2*(at+1)-1,ne=O[Vt],Dt=Vt+1,ft=O[Dt];if(0>s(ne,X))Dt<tt&&0>s(ft,ne)?(O[at]=ft,O[Dt]=X,at=Dt):(O[at]=ne,O[Vt]=X,at=Vt);else if(Dt<tt&&0>s(ft,X))O[at]=ft,O[Dt]=X,at=Dt;else break t}}return V}function s(O,V){var X=O.sortIndex-V.sortIndex;return X!==0?X:O.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,y=!1,m=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(O){for(var V=e(u);V!==null;){if(V.callback===null)i(u);else if(V.startTime<=O)i(u),V.sortIndex=V.expirationTime,t(c,V);else break;V=e(u)}}function E(O){if(m=!1,x(O),!y)if(e(c)!==null)y=!0,F(_);else{var V=e(u);V!==null&&j(E,V.startTime-O)}}function _(O,V){y=!1,m&&(m=!1,v(P),P=-1),p=!0;var X=f;try{for(x(V),d=e(c);d!==null&&(!(d.expirationTime>V)||O&&!M());){var at=d.callback;if(typeof at=="function"){d.callback=null,f=d.priorityLevel;var tt=at(d.expirationTime<=V);V=n.unstable_now(),typeof tt=="function"?d.callback=tt:d===e(c)&&i(c),x(V)}else i(c);d=e(c)}if(d!==null)var dt=!0;else{var Vt=e(u);Vt!==null&&j(E,Vt.startTime-V),dt=!1}return dt}finally{d=null,f=X,p=!1}}var T=!1,k=null,P=-1,L=5,R=-1;function M(){return!(n.unstable_now()-R<L)}function Y(){if(k!==null){var O=n.unstable_now();R=O;var V=!0;try{V=k(!0,O)}finally{V?Z():(T=!1,k=null)}}else T=!1}var Z;if(typeof w=="function")Z=function(){w(Y)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,nt=K.port2;K.port1.onmessage=Y,Z=function(){nt.postMessage(null)}}else Z=function(){S(Y,0)};function F(O){k=O,T||(T=!0,Z())}function j(O,V){P=S(function(){O(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){y||p||(y=!0,F(_))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return e(c)},n.unstable_next=function(O){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var X=f;f=V;try{return O()}finally{f=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,V){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var X=f;f=O;try{return V()}finally{f=X}},n.unstable_scheduleCallback=function(O,V,X){var at=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?at+X:at):X=at,O){case 1:var tt=-1;break;case 2:tt=250;break;case 5:tt=1073741823;break;case 4:tt=1e4;break;default:tt=5e3}return tt=X+tt,O={id:h++,callback:V,priorityLevel:O,startTime:X,expirationTime:tt,sortIndex:-1},X>at?(O.sortIndex=X,t(u,O),e(c)===null&&O===e(u)&&(m?(v(P),P=-1):m=!0,j(E,X-at))):(O.sortIndex=tt,t(c,O),y||p||(y=!0,F(_))),O},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(O){var V=f;return function(){var X=f;f=V;try{return O.apply(this,arguments)}finally{f=X}}}})(Zw);Qw.exports=Zw;var r_=Qw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_=D,Fn=r_;function I(n){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+n,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jw=new Set,Bu={};function Ua(n,t){Dc(n,t),Dc(n+"Capture",t)}function Dc(n,t){for(Bu[n]=t,n=0;n<t.length;n++)Jw.add(t[n])}var Ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sm=Object.prototype.hasOwnProperty,a_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,X1={},K1={};function l_(n){return Sm.call(K1,n)?!0:Sm.call(X1,n)?!1:a_.test(n)?K1[n]=!0:(X1[n]=!0,!1)}function c_(n,t,e,i){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:e!==null?!e.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function u_(n,t,e,i){if(t===null||typeof t>"u"||c_(n,t,e,i))return!0;if(i)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function sn(n,t,e,i,s,r,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=e,this.propertyName=n,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var Re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Re[n]=new sn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var t=n[0];Re[t]=new sn(t,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Re[n]=new sn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Re[n]=new sn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Re[n]=new sn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Re[n]=new sn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Re[n]=new sn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Re[n]=new sn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Re[n]=new sn(n,5,!1,n.toLowerCase(),null,!1,!1)});var Ny=/[\-:]([a-z])/g;function Dy(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var t=n.replace(Ny,Dy);Re[t]=new sn(t,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var t=n.replace(Ny,Dy);Re[t]=new sn(t,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var t=n.replace(Ny,Dy);Re[t]=new sn(t,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Re[n]=new sn(n,1,!1,n.toLowerCase(),null,!1,!1)});Re.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Re[n]=new sn(n,1,!1,n.toLowerCase(),null,!0,!0)});function Oy(n,t,e,i){var s=Re.hasOwnProperty(t)?Re[t]:null;(s!==null?s.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(u_(t,e,s,i)&&(e=null),i||s===null?l_(t)&&(e===null?n.removeAttribute(t):n.setAttribute(t,""+e)):s.mustUseProperty?n[s.propertyName]=e===null?s.type===3?!1:"":e:(t=s.attributeName,i=s.attributeNamespace,e===null?n.removeAttribute(t):(s=s.type,e=s===3||s===4&&e===!0?"":""+e,i?n.setAttributeNS(i,t,e):n.setAttribute(t,e))))}var er=o_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nf=Symbol.for("react.element"),sl=Symbol.for("react.portal"),rl=Symbol.for("react.fragment"),Fy=Symbol.for("react.strict_mode"),Em=Symbol.for("react.profiler"),tA=Symbol.for("react.provider"),eA=Symbol.for("react.context"),jy=Symbol.for("react.forward_ref"),_m=Symbol.for("react.suspense"),Cm=Symbol.for("react.suspense_list"),zy=Symbol.for("react.memo"),rr=Symbol.for("react.lazy"),nA=Symbol.for("react.offscreen"),q1=Symbol.iterator;function qc(n){return n===null||typeof n!="object"?null:(n=q1&&n[q1]||n["@@iterator"],typeof n=="function"?n:null)}var $t=Object.assign,Vg;function lu(n){if(Vg===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Vg=t&&t[1]||""}return`
`+Vg+n}var Gg=!1;function Wg(n,t){if(!n||Gg)return"";Gg=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(n,[],t)}else{try{t.call()}catch(u){i=u}n.call(t.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,l=r.length-1;1<=o&&0<=l&&s[o]!==r[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==r[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==r[l]){var c=`
`+s[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=l);break}}}finally{Gg=!1,Error.prepareStackTrace=e}return(n=n?n.displayName||n.name:"")?lu(n):""}function h_(n){switch(n.tag){case 5:return lu(n.type);case 16:return lu("Lazy");case 13:return lu("Suspense");case 19:return lu("SuspenseList");case 0:case 2:case 15:return n=Wg(n.type,!1),n;case 11:return n=Wg(n.type.render,!1),n;case 1:return n=Wg(n.type,!0),n;default:return""}}function km(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case rl:return"Fragment";case sl:return"Portal";case Em:return"Profiler";case Fy:return"StrictMode";case _m:return"Suspense";case Cm:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case eA:return(n.displayName||"Context")+".Consumer";case tA:return(n._context.displayName||"Context")+".Provider";case jy:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case zy:return t=n.displayName||null,t!==null?t:km(n.type)||"Memo";case rr:t=n._payload,n=n._init;try{return km(n(t))}catch{}}return null}function d_(n){var t=n.type;switch(n.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=t.render,n=n.displayName||n.name||"",t.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return km(t);case 8:return t===Fy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function no(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function iA(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function f_(n){var t=iA(n)?"checked":"value",e=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),i=""+n[t];if(!n.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var s=e.get,r=e.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(n,t,{enumerable:e.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function sf(n){n._valueTracker||(n._valueTracker=f_(n))}function sA(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var e=t.getValue(),i="";return n&&(i=iA(n)?n.checked?"true":"false":n.value),n=i,n!==e?(t.setValue(n),!0):!1}function gp(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Tm(n,t){var e=t.checked;return $t({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??n._wrapperState.initialChecked})}function Y1(n,t){var e=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;e=no(t.value!=null?t.value:e),n._wrapperState={initialChecked:i,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function rA(n,t){t=t.checked,t!=null&&Oy(n,"checked",t,!1)}function Pm(n,t){rA(n,t);var e=no(t.value),i=t.type;if(e!=null)i==="number"?(e===0&&n.value===""||n.value!=e)&&(n.value=""+e):n.value!==""+e&&(n.value=""+e);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}t.hasOwnProperty("value")?Rm(n,t.type,e):t.hasOwnProperty("defaultValue")&&Rm(n,t.type,no(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(n.defaultChecked=!!t.defaultChecked)}function Q1(n,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+n._wrapperState.initialValue,e||t===n.value||(n.value=t),n.defaultValue=t}e=n.name,e!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,e!==""&&(n.name=e)}function Rm(n,t,e){(t!=="number"||gp(n.ownerDocument)!==n)&&(e==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+e&&(n.defaultValue=""+e))}var cu=Array.isArray;function wl(n,t,e,i){if(n=n.options,t){t={};for(var s=0;s<e.length;s++)t["$"+e[s]]=!0;for(e=0;e<n.length;e++)s=t.hasOwnProperty("$"+n[e].value),n[e].selected!==s&&(n[e].selected=s),s&&i&&(n[e].defaultSelected=!0)}else{for(e=""+no(e),t=null,s=0;s<n.length;s++){if(n[s].value===e){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}t!==null||n[s].disabled||(t=n[s])}t!==null&&(t.selected=!0)}}function Lm(n,t){if(t.dangerouslySetInnerHTML!=null)throw Error(I(91));return $t({},t,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Z1(n,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(I(92));if(cu(e)){if(1<e.length)throw Error(I(93));e=e[0]}t=e}t==null&&(t=""),e=t}n._wrapperState={initialValue:no(e)}}function oA(n,t){var e=no(t.value),i=no(t.defaultValue);e!=null&&(e=""+e,e!==n.value&&(n.value=e),t.defaultValue==null&&n.defaultValue!==e&&(n.defaultValue=e)),i!=null&&(n.defaultValue=""+i)}function J1(n){var t=n.textContent;t===n._wrapperState.initialValue&&t!==""&&t!==null&&(n.value=t)}function aA(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mm(n,t){return n==null||n==="http://www.w3.org/1999/xhtml"?aA(t):n==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var rf,lA=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,i,s){MSApp.execUnsafeLocalFunction(function(){return n(t,e,i,s)})}:n}(function(n,t){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=t;else{for(rf=rf||document.createElement("div"),rf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rf.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;t.firstChild;)n.appendChild(t.firstChild)}});function Hu(n,t){if(t){var e=n.firstChild;if(e&&e===n.lastChild&&e.nodeType===3){e.nodeValue=t;return}}n.textContent=t}var Lu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},p_=["Webkit","ms","Moz","O"];Object.keys(Lu).forEach(function(n){p_.forEach(function(t){t=t+n.charAt(0).toUpperCase()+n.substring(1),Lu[t]=Lu[n]})});function cA(n,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||Lu.hasOwnProperty(n)&&Lu[n]?(""+t).trim():t+"px"}function uA(n,t){n=n.style;for(var e in t)if(t.hasOwnProperty(e)){var i=e.indexOf("--")===0,s=cA(e,t[e],i);e==="float"&&(e="cssFloat"),i?n.setProperty(e,s):n[e]=s}}var g_=$t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Im(n,t){if(t){if(g_[n]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(I(137,n));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(I(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(I(61))}if(t.style!=null&&typeof t.style!="object")throw Error(I(62))}}function Nm(n,t){if(n.indexOf("-")===-1)return typeof t.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dm=null;function $y(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Om=null,Al=null,bl=null;function tv(n){if(n=Bd(n)){if(typeof Om!="function")throw Error(I(280));var t=n.stateNode;t&&(t=wg(t),Om(n.stateNode,n.type,t))}}function hA(n){Al?bl?bl.push(n):bl=[n]:Al=n}function dA(){if(Al){var n=Al,t=bl;if(bl=Al=null,tv(n),t)for(n=0;n<t.length;n++)tv(t[n])}}function fA(n,t){return n(t)}function pA(){}var Xg=!1;function gA(n,t,e){if(Xg)return n(t,e);Xg=!0;try{return fA(n,t,e)}finally{Xg=!1,(Al!==null||bl!==null)&&(pA(),dA())}}function Uu(n,t){var e=n.stateNode;if(e===null)return null;var i=wg(e);if(i===null)return null;e=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break t;default:n=!1}if(n)return null;if(e&&typeof e!="function")throw Error(I(231,t,typeof e));return e}var Fm=!1;if(Ks)try{var Yc={};Object.defineProperty(Yc,"passive",{get:function(){Fm=!0}}),window.addEventListener("test",Yc,Yc),window.removeEventListener("test",Yc,Yc)}catch{Fm=!1}function m_(n,t,e,i,s,r,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(e,u)}catch(h){this.onError(h)}}var Mu=!1,mp=null,yp=!1,jm=null,y_={onError:function(n){Mu=!0,mp=n}};function v_(n,t,e,i,s,r,o,l,c){Mu=!1,mp=null,m_.apply(y_,arguments)}function w_(n,t,e,i,s,r,o,l,c){if(v_.apply(this,arguments),Mu){if(Mu){var u=mp;Mu=!1,mp=null}else throw Error(I(198));yp||(yp=!0,jm=u)}}function Va(n){var t=n,e=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(e=t.return),n=t.return;while(n)}return t.tag===3?e:null}function mA(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function ev(n){if(Va(n)!==n)throw Error(I(188))}function A_(n){var t=n.alternate;if(!t){if(t=Va(n),t===null)throw Error(I(188));return t!==n?null:n}for(var e=n,i=t;;){var s=e.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){e=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===e)return ev(s),n;if(r===i)return ev(s),t;r=r.sibling}throw Error(I(188))}if(e.return!==i.return)e=s,i=r;else{for(var o=!1,l=s.child;l;){if(l===e){o=!0,e=s,i=r;break}if(l===i){o=!0,i=s,e=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===e){o=!0,e=r,i=s;break}if(l===i){o=!0,i=r,e=s;break}l=l.sibling}if(!o)throw Error(I(189))}}if(e.alternate!==i)throw Error(I(190))}if(e.tag!==3)throw Error(I(188));return e.stateNode.current===e?n:t}function yA(n){return n=A_(n),n!==null?vA(n):null}function vA(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var t=vA(n);if(t!==null)return t;n=n.sibling}return null}var wA=Fn.unstable_scheduleCallback,nv=Fn.unstable_cancelCallback,b_=Fn.unstable_shouldYield,x_=Fn.unstable_requestPaint,Yt=Fn.unstable_now,S_=Fn.unstable_getCurrentPriorityLevel,By=Fn.unstable_ImmediatePriority,AA=Fn.unstable_UserBlockingPriority,vp=Fn.unstable_NormalPriority,E_=Fn.unstable_LowPriority,bA=Fn.unstable_IdlePriority,gg=null,ns=null;function __(n){if(ns&&typeof ns.onCommitFiberRoot=="function")try{ns.onCommitFiberRoot(gg,n,void 0,(n.current.flags&128)===128)}catch{}}var _i=Math.clz32?Math.clz32:T_,C_=Math.log,k_=Math.LN2;function T_(n){return n>>>=0,n===0?32:31-(C_(n)/k_|0)|0}var of=64,af=4194304;function uu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function wp(n,t){var e=n.pendingLanes;if(e===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,o=e&268435455;if(o!==0){var l=o&~s;l!==0?i=uu(l):(r&=o,r!==0&&(i=uu(r)))}else o=e&~s,o!==0?i=uu(o):r!==0&&(i=uu(r));if(i===0)return 0;if(t!==0&&t!==i&&!(t&s)&&(s=i&-i,r=t&-t,s>=r||s===16&&(r&4194240)!==0))return t;if(i&4&&(i|=e&16),t=n.entangledLanes,t!==0)for(n=n.entanglements,t&=i;0<t;)e=31-_i(t),s=1<<e,i|=n[e],t&=~s;return i}function P_(n,t){switch(n){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function R_(n,t){for(var e=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-_i(r),l=1<<o,c=s[o];c===-1?(!(l&e)||l&i)&&(s[o]=P_(l,t)):c<=t&&(n.expiredLanes|=l),r&=~l}}function zm(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function xA(){var n=of;return of<<=1,!(of&4194240)&&(of=64),n}function Kg(n){for(var t=[],e=0;31>e;e++)t.push(n);return t}function zd(n,t,e){n.pendingLanes|=t,t!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,t=31-_i(t),n[t]=e}function L_(n,t){var e=n.pendingLanes&~t;n.pendingLanes=t,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=t,n.mutableReadLanes&=t,n.entangledLanes&=t,t=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<e;){var s=31-_i(e),r=1<<s;t[s]=0,i[s]=-1,n[s]=-1,e&=~r}}function Hy(n,t){var e=n.entangledLanes|=t;for(n=n.entanglements;e;){var i=31-_i(e),s=1<<i;s&t|n[i]&t&&(n[i]|=t),e&=~s}}var yt=0;function SA(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var EA,Uy,_A,CA,kA,$m=!1,lf=[],Kr=null,qr=null,Yr=null,Vu=new Map,Gu=new Map,ar=[],M_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iv(n,t){switch(n){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":qr=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":Vu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gu.delete(t.pointerId)}}function Qc(n,t,e,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:t,domEventName:e,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},t!==null&&(t=Bd(t),t!==null&&Uy(t)),n):(n.eventSystemFlags|=i,t=n.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),n)}function I_(n,t,e,i,s){switch(t){case"focusin":return Kr=Qc(Kr,n,t,e,i,s),!0;case"dragenter":return qr=Qc(qr,n,t,e,i,s),!0;case"mouseover":return Yr=Qc(Yr,n,t,e,i,s),!0;case"pointerover":var r=s.pointerId;return Vu.set(r,Qc(Vu.get(r)||null,n,t,e,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Gu.set(r,Qc(Gu.get(r)||null,n,t,e,i,s)),!0}return!1}function TA(n){var t=Eo(n.target);if(t!==null){var e=Va(t);if(e!==null){if(t=e.tag,t===13){if(t=mA(e),t!==null){n.blockedOn=t,kA(n.priority,function(){_A(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){n.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Pf(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var e=Bm(n.domEventName,n.eventSystemFlags,t[0],n.nativeEvent);if(e===null){e=n.nativeEvent;var i=new e.constructor(e.type,e);Dm=i,e.target.dispatchEvent(i),Dm=null}else return t=Bd(e),t!==null&&Uy(t),n.blockedOn=e,!1;t.shift()}return!0}function sv(n,t,e){Pf(n)&&e.delete(t)}function N_(){$m=!1,Kr!==null&&Pf(Kr)&&(Kr=null),qr!==null&&Pf(qr)&&(qr=null),Yr!==null&&Pf(Yr)&&(Yr=null),Vu.forEach(sv),Gu.forEach(sv)}function Zc(n,t){n.blockedOn===t&&(n.blockedOn=null,$m||($m=!0,Fn.unstable_scheduleCallback(Fn.unstable_NormalPriority,N_)))}function Wu(n){function t(s){return Zc(s,n)}if(0<lf.length){Zc(lf[0],n);for(var e=1;e<lf.length;e++){var i=lf[e];i.blockedOn===n&&(i.blockedOn=null)}}for(Kr!==null&&Zc(Kr,n),qr!==null&&Zc(qr,n),Yr!==null&&Zc(Yr,n),Vu.forEach(t),Gu.forEach(t),e=0;e<ar.length;e++)i=ar[e],i.blockedOn===n&&(i.blockedOn=null);for(;0<ar.length&&(e=ar[0],e.blockedOn===null);)TA(e),e.blockedOn===null&&ar.shift()}var xl=er.ReactCurrentBatchConfig,Ap=!0;function D_(n,t,e,i){var s=yt,r=xl.transition;xl.transition=null;try{yt=1,Vy(n,t,e,i)}finally{yt=s,xl.transition=r}}function O_(n,t,e,i){var s=yt,r=xl.transition;xl.transition=null;try{yt=4,Vy(n,t,e,i)}finally{yt=s,xl.transition=r}}function Vy(n,t,e,i){if(Ap){var s=Bm(n,t,e,i);if(s===null)sm(n,t,i,bp,e),iv(n,i);else if(I_(s,n,t,e,i))i.stopPropagation();else if(iv(n,i),t&4&&-1<M_.indexOf(n)){for(;s!==null;){var r=Bd(s);if(r!==null&&EA(r),r=Bm(n,t,e,i),r===null&&sm(n,t,i,bp,e),r===s)break;s=r}s!==null&&i.stopPropagation()}else sm(n,t,i,null,e)}}var bp=null;function Bm(n,t,e,i){if(bp=null,n=$y(i),n=Eo(n),n!==null)if(t=Va(n),t===null)n=null;else if(e=t.tag,e===13){if(n=mA(t),n!==null)return n;n=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null);return bp=n,null}function PA(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(S_()){case By:return 1;case AA:return 4;case vp:case E_:return 16;case bA:return 536870912;default:return 16}default:return 16}}var Wr=null,Gy=null,Rf=null;function RA(){if(Rf)return Rf;var n,t=Gy,e=t.length,i,s="value"in Wr?Wr.value:Wr.textContent,r=s.length;for(n=0;n<e&&t[n]===s[n];n++);var o=e-n;for(i=1;i<=o&&t[e-i]===s[r-i];i++);return Rf=s.slice(n,1<i?1-i:void 0)}function Lf(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function cf(){return!0}function rv(){return!1}function zn(n){function t(e,i,s,r,o){this._reactName=e,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(e=n[l],this[l]=e?e(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?cf:rv,this.isPropagationStopped=rv,this}return $t(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=cf)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=cf)},persist:function(){},isPersistent:cf}),t}var Gc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wy=zn(Gc),$d=$t({},Gc,{view:0,detail:0}),F_=zn($d),qg,Yg,Jc,mg=$t({},$d,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xy,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Jc&&(Jc&&n.type==="mousemove"?(qg=n.screenX-Jc.screenX,Yg=n.screenY-Jc.screenY):Yg=qg=0,Jc=n),qg)},movementY:function(n){return"movementY"in n?n.movementY:Yg}}),ov=zn(mg),j_=$t({},mg,{dataTransfer:0}),z_=zn(j_),$_=$t({},$d,{relatedTarget:0}),Qg=zn($_),B_=$t({},Gc,{animationName:0,elapsedTime:0,pseudoElement:0}),H_=zn(B_),U_=$t({},Gc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),V_=zn(U_),G_=$t({},Gc,{data:0}),av=zn(G_),W_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function q_(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=K_[n])?!!t[n]:!1}function Xy(){return q_}var Y_=$t({},$d,{key:function(n){if(n.key){var t=W_[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=Lf(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?X_[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xy,charCode:function(n){return n.type==="keypress"?Lf(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Lf(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Q_=zn(Y_),Z_=$t({},mg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lv=zn(Z_),J_=$t({},$d,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xy}),t2=zn(J_),e2=$t({},Gc,{propertyName:0,elapsedTime:0,pseudoElement:0}),n2=zn(e2),i2=$t({},mg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),s2=zn(i2),r2=[9,13,27,32],Ky=Ks&&"CompositionEvent"in window,Iu=null;Ks&&"documentMode"in document&&(Iu=document.documentMode);var o2=Ks&&"TextEvent"in window&&!Iu,LA=Ks&&(!Ky||Iu&&8<Iu&&11>=Iu),cv=" ",uv=!1;function MA(n,t){switch(n){case"keyup":return r2.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IA(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ol=!1;function a2(n,t){switch(n){case"compositionend":return IA(t);case"keypress":return t.which!==32?null:(uv=!0,cv);case"textInput":return n=t.data,n===cv&&uv?null:n;default:return null}}function l2(n,t){if(ol)return n==="compositionend"||!Ky&&MA(n,t)?(n=RA(),Rf=Gy=Wr=null,ol=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return LA&&t.locale!=="ko"?null:t.data;default:return null}}var c2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hv(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!c2[n.type]:t==="textarea"}function NA(n,t,e,i){hA(i),t=xp(t,"onChange"),0<t.length&&(e=new Wy("onChange","change",null,e,i),n.push({event:e,listeners:t}))}var Nu=null,Xu=null;function u2(n){GA(n,0)}function yg(n){var t=cl(n);if(sA(t))return n}function h2(n,t){if(n==="change")return t}var DA=!1;if(Ks){var Zg;if(Ks){var Jg="oninput"in document;if(!Jg){var dv=document.createElement("div");dv.setAttribute("oninput","return;"),Jg=typeof dv.oninput=="function"}Zg=Jg}else Zg=!1;DA=Zg&&(!document.documentMode||9<document.documentMode)}function fv(){Nu&&(Nu.detachEvent("onpropertychange",OA),Xu=Nu=null)}function OA(n){if(n.propertyName==="value"&&yg(Xu)){var t=[];NA(t,Xu,n,$y(n)),gA(u2,t)}}function d2(n,t,e){n==="focusin"?(fv(),Nu=t,Xu=e,Nu.attachEvent("onpropertychange",OA)):n==="focusout"&&fv()}function f2(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return yg(Xu)}function p2(n,t){if(n==="click")return yg(t)}function g2(n,t){if(n==="input"||n==="change")return yg(t)}function m2(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var ki=typeof Object.is=="function"?Object.is:m2;function Ku(n,t){if(ki(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var e=Object.keys(n),i=Object.keys(t);if(e.length!==i.length)return!1;for(i=0;i<e.length;i++){var s=e[i];if(!Sm.call(t,s)||!ki(n[s],t[s]))return!1}return!0}function pv(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function gv(n,t){var e=pv(n);n=0;for(var i;e;){if(e.nodeType===3){if(i=n+e.textContent.length,n<=t&&i>=t)return{node:e,offset:t-n};n=i}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=pv(e)}}function FA(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?FA(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function jA(){for(var n=window,t=gp();t instanceof n.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)n=t.contentWindow;else break;t=gp(n.document)}return t}function qy(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}function y2(n){var t=jA(),e=n.focusedElem,i=n.selectionRange;if(t!==e&&e&&e.ownerDocument&&FA(e.ownerDocument.documentElement,e)){if(i!==null&&qy(e)){if(t=i.start,n=i.end,n===void 0&&(n=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(n,e.value.length);else if(n=(t=e.ownerDocument||document)&&t.defaultView||window,n.getSelection){n=n.getSelection();var s=e.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=gv(e,r);var o=gv(e,i);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(t),n.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),n.addRange(t)))}}for(t=[],n=e;n=n.parentNode;)n.nodeType===1&&t.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)n=t[e],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var v2=Ks&&"documentMode"in document&&11>=document.documentMode,al=null,Hm=null,Du=null,Um=!1;function mv(n,t,e){var i=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;Um||al==null||al!==gp(i)||(i=al,"selectionStart"in i&&qy(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Du&&Ku(Du,i)||(Du=i,i=xp(Hm,"onSelect"),0<i.length&&(t=new Wy("onSelect","select",null,t,e),n.push({event:t,listeners:i}),t.target=al)))}function uf(n,t){var e={};return e[n.toLowerCase()]=t.toLowerCase(),e["Webkit"+n]="webkit"+t,e["Moz"+n]="moz"+t,e}var ll={animationend:uf("Animation","AnimationEnd"),animationiteration:uf("Animation","AnimationIteration"),animationstart:uf("Animation","AnimationStart"),transitionend:uf("Transition","TransitionEnd")},tm={},zA={};Ks&&(zA=document.createElement("div").style,"AnimationEvent"in window||(delete ll.animationend.animation,delete ll.animationiteration.animation,delete ll.animationstart.animation),"TransitionEvent"in window||delete ll.transitionend.transition);function vg(n){if(tm[n])return tm[n];if(!ll[n])return n;var t=ll[n],e;for(e in t)if(t.hasOwnProperty(e)&&e in zA)return tm[n]=t[e];return n}var $A=vg("animationend"),BA=vg("animationiteration"),HA=vg("animationstart"),UA=vg("transitionend"),VA=new Map,yv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function co(n,t){VA.set(n,t),Ua(t,[n])}for(var em=0;em<yv.length;em++){var nm=yv[em],w2=nm.toLowerCase(),A2=nm[0].toUpperCase()+nm.slice(1);co(w2,"on"+A2)}co($A,"onAnimationEnd");co(BA,"onAnimationIteration");co(HA,"onAnimationStart");co("dblclick","onDoubleClick");co("focusin","onFocus");co("focusout","onBlur");co(UA,"onTransitionEnd");Dc("onMouseEnter",["mouseout","mouseover"]);Dc("onMouseLeave",["mouseout","mouseover"]);Dc("onPointerEnter",["pointerout","pointerover"]);Dc("onPointerLeave",["pointerout","pointerover"]);Ua("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ua("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ua("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ua("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ua("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ua("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b2=new Set("cancel close invalid load scroll toggle".split(" ").concat(hu));function vv(n,t,e){var i=n.type||"unknown-event";n.currentTarget=e,w_(i,t,void 0,n),n.currentTarget=null}function GA(n,t){t=(t&4)!==0;for(var e=0;e<n.length;e++){var i=n[e],s=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var o=i.length-1;0<=o;o--){var l=i[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==r&&s.isPropagationStopped())break t;vv(s,l,u),r=c}else for(o=0;o<i.length;o++){if(l=i[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==r&&s.isPropagationStopped())break t;vv(s,l,u),r=c}}}if(yp)throw n=jm,yp=!1,jm=null,n}function kt(n,t){var e=t[Km];e===void 0&&(e=t[Km]=new Set);var i=n+"__bubble";e.has(i)||(WA(t,n,2,!1),e.add(i))}function im(n,t,e){var i=0;t&&(i|=4),WA(e,n,i,t)}var hf="_reactListening"+Math.random().toString(36).slice(2);function qu(n){if(!n[hf]){n[hf]=!0,Jw.forEach(function(e){e!=="selectionchange"&&(b2.has(e)||im(e,!1,n),im(e,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[hf]||(t[hf]=!0,im("selectionchange",!1,t))}}function WA(n,t,e,i){switch(PA(t)){case 1:var s=D_;break;case 4:s=O_;break;default:s=Vy}e=s.bind(null,t,e,n),s=void 0,!Fm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(t,e,{capture:!0,passive:s}):n.addEventListener(t,e,!0):s!==void 0?n.addEventListener(t,e,{passive:s}):n.addEventListener(t,e,!1)}function sm(n,t,e,i,s){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Eo(l),o===null)return;if(c=o.tag,c===5||c===6){i=r=o;continue t}l=l.parentNode}}i=i.return}gA(function(){var u=r,h=$y(e),d=[];t:{var f=VA.get(n);if(f!==void 0){var p=Wy,y=n;switch(n){case"keypress":if(Lf(e)===0)break t;case"keydown":case"keyup":p=Q_;break;case"focusin":y="focus",p=Qg;break;case"focusout":y="blur",p=Qg;break;case"beforeblur":case"afterblur":p=Qg;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=ov;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=z_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=t2;break;case $A:case BA:case HA:p=H_;break;case UA:p=n2;break;case"scroll":p=F_;break;case"wheel":p=s2;break;case"copy":case"cut":case"paste":p=V_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=lv}var m=(t&4)!==0,S=!m&&n==="scroll",v=m?f!==null?f+"Capture":null:f;m=[];for(var w=u,x;w!==null;){x=w;var E=x.stateNode;if(x.tag===5&&E!==null&&(x=E,v!==null&&(E=Uu(w,v),E!=null&&m.push(Yu(w,E,x)))),S)break;w=w.return}0<m.length&&(f=new p(f,y,null,e,h),d.push({event:f,listeners:m}))}}if(!(t&7)){t:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&e!==Dm&&(y=e.relatedTarget||e.fromElement)&&(Eo(y)||y[qs]))break t;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=e.relatedTarget||e.toElement,p=u,y=y?Eo(y):null,y!==null&&(S=Va(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(m=ov,E="onMouseLeave",v="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(m=lv,E="onPointerLeave",v="onPointerEnter",w="pointer"),S=p==null?f:cl(p),x=y==null?f:cl(y),f=new m(E,w+"leave",p,e,h),f.target=S,f.relatedTarget=x,E=null,Eo(h)===u&&(m=new m(v,w+"enter",y,e,h),m.target=x,m.relatedTarget=S,E=m),S=E,p&&y)e:{for(m=p,v=y,w=0,x=m;x;x=Ya(x))w++;for(x=0,E=v;E;E=Ya(E))x++;for(;0<w-x;)m=Ya(m),w--;for(;0<x-w;)v=Ya(v),x--;for(;w--;){if(m===v||v!==null&&m===v.alternate)break e;m=Ya(m),v=Ya(v)}m=null}else m=null;p!==null&&wv(d,f,p,m,!1),y!==null&&S!==null&&wv(d,S,y,m,!0)}}t:{if(f=u?cl(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=h2;else if(hv(f))if(DA)_=g2;else{_=f2;var T=d2}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=p2);if(_&&(_=_(n,u))){NA(d,_,e,h);break t}T&&T(n,f,u),n==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&Rm(f,"number",f.value)}switch(T=u?cl(u):window,n){case"focusin":(hv(T)||T.contentEditable==="true")&&(al=T,Hm=u,Du=null);break;case"focusout":Du=Hm=al=null;break;case"mousedown":Um=!0;break;case"contextmenu":case"mouseup":case"dragend":Um=!1,mv(d,e,h);break;case"selectionchange":if(v2)break;case"keydown":case"keyup":mv(d,e,h)}var k;if(Ky)t:{switch(n){case"compositionstart":var P="onCompositionStart";break t;case"compositionend":P="onCompositionEnd";break t;case"compositionupdate":P="onCompositionUpdate";break t}P=void 0}else ol?MA(n,e)&&(P="onCompositionEnd"):n==="keydown"&&e.keyCode===229&&(P="onCompositionStart");P&&(LA&&e.locale!=="ko"&&(ol||P!=="onCompositionStart"?P==="onCompositionEnd"&&ol&&(k=RA()):(Wr=h,Gy="value"in Wr?Wr.value:Wr.textContent,ol=!0)),T=xp(u,P),0<T.length&&(P=new av(P,n,null,e,h),d.push({event:P,listeners:T}),k?P.data=k:(k=IA(e),k!==null&&(P.data=k)))),(k=o2?a2(n,e):l2(n,e))&&(u=xp(u,"onBeforeInput"),0<u.length&&(h=new av("onBeforeInput","beforeinput",null,e,h),d.push({event:h,listeners:u}),h.data=k))}GA(d,t)})}function Yu(n,t,e){return{instance:n,listener:t,currentTarget:e}}function xp(n,t){for(var e=t+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Uu(n,e),r!=null&&i.unshift(Yu(n,r,s)),r=Uu(n,t),r!=null&&i.push(Yu(n,r,s))),n=n.return}return i}function Ya(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function wv(n,t,e,i,s){for(var r=t._reactName,o=[];e!==null&&e!==i;){var l=e,c=l.alternate,u=l.stateNode;if(c!==null&&c===i)break;l.tag===5&&u!==null&&(l=u,s?(c=Uu(e,r),c!=null&&o.unshift(Yu(e,c,l))):s||(c=Uu(e,r),c!=null&&o.push(Yu(e,c,l)))),e=e.return}o.length!==0&&n.push({event:t,listeners:o})}var x2=/\r\n?/g,S2=/\u0000|\uFFFD/g;function Av(n){return(typeof n=="string"?n:""+n).replace(x2,`
`).replace(S2,"")}function df(n,t,e){if(t=Av(t),Av(n)!==t&&e)throw Error(I(425))}function Sp(){}var Vm=null,Gm=null;function Wm(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xm=typeof setTimeout=="function"?setTimeout:void 0,E2=typeof clearTimeout=="function"?clearTimeout:void 0,bv=typeof Promise=="function"?Promise:void 0,_2=typeof queueMicrotask=="function"?queueMicrotask:typeof bv<"u"?function(n){return bv.resolve(null).then(n).catch(C2)}:Xm;function C2(n){setTimeout(function(){throw n})}function rm(n,t){var e=t,i=0;do{var s=e.nextSibling;if(n.removeChild(e),s&&s.nodeType===8)if(e=s.data,e==="/$"){if(i===0){n.removeChild(s),Wu(t);return}i--}else e!=="$"&&e!=="$?"&&e!=="$!"||i++;e=s}while(e);Wu(t)}function Qr(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return n}function xv(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return n;t--}else e==="/$"&&t++}n=n.previousSibling}return null}var Wc=Math.random().toString(36).slice(2),Ji="__reactFiber$"+Wc,Qu="__reactProps$"+Wc,qs="__reactContainer$"+Wc,Km="__reactEvents$"+Wc,k2="__reactListeners$"+Wc,T2="__reactHandles$"+Wc;function Eo(n){var t=n[Ji];if(t)return t;for(var e=n.parentNode;e;){if(t=e[qs]||e[Ji]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(n=xv(n);n!==null;){if(e=n[Ji])return e;n=xv(n)}return t}n=e,e=n.parentNode}return null}function Bd(n){return n=n[Ji]||n[qs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function cl(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(I(33))}function wg(n){return n[Qu]||null}var qm=[],ul=-1;function uo(n){return{current:n}}function Pt(n){0>ul||(n.current=qm[ul],qm[ul]=null,ul--)}function _t(n,t){ul++,qm[ul]=n.current,n.current=t}var io={},Ue=uo(io),fn=uo(!1),Oa=io;function Oc(n,t){var e=n.type.contextTypes;if(!e)return io;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in e)s[r]=t[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=t,n.__reactInternalMemoizedMaskedChildContext=s),s}function pn(n){return n=n.childContextTypes,n!=null}function Ep(){Pt(fn),Pt(Ue)}function Sv(n,t,e){if(Ue.current!==io)throw Error(I(168));_t(Ue,t),_t(fn,e)}function XA(n,t,e){var i=n.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return e;i=i.getChildContext();for(var s in i)if(!(s in t))throw Error(I(108,d_(n)||"Unknown",s));return $t({},e,i)}function _p(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||io,Oa=Ue.current,_t(Ue,n),_t(fn,fn.current),!0}function Ev(n,t,e){var i=n.stateNode;if(!i)throw Error(I(169));e?(n=XA(n,t,Oa),i.__reactInternalMemoizedMergedChildContext=n,Pt(fn),Pt(Ue),_t(Ue,n)):Pt(fn),_t(fn,e)}var fs=null,Ag=!1,om=!1;function KA(n){fs===null?fs=[n]:fs.push(n)}function P2(n){Ag=!0,KA(n)}function ho(){if(!om&&fs!==null){om=!0;var n=0,t=yt;try{var e=fs;for(yt=1;n<e.length;n++){var i=e[n];do i=i(!0);while(i!==null)}fs=null,Ag=!1}catch(s){throw fs!==null&&(fs=fs.slice(n+1)),wA(By,ho),s}finally{yt=t,om=!1}}return null}var hl=[],dl=0,Cp=null,kp=0,qn=[],Yn=0,Fa=null,Us=1,Vs="";function mo(n,t){hl[dl++]=kp,hl[dl++]=Cp,Cp=n,kp=t}function qA(n,t,e){qn[Yn++]=Us,qn[Yn++]=Vs,qn[Yn++]=Fa,Fa=n;var i=Us;n=Vs;var s=32-_i(i)-1;i&=~(1<<s),e+=1;var r=32-_i(t)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,Us=1<<32-_i(t)+s|e<<s|i,Vs=r+n}else Us=1<<r|e<<s|i,Vs=n}function Yy(n){n.return!==null&&(mo(n,1),qA(n,1,0))}function Qy(n){for(;n===Cp;)Cp=hl[--dl],hl[dl]=null,kp=hl[--dl],hl[dl]=null;for(;n===Fa;)Fa=qn[--Yn],qn[Yn]=null,Vs=qn[--Yn],qn[Yn]=null,Us=qn[--Yn],qn[Yn]=null}var Dn=null,Nn=null,Nt=!1,Si=null;function YA(n,t){var e=Jn(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=n,t=n.deletions,t===null?(n.deletions=[e],n.flags|=16):t.push(e)}function _v(n,t){switch(n.tag){case 5:var e=n.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(n.stateNode=t,Dn=n,Nn=Qr(t.firstChild),!0):!1;case 6:return t=n.pendingProps===""||t.nodeType!==3?null:t,t!==null?(n.stateNode=t,Dn=n,Nn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=Fa!==null?{id:Us,overflow:Vs}:null,n.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=Jn(18,null,null,0),e.stateNode=t,e.return=n,n.child=e,Dn=n,Nn=null,!0):!1;default:return!1}}function Ym(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Qm(n){if(Nt){var t=Nn;if(t){var e=t;if(!_v(n,t)){if(Ym(n))throw Error(I(418));t=Qr(e.nextSibling);var i=Dn;t&&_v(n,t)?YA(i,e):(n.flags=n.flags&-4097|2,Nt=!1,Dn=n)}}else{if(Ym(n))throw Error(I(418));n.flags=n.flags&-4097|2,Nt=!1,Dn=n}}}function Cv(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Dn=n}function ff(n){if(n!==Dn)return!1;if(!Nt)return Cv(n),Nt=!0,!1;var t;if((t=n.tag!==3)&&!(t=n.tag!==5)&&(t=n.type,t=t!=="head"&&t!=="body"&&!Wm(n.type,n.memoizedProps)),t&&(t=Nn)){if(Ym(n))throw QA(),Error(I(418));for(;t;)YA(n,t),t=Qr(t.nextSibling)}if(Cv(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(I(317));t:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="/$"){if(t===0){Nn=Qr(n.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}n=n.nextSibling}Nn=null}}else Nn=Dn?Qr(n.stateNode.nextSibling):null;return!0}function QA(){for(var n=Nn;n;)n=Qr(n.nextSibling)}function Fc(){Nn=Dn=null,Nt=!1}function Zy(n){Si===null?Si=[n]:Si.push(n)}var R2=er.ReactCurrentBatchConfig;function tu(n,t,e){if(n=e.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(I(309));var i=e.stateNode}if(!i)throw Error(I(147,n));var s=i,r=""+n;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(o){var l=s.refs;o===null?delete l[r]:l[r]=o},t._stringRef=r,t)}if(typeof n!="string")throw Error(I(284));if(!e._owner)throw Error(I(290,n))}return n}function pf(n,t){throw n=Object.prototype.toString.call(t),Error(I(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n))}function kv(n){var t=n._init;return t(n._payload)}function ZA(n){function t(v,w){if(n){var x=v.deletions;x===null?(v.deletions=[w],v.flags|=16):x.push(w)}}function e(v,w){if(!n)return null;for(;w!==null;)t(v,w),w=w.sibling;return null}function i(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function s(v,w){return v=eo(v,w),v.index=0,v.sibling=null,v}function r(v,w,x){return v.index=x,n?(x=v.alternate,x!==null?(x=x.index,x<w?(v.flags|=2,w):x):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function l(v,w,x,E){return w===null||w.tag!==6?(w=fm(x,v.mode,E),w.return=v,w):(w=s(w,x),w.return=v,w)}function c(v,w,x,E){var _=x.type;return _===rl?h(v,w,x.props.children,E,x.key):w!==null&&(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===rr&&kv(_)===w.type)?(E=s(w,x.props),E.ref=tu(v,w,x),E.return=v,E):(E=jf(x.type,x.key,x.props,null,v.mode,E),E.ref=tu(v,w,x),E.return=v,E)}function u(v,w,x,E){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=pm(x,v.mode,E),w.return=v,w):(w=s(w,x.children||[]),w.return=v,w)}function h(v,w,x,E,_){return w===null||w.tag!==7?(w=Da(x,v.mode,E,_),w.return=v,w):(w=s(w,x),w.return=v,w)}function d(v,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return w=fm(""+w,v.mode,x),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case nf:return x=jf(w.type,w.key,w.props,null,v.mode,x),x.ref=tu(v,null,w),x.return=v,x;case sl:return w=pm(w,v.mode,x),w.return=v,w;case rr:var E=w._init;return d(v,E(w._payload),x)}if(cu(w)||qc(w))return w=Da(w,v.mode,x,null),w.return=v,w;pf(v,w)}return null}function f(v,w,x,E){var _=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:l(v,w,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case nf:return x.key===_?c(v,w,x,E):null;case sl:return x.key===_?u(v,w,x,E):null;case rr:return _=x._init,f(v,w,_(x._payload),E)}if(cu(x)||qc(x))return _!==null?null:h(v,w,x,E,null);pf(v,x)}return null}function p(v,w,x,E,_){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(x)||null,l(w,v,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case nf:return v=v.get(E.key===null?x:E.key)||null,c(w,v,E,_);case sl:return v=v.get(E.key===null?x:E.key)||null,u(w,v,E,_);case rr:var T=E._init;return p(v,w,x,T(E._payload),_)}if(cu(E)||qc(E))return v=v.get(x)||null,h(w,v,E,_,null);pf(w,E)}return null}function y(v,w,x,E){for(var _=null,T=null,k=w,P=w=0,L=null;k!==null&&P<x.length;P++){k.index>P?(L=k,k=null):L=k.sibling;var R=f(v,k,x[P],E);if(R===null){k===null&&(k=L);break}n&&k&&R.alternate===null&&t(v,k),w=r(R,w,P),T===null?_=R:T.sibling=R,T=R,k=L}if(P===x.length)return e(v,k),Nt&&mo(v,P),_;if(k===null){for(;P<x.length;P++)k=d(v,x[P],E),k!==null&&(w=r(k,w,P),T===null?_=k:T.sibling=k,T=k);return Nt&&mo(v,P),_}for(k=i(v,k);P<x.length;P++)L=p(k,v,P,x[P],E),L!==null&&(n&&L.alternate!==null&&k.delete(L.key===null?P:L.key),w=r(L,w,P),T===null?_=L:T.sibling=L,T=L);return n&&k.forEach(function(M){return t(v,M)}),Nt&&mo(v,P),_}function m(v,w,x,E){var _=qc(x);if(typeof _!="function")throw Error(I(150));if(x=_.call(x),x==null)throw Error(I(151));for(var T=_=null,k=w,P=w=0,L=null,R=x.next();k!==null&&!R.done;P++,R=x.next()){k.index>P?(L=k,k=null):L=k.sibling;var M=f(v,k,R.value,E);if(M===null){k===null&&(k=L);break}n&&k&&M.alternate===null&&t(v,k),w=r(M,w,P),T===null?_=M:T.sibling=M,T=M,k=L}if(R.done)return e(v,k),Nt&&mo(v,P),_;if(k===null){for(;!R.done;P++,R=x.next())R=d(v,R.value,E),R!==null&&(w=r(R,w,P),T===null?_=R:T.sibling=R,T=R);return Nt&&mo(v,P),_}for(k=i(v,k);!R.done;P++,R=x.next())R=p(k,v,P,R.value,E),R!==null&&(n&&R.alternate!==null&&k.delete(R.key===null?P:R.key),w=r(R,w,P),T===null?_=R:T.sibling=R,T=R);return n&&k.forEach(function(Y){return t(v,Y)}),Nt&&mo(v,P),_}function S(v,w,x,E){if(typeof x=="object"&&x!==null&&x.type===rl&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case nf:t:{for(var _=x.key,T=w;T!==null;){if(T.key===_){if(_=x.type,_===rl){if(T.tag===7){e(v,T.sibling),w=s(T,x.props.children),w.return=v,v=w;break t}}else if(T.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===rr&&kv(_)===T.type){e(v,T.sibling),w=s(T,x.props),w.ref=tu(v,T,x),w.return=v,v=w;break t}e(v,T);break}else t(v,T);T=T.sibling}x.type===rl?(w=Da(x.props.children,v.mode,E,x.key),w.return=v,v=w):(E=jf(x.type,x.key,x.props,null,v.mode,E),E.ref=tu(v,w,x),E.return=v,v=E)}return o(v);case sl:t:{for(T=x.key;w!==null;){if(w.key===T)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){e(v,w.sibling),w=s(w,x.children||[]),w.return=v,v=w;break t}else{e(v,w);break}else t(v,w);w=w.sibling}w=pm(x,v.mode,E),w.return=v,v=w}return o(v);case rr:return T=x._init,S(v,w,T(x._payload),E)}if(cu(x))return y(v,w,x,E);if(qc(x))return m(v,w,x,E);pf(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,w!==null&&w.tag===6?(e(v,w.sibling),w=s(w,x),w.return=v,v=w):(e(v,w),w=fm(x,v.mode,E),w.return=v,v=w),o(v)):e(v,w)}return S}var jc=ZA(!0),JA=ZA(!1),Tp=uo(null),Pp=null,fl=null,Jy=null;function t1(){Jy=fl=Pp=null}function e1(n){var t=Tp.current;Pt(Tp),n._currentValue=t}function Zm(n,t,e){for(;n!==null;){var i=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),n===e)break;n=n.return}}function Sl(n,t){Pp=n,Jy=fl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&t&&(dn=!0),n.firstContext=null)}function ni(n){var t=n._currentValue;if(Jy!==n)if(n={context:n,memoizedValue:t,next:null},fl===null){if(Pp===null)throw Error(I(308));fl=n,Pp.dependencies={lanes:0,firstContext:n}}else fl=fl.next=n;return t}var _o=null;function n1(n){_o===null?_o=[n]:_o.push(n)}function tb(n,t,e,i){var s=t.interleaved;return s===null?(e.next=e,n1(t)):(e.next=s.next,s.next=e),t.interleaved=e,Ys(n,i)}function Ys(n,t){n.lanes|=t;var e=n.alternate;for(e!==null&&(e.lanes|=t),e=n,n=n.return;n!==null;)n.childLanes|=t,e=n.alternate,e!==null&&(e.childLanes|=t),e=n,n=n.return;return e.tag===3?e.stateNode:null}var or=!1;function i1(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eb(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Gs(n,t){return{eventTime:n,lane:t,tag:0,payload:null,callback:null,next:null}}function Zr(n,t,e){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,ct&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,Ys(n,e)}return s=i.interleaved,s===null?(t.next=t,n1(i)):(t.next=s.next,s.next=t),i.interleaved=t,Ys(n,e)}function Mf(n,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,Hy(n,e)}}function Tv(n,t){var e=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,e===i)){var s=null,r=null;if(e=e.firstBaseUpdate,e!==null){do{var o={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};r===null?s=r=o:r=r.next=o,e=e.next}while(e!==null);r===null?s=r=t:r=r.next=t}else s=r=t;e={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=e;return}n=e.lastBaseUpdate,n===null?e.firstBaseUpdate=t:n.next=t,e.lastBaseUpdate=t}function Rp(n,t,e,i){var s=n.updateQueue;or=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?r=u:o.next=u,o=c;var h=n.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=s.baseState;o=0,h=u=c=null,l=r;do{var f=l.lane,p=l.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var y=n,m=l;switch(f=t,p=e,m.tag){case 1:if(y=m.payload,typeof y=="function"){d=y.call(p,d,f);break t}d=y;break t;case 3:y.flags=y.flags&-65537|128;case 0:if(y=m.payload,f=typeof y=="function"?y.call(p,d,f):y,f==null)break t;d=$t({},d,f);break t;case 2:or=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=p,c=d):h=h.next=p,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else r===null&&(s.shared.lanes=0);za|=o,n.lanes=o,n.memoizedState=d}}function Pv(n,t,e){if(n=t.effects,t.effects=null,n!==null)for(t=0;t<n.length;t++){var i=n[t],s=i.callback;if(s!==null){if(i.callback=null,i=e,typeof s!="function")throw Error(I(191,s));s.call(i)}}}var Hd={},is=uo(Hd),Zu=uo(Hd),Ju=uo(Hd);function Co(n){if(n===Hd)throw Error(I(174));return n}function s1(n,t){switch(_t(Ju,t),_t(Zu,n),_t(is,Hd),n=t.nodeType,n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Mm(null,"");break;default:n=n===8?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=Mm(t,n)}Pt(is),_t(is,t)}function zc(){Pt(is),Pt(Zu),Pt(Ju)}function nb(n){Co(Ju.current);var t=Co(is.current),e=Mm(t,n.type);t!==e&&(_t(Zu,n),_t(is,e))}function r1(n){Zu.current===n&&(Pt(is),Pt(Zu))}var jt=uo(0);function Lp(n){for(var t=n;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var am=[];function o1(){for(var n=0;n<am.length;n++)am[n]._workInProgressVersionPrimary=null;am.length=0}var If=er.ReactCurrentDispatcher,lm=er.ReactCurrentBatchConfig,ja=0,zt=null,oe=null,me=null,Mp=!1,Ou=!1,th=0,L2=0;function Le(){throw Error(I(321))}function a1(n,t){if(t===null)return!1;for(var e=0;e<t.length&&e<n.length;e++)if(!ki(n[e],t[e]))return!1;return!0}function l1(n,t,e,i,s,r){if(ja=r,zt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,If.current=n===null||n.memoizedState===null?D2:O2,n=e(i,s),Ou){r=0;do{if(Ou=!1,th=0,25<=r)throw Error(I(301));r+=1,me=oe=null,t.updateQueue=null,If.current=F2,n=e(i,s)}while(Ou)}if(If.current=Ip,t=oe!==null&&oe.next!==null,ja=0,me=oe=zt=null,Mp=!1,t)throw Error(I(300));return n}function c1(){var n=th!==0;return th=0,n}function Oi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return me===null?zt.memoizedState=me=n:me=me.next=n,me}function ii(){if(oe===null){var n=zt.alternate;n=n!==null?n.memoizedState:null}else n=oe.next;var t=me===null?zt.memoizedState:me.next;if(t!==null)me=t,oe=n;else{if(n===null)throw Error(I(310));oe=n,n={memoizedState:oe.memoizedState,baseState:oe.baseState,baseQueue:oe.baseQueue,queue:oe.queue,next:null},me===null?zt.memoizedState=me=n:me=me.next=n}return me}function eh(n,t){return typeof t=="function"?t(n):t}function cm(n){var t=ii(),e=t.queue;if(e===null)throw Error(I(311));e.lastRenderedReducer=n;var i=oe,s=i.baseQueue,r=e.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,e.pending=null}if(s!==null){r=s.next,i=i.baseState;var l=o=null,c=null,u=r;do{var h=u.lane;if((ja&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=i):c=c.next=d,zt.lanes|=h,za|=h}u=u.next}while(u!==null&&u!==r);c===null?o=i:c.next=l,ki(i,t.memoizedState)||(dn=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,e.lastRenderedState=i}if(n=e.interleaved,n!==null){s=n;do r=s.lane,zt.lanes|=r,za|=r,s=s.next;while(s!==n)}else s===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function um(n){var t=ii(),e=t.queue;if(e===null)throw Error(I(311));e.lastRenderedReducer=n;var i=e.dispatch,s=e.pending,r=t.memoizedState;if(s!==null){e.pending=null;var o=s=s.next;do r=n(r,o.action),o=o.next;while(o!==s);ki(r,t.memoizedState)||(dn=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),e.lastRenderedState=r}return[r,i]}function ib(){}function sb(n,t){var e=zt,i=ii(),s=t(),r=!ki(i.memoizedState,s);if(r&&(i.memoizedState=s,dn=!0),i=i.queue,u1(ab.bind(null,e,i,n),[n]),i.getSnapshot!==t||r||me!==null&&me.memoizedState.tag&1){if(e.flags|=2048,nh(9,ob.bind(null,e,i,s,t),void 0,null),ye===null)throw Error(I(349));ja&30||rb(e,t,s)}return s}function rb(n,t,e){n.flags|=16384,n={getSnapshot:t,value:e},t=zt.updateQueue,t===null?(t={lastEffect:null,stores:null},zt.updateQueue=t,t.stores=[n]):(e=t.stores,e===null?t.stores=[n]:e.push(n))}function ob(n,t,e,i){t.value=e,t.getSnapshot=i,lb(t)&&cb(n)}function ab(n,t,e){return e(function(){lb(t)&&cb(n)})}function lb(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!ki(n,e)}catch{return!0}}function cb(n){var t=Ys(n,1);t!==null&&Ci(t,n,1,-1)}function Rv(n){var t=Oi();return typeof n=="function"&&(n=n()),t.memoizedState=t.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eh,lastRenderedState:n},t.queue=n,n=n.dispatch=N2.bind(null,zt,n),[t.memoizedState,n]}function nh(n,t,e,i){return n={tag:n,create:t,destroy:e,deps:i,next:null},t=zt.updateQueue,t===null?(t={lastEffect:null,stores:null},zt.updateQueue=t,t.lastEffect=n.next=n):(e=t.lastEffect,e===null?t.lastEffect=n.next=n:(i=e.next,e.next=n,n.next=i,t.lastEffect=n)),n}function ub(){return ii().memoizedState}function Nf(n,t,e,i){var s=Oi();zt.flags|=n,s.memoizedState=nh(1|t,e,void 0,i===void 0?null:i)}function bg(n,t,e,i){var s=ii();i=i===void 0?null:i;var r=void 0;if(oe!==null){var o=oe.memoizedState;if(r=o.destroy,i!==null&&a1(i,o.deps)){s.memoizedState=nh(t,e,r,i);return}}zt.flags|=n,s.memoizedState=nh(1|t,e,r,i)}function Lv(n,t){return Nf(8390656,8,n,t)}function u1(n,t){return bg(2048,8,n,t)}function hb(n,t){return bg(4,2,n,t)}function db(n,t){return bg(4,4,n,t)}function fb(n,t){if(typeof t=="function")return n=n(),t(n),function(){t(null)};if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function pb(n,t,e){return e=e!=null?e.concat([n]):null,bg(4,4,fb.bind(null,t,n),e)}function h1(){}function gb(n,t){var e=ii();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&a1(t,i[1])?i[0]:(e.memoizedState=[n,t],n)}function mb(n,t){var e=ii();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&a1(t,i[1])?i[0]:(n=n(),e.memoizedState=[n,t],n)}function yb(n,t,e){return ja&21?(ki(e,t)||(e=xA(),zt.lanes|=e,za|=e,n.baseState=!0),t):(n.baseState&&(n.baseState=!1,dn=!0),n.memoizedState=e)}function M2(n,t){var e=yt;yt=e!==0&&4>e?e:4,n(!0);var i=lm.transition;lm.transition={};try{n(!1),t()}finally{yt=e,lm.transition=i}}function vb(){return ii().memoizedState}function I2(n,t,e){var i=to(n);if(e={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null},wb(n))Ab(t,e);else if(e=tb(n,t,e,i),e!==null){var s=tn();Ci(e,n,i,s),bb(e,t,i)}}function N2(n,t,e){var i=to(n),s={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null};if(wb(n))Ab(t,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,l=r(o,e);if(s.hasEagerState=!0,s.eagerState=l,ki(l,o)){var c=t.interleaved;c===null?(s.next=s,n1(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}e=tb(n,t,s,i),e!==null&&(s=tn(),Ci(e,n,i,s),bb(e,t,i))}}function wb(n){var t=n.alternate;return n===zt||t!==null&&t===zt}function Ab(n,t){Ou=Mp=!0;var e=n.pending;e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t}function bb(n,t,e){if(e&4194240){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,Hy(n,e)}}var Ip={readContext:ni,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useInsertionEffect:Le,useLayoutEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useDeferredValue:Le,useTransition:Le,useMutableSource:Le,useSyncExternalStore:Le,useId:Le,unstable_isNewReconciler:!1},D2={readContext:ni,useCallback:function(n,t){return Oi().memoizedState=[n,t===void 0?null:t],n},useContext:ni,useEffect:Lv,useImperativeHandle:function(n,t,e){return e=e!=null?e.concat([n]):null,Nf(4194308,4,fb.bind(null,t,n),e)},useLayoutEffect:function(n,t){return Nf(4194308,4,n,t)},useInsertionEffect:function(n,t){return Nf(4,2,n,t)},useMemo:function(n,t){var e=Oi();return t=t===void 0?null:t,n=n(),e.memoizedState=[n,t],n},useReducer:function(n,t,e){var i=Oi();return t=e!==void 0?e(t):t,i.memoizedState=i.baseState=t,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:t},i.queue=n,n=n.dispatch=I2.bind(null,zt,n),[i.memoizedState,n]},useRef:function(n){var t=Oi();return n={current:n},t.memoizedState=n},useState:Rv,useDebugValue:h1,useDeferredValue:function(n){return Oi().memoizedState=n},useTransition:function(){var n=Rv(!1),t=n[0];return n=M2.bind(null,n[1]),Oi().memoizedState=n,[t,n]},useMutableSource:function(){},useSyncExternalStore:function(n,t,e){var i=zt,s=Oi();if(Nt){if(e===void 0)throw Error(I(407));e=e()}else{if(e=t(),ye===null)throw Error(I(349));ja&30||rb(i,t,e)}s.memoizedState=e;var r={value:e,getSnapshot:t};return s.queue=r,Lv(ab.bind(null,i,r,n),[n]),i.flags|=2048,nh(9,ob.bind(null,i,r,e,t),void 0,null),e},useId:function(){var n=Oi(),t=ye.identifierPrefix;if(Nt){var e=Vs,i=Us;e=(i&~(1<<32-_i(i)-1)).toString(32)+e,t=":"+t+"R"+e,e=th++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=L2++,t=":"+t+"r"+e.toString(32)+":";return n.memoizedState=t},unstable_isNewReconciler:!1},O2={readContext:ni,useCallback:gb,useContext:ni,useEffect:u1,useImperativeHandle:pb,useInsertionEffect:hb,useLayoutEffect:db,useMemo:mb,useReducer:cm,useRef:ub,useState:function(){return cm(eh)},useDebugValue:h1,useDeferredValue:function(n){var t=ii();return yb(t,oe.memoizedState,n)},useTransition:function(){var n=cm(eh)[0],t=ii().memoizedState;return[n,t]},useMutableSource:ib,useSyncExternalStore:sb,useId:vb,unstable_isNewReconciler:!1},F2={readContext:ni,useCallback:gb,useContext:ni,useEffect:u1,useImperativeHandle:pb,useInsertionEffect:hb,useLayoutEffect:db,useMemo:mb,useReducer:um,useRef:ub,useState:function(){return um(eh)},useDebugValue:h1,useDeferredValue:function(n){var t=ii();return oe===null?t.memoizedState=n:yb(t,oe.memoizedState,n)},useTransition:function(){var n=um(eh)[0],t=ii().memoizedState;return[n,t]},useMutableSource:ib,useSyncExternalStore:sb,useId:vb,unstable_isNewReconciler:!1};function li(n,t){if(n&&n.defaultProps){t=$t({},t),n=n.defaultProps;for(var e in n)t[e]===void 0&&(t[e]=n[e]);return t}return t}function Jm(n,t,e,i){t=n.memoizedState,e=e(i,t),e=e==null?t:$t({},t,e),n.memoizedState=e,n.lanes===0&&(n.updateQueue.baseState=e)}var xg={isMounted:function(n){return(n=n._reactInternals)?Va(n)===n:!1},enqueueSetState:function(n,t,e){n=n._reactInternals;var i=tn(),s=to(n),r=Gs(i,s);r.payload=t,e!=null&&(r.callback=e),t=Zr(n,r,s),t!==null&&(Ci(t,n,s,i),Mf(t,n,s))},enqueueReplaceState:function(n,t,e){n=n._reactInternals;var i=tn(),s=to(n),r=Gs(i,s);r.tag=1,r.payload=t,e!=null&&(r.callback=e),t=Zr(n,r,s),t!==null&&(Ci(t,n,s,i),Mf(t,n,s))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var e=tn(),i=to(n),s=Gs(e,i);s.tag=2,t!=null&&(s.callback=t),t=Zr(n,s,i),t!==null&&(Ci(t,n,i,e),Mf(t,n,i))}};function Mv(n,t,e,i,s,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,o):t.prototype&&t.prototype.isPureReactComponent?!Ku(e,i)||!Ku(s,r):!0}function xb(n,t,e){var i=!1,s=io,r=t.contextType;return typeof r=="object"&&r!==null?r=ni(r):(s=pn(t)?Oa:Ue.current,i=t.contextTypes,r=(i=i!=null)?Oc(n,s):io),t=new t(e,r),n.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=xg,n.stateNode=t,t._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),t}function Iv(n,t,e,i){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,i),t.state!==n&&xg.enqueueReplaceState(t,t.state,null)}function t0(n,t,e,i){var s=n.stateNode;s.props=e,s.state=n.memoizedState,s.refs={},i1(n);var r=t.contextType;typeof r=="object"&&r!==null?s.context=ni(r):(r=pn(t)?Oa:Ue.current,s.context=Oc(n,r)),s.state=n.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(Jm(n,t,r,e),s.state=n.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&xg.enqueueReplaceState(s,s.state,null),Rp(n,e,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function $c(n,t){try{var e="",i=t;do e+=h_(i),i=i.return;while(i);var s=e}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:t,stack:s,digest:null}}function hm(n,t,e){return{value:n,source:null,stack:e??null,digest:t??null}}function e0(n,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var j2=typeof WeakMap=="function"?WeakMap:Map;function Sb(n,t,e){e=Gs(-1,e),e.tag=3,e.payload={element:null};var i=t.value;return e.callback=function(){Dp||(Dp=!0,h0=i),e0(n,t)},e}function Eb(n,t,e){e=Gs(-1,e),e.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=t.value;e.payload=function(){return i(s)},e.callback=function(){e0(n,t)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){e0(n,t),typeof i!="function"&&(Jr===null?Jr=new Set([this]):Jr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),e}function Nv(n,t,e){var i=n.pingCache;if(i===null){i=n.pingCache=new j2;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(e)||(s.add(e),n=Z2.bind(null,n,t,e),t.then(n,n))}function Dv(n){do{var t;if((t=n.tag===13)&&(t=n.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return n;n=n.return}while(n!==null);return null}function Ov(n,t,e,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===t?n.flags|=65536:(n.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=Gs(-1,1),t.tag=2,Zr(e,t,1))),e.lanes|=1),n)}var z2=er.ReactCurrentOwner,dn=!1;function Ze(n,t,e,i){t.child=n===null?JA(t,null,e,i):jc(t,n.child,e,i)}function Fv(n,t,e,i,s){e=e.render;var r=t.ref;return Sl(t,s),i=l1(n,t,e,i,r,s),e=c1(),n!==null&&!dn?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~s,Qs(n,t,s)):(Nt&&e&&Yy(t),t.flags|=1,Ze(n,t,i,s),t.child)}function jv(n,t,e,i,s){if(n===null){var r=e.type;return typeof r=="function"&&!w1(r)&&r.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=r,_b(n,t,r,i,s)):(n=jf(e.type,null,i,t,t.mode,s),n.ref=t.ref,n.return=t,t.child=n)}if(r=n.child,!(n.lanes&s)){var o=r.memoizedProps;if(e=e.compare,e=e!==null?e:Ku,e(o,i)&&n.ref===t.ref)return Qs(n,t,s)}return t.flags|=1,n=eo(r,i),n.ref=t.ref,n.return=t,t.child=n}function _b(n,t,e,i,s){if(n!==null){var r=n.memoizedProps;if(Ku(r,i)&&n.ref===t.ref)if(dn=!1,t.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(dn=!0);else return t.lanes=n.lanes,Qs(n,t,s)}return n0(n,t,e,i,s)}function Cb(n,t,e){var i=t.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(gl,Ln),Ln|=e;else{if(!(e&1073741824))return n=r!==null?r.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:n,cachePool:null,transitions:null},t.updateQueue=null,_t(gl,Ln),Ln|=n,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:e,_t(gl,Ln),Ln|=i}else r!==null?(i=r.baseLanes|e,t.memoizedState=null):i=e,_t(gl,Ln),Ln|=i;return Ze(n,t,s,e),t.child}function kb(n,t){var e=t.ref;(n===null&&e!==null||n!==null&&n.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function n0(n,t,e,i,s){var r=pn(e)?Oa:Ue.current;return r=Oc(t,r),Sl(t,s),e=l1(n,t,e,i,r,s),i=c1(),n!==null&&!dn?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~s,Qs(n,t,s)):(Nt&&i&&Yy(t),t.flags|=1,Ze(n,t,e,s),t.child)}function zv(n,t,e,i,s){if(pn(e)){var r=!0;_p(t)}else r=!1;if(Sl(t,s),t.stateNode===null)Df(n,t),xb(t,e,i),t0(t,e,i,s),i=!0;else if(n===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=e.contextType;typeof u=="object"&&u!==null?u=ni(u):(u=pn(e)?Oa:Ue.current,u=Oc(t,u));var h=e.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||c!==u)&&Iv(t,o,i,u),or=!1;var f=t.memoizedState;o.state=f,Rp(t,i,o,s),c=t.memoizedState,l!==i||f!==c||fn.current||or?(typeof h=="function"&&(Jm(t,e,h,i),c=t.memoizedState),(l=or||Mv(t,e,l,i,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),o.props=i,o.state=c,o.context=u,i=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,eb(n,t),l=t.memoizedProps,u=t.type===t.elementType?l:li(t.type,l),o.props=u,d=t.pendingProps,f=o.context,c=e.contextType,typeof c=="object"&&c!==null?c=ni(c):(c=pn(e)?Oa:Ue.current,c=Oc(t,c));var p=e.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==c)&&Iv(t,o,i,c),or=!1,f=t.memoizedState,o.state=f,Rp(t,i,o,s);var y=t.memoizedState;l!==d||f!==y||fn.current||or?(typeof p=="function"&&(Jm(t,e,p,i),y=t.memoizedState),(u=or||Mv(t,e,u,i,f,y,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=y),o.props=i,o.state=y,o.context=c,i=u):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=1024),i=!1)}return i0(n,t,e,i,r,s)}function i0(n,t,e,i,s,r){kb(n,t);var o=(t.flags&128)!==0;if(!i&&!o)return s&&Ev(t,e,!1),Qs(n,t,r);i=t.stateNode,z2.current=t;var l=o&&typeof e.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,n!==null&&o?(t.child=jc(t,n.child,null,r),t.child=jc(t,null,l,r)):Ze(n,t,l,r),t.memoizedState=i.state,s&&Ev(t,e,!0),t.child}function Tb(n){var t=n.stateNode;t.pendingContext?Sv(n,t.pendingContext,t.pendingContext!==t.context):t.context&&Sv(n,t.context,!1),s1(n,t.containerInfo)}function $v(n,t,e,i,s){return Fc(),Zy(s),t.flags|=256,Ze(n,t,e,i),t.child}var s0={dehydrated:null,treeContext:null,retryLane:0};function r0(n){return{baseLanes:n,cachePool:null,transitions:null}}function Pb(n,t,e){var i=t.pendingProps,s=jt.current,r=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=n!==null&&n.memoizedState===null?!1:(s&2)!==0),l?(r=!0,t.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),_t(jt,s&1),n===null)return Qm(t),n=t.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(t.mode&1?n.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,n=i.fallback,r?(i=t.mode,r=t.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=_g(o,i,0,null),n=Da(n,i,e,null),r.return=t,n.return=t,r.sibling=n,t.child=r,t.child.memoizedState=r0(e),t.memoizedState=s0,n):d1(t,o));if(s=n.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return $2(n,t,o,i,l,s,e);if(r){r=i.fallback,o=t.mode,s=n.child,l=s.sibling;var c={mode:"hidden",children:i.children};return!(o&1)&&t.child!==s?(i=t.child,i.childLanes=0,i.pendingProps=c,t.deletions=null):(i=eo(s,c),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?r=eo(l,r):(r=Da(r,o,e,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,o=n.child.memoizedState,o=o===null?r0(e):{baseLanes:o.baseLanes|e,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~e,t.memoizedState=s0,i}return r=n.child,n=r.sibling,i=eo(r,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=e),i.return=t,i.sibling=null,n!==null&&(e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)),t.child=i,t.memoizedState=null,i}function d1(n,t){return t=_g({mode:"visible",children:t},n.mode,0,null),t.return=n,n.child=t}function gf(n,t,e,i){return i!==null&&Zy(i),jc(t,n.child,null,e),n=d1(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function $2(n,t,e,i,s,r,o){if(e)return t.flags&256?(t.flags&=-257,i=hm(Error(I(422))),gf(n,t,o,i)):t.memoizedState!==null?(t.child=n.child,t.flags|=128,null):(r=i.fallback,s=t.mode,i=_g({mode:"visible",children:i.children},s,0,null),r=Da(r,s,o,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,t.mode&1&&jc(t,n.child,null,o),t.child.memoizedState=r0(o),t.memoizedState=s0,r);if(!(t.mode&1))return gf(n,t,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,r=Error(I(419)),i=hm(r,i,void 0),gf(n,t,o,i)}if(l=(o&n.childLanes)!==0,dn||l){if(i=ye,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,Ys(n,s),Ci(i,n,s,-1))}return v1(),i=hm(Error(I(421))),gf(n,t,o,i)}return s.data==="$?"?(t.flags|=128,t.child=n.child,t=J2.bind(null,n),s._reactRetry=t,null):(n=r.treeContext,Nn=Qr(s.nextSibling),Dn=t,Nt=!0,Si=null,n!==null&&(qn[Yn++]=Us,qn[Yn++]=Vs,qn[Yn++]=Fa,Us=n.id,Vs=n.overflow,Fa=t),t=d1(t,i.children),t.flags|=4096,t)}function Bv(n,t,e){n.lanes|=t;var i=n.alternate;i!==null&&(i.lanes|=t),Zm(n.return,t,e)}function dm(n,t,e,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:e,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=e,r.tailMode=s)}function Rb(n,t,e){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(Ze(n,t,i.children,e),i=jt.current,i&2)i=i&1|2,t.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Bv(n,e,t);else if(n.tag===19)Bv(n,e,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(_t(jt,i),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(e=t.child,s=null;e!==null;)n=e.alternate,n!==null&&Lp(n)===null&&(s=e),e=e.sibling;e=s,e===null?(s=t.child,t.child=null):(s=e.sibling,e.sibling=null),dm(t,!1,s,e,r);break;case"backwards":for(e=null,s=t.child,t.child=null;s!==null;){if(n=s.alternate,n!==null&&Lp(n)===null){t.child=s;break}n=s.sibling,s.sibling=e,e=s,s=n}dm(t,!0,e,null,r);break;case"together":dm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Df(n,t){!(t.mode&1)&&n!==null&&(n.alternate=null,t.alternate=null,t.flags|=2)}function Qs(n,t,e){if(n!==null&&(t.dependencies=n.dependencies),za|=t.lanes,!(e&t.childLanes))return null;if(n!==null&&t.child!==n.child)throw Error(I(153));if(t.child!==null){for(n=t.child,e=eo(n,n.pendingProps),t.child=e,e.return=t;n.sibling!==null;)n=n.sibling,e=e.sibling=eo(n,n.pendingProps),e.return=t;e.sibling=null}return t.child}function B2(n,t,e){switch(t.tag){case 3:Tb(t),Fc();break;case 5:nb(t);break;case 1:pn(t.type)&&_p(t);break;case 4:s1(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;_t(Tp,i._currentValue),i._currentValue=s;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(_t(jt,jt.current&1),t.flags|=128,null):e&t.child.childLanes?Pb(n,t,e):(_t(jt,jt.current&1),n=Qs(n,t,e),n!==null?n.sibling:null);_t(jt,jt.current&1);break;case 19:if(i=(e&t.childLanes)!==0,n.flags&128){if(i)return Rb(n,t,e);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_t(jt,jt.current),i)break;return null;case 22:case 23:return t.lanes=0,Cb(n,t,e)}return Qs(n,t,e)}var Lb,o0,Mb,Ib;Lb=function(n,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)n.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};o0=function(){};Mb=function(n,t,e,i){var s=n.memoizedProps;if(s!==i){n=t.stateNode,Co(is.current);var r=null;switch(e){case"input":s=Tm(n,s),i=Tm(n,i),r=[];break;case"select":s=$t({},s,{value:void 0}),i=$t({},i,{value:void 0}),r=[];break;case"textarea":s=Lm(n,s),i=Lm(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Sp)}Im(e,i);var o;e=null;for(u in s)if(!i.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(e||(e={}),e[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Bu.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in i){var c=i[u];if(l=s!=null?s[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(e||(e={}),e[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(e||(e={}),e[o]=c[o])}else e||(r||(r=[]),r.push(u,e)),e=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Bu.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&kt("scroll",n),r||l===c||(r=[])):(r=r||[]).push(u,c))}e&&(r=r||[]).push("style",e);var u=r;(t.updateQueue=u)&&(t.flags|=4)}};Ib=function(n,t,e,i){e!==i&&(t.flags|=4)};function eu(n,t){if(!Nt)switch(n.tailMode){case"hidden":t=n.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?n.tail=null:e.sibling=null;break;case"collapsed":e=n.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Me(n){var t=n.alternate!==null&&n.alternate.child===n.child,e=0,i=0;if(t)for(var s=n.child;s!==null;)e|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)e|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=e,t}function H2(n,t,e){var i=t.pendingProps;switch(Qy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(t),null;case 1:return pn(t.type)&&Ep(),Me(t),null;case 3:return i=t.stateNode,zc(),Pt(fn),Pt(Ue),o1(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(ff(t)?t.flags|=4:n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Si!==null&&(p0(Si),Si=null))),o0(n,t),Me(t),null;case 5:r1(t);var s=Co(Ju.current);if(e=t.type,n!==null&&t.stateNode!=null)Mb(n,t,e,i,s),n.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(I(166));return Me(t),null}if(n=Co(is.current),ff(t)){i=t.stateNode,e=t.type;var r=t.memoizedProps;switch(i[Ji]=t,i[Qu]=r,n=(t.mode&1)!==0,e){case"dialog":kt("cancel",i),kt("close",i);break;case"iframe":case"object":case"embed":kt("load",i);break;case"video":case"audio":for(s=0;s<hu.length;s++)kt(hu[s],i);break;case"source":kt("error",i);break;case"img":case"image":case"link":kt("error",i),kt("load",i);break;case"details":kt("toggle",i);break;case"input":Y1(i,r),kt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},kt("invalid",i);break;case"textarea":Z1(i,r),kt("invalid",i)}Im(e,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];o==="children"?typeof l=="string"?i.textContent!==l&&(r.suppressHydrationWarning!==!0&&df(i.textContent,l,n),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(r.suppressHydrationWarning!==!0&&df(i.textContent,l,n),s=["children",""+l]):Bu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&kt("scroll",i)}switch(e){case"input":sf(i),Q1(i,r,!0);break;case"textarea":sf(i),J1(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Sp)}i=s,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=aA(e)),n==="http://www.w3.org/1999/xhtml"?e==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(e,{is:i.is}):(n=o.createElement(e),e==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,e),n[Ji]=t,n[Qu]=i,Lb(n,t,!1,!1),t.stateNode=n;t:{switch(o=Nm(e,i),e){case"dialog":kt("cancel",n),kt("close",n),s=i;break;case"iframe":case"object":case"embed":kt("load",n),s=i;break;case"video":case"audio":for(s=0;s<hu.length;s++)kt(hu[s],n);s=i;break;case"source":kt("error",n),s=i;break;case"img":case"image":case"link":kt("error",n),kt("load",n),s=i;break;case"details":kt("toggle",n),s=i;break;case"input":Y1(n,i),s=Tm(n,i),kt("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=$t({},i,{value:void 0}),kt("invalid",n);break;case"textarea":Z1(n,i),s=Lm(n,i),kt("invalid",n);break;default:s=i}Im(e,s),l=s;for(r in l)if(l.hasOwnProperty(r)){var c=l[r];r==="style"?uA(n,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&lA(n,c)):r==="children"?typeof c=="string"?(e!=="textarea"||c!=="")&&Hu(n,c):typeof c=="number"&&Hu(n,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Bu.hasOwnProperty(r)?c!=null&&r==="onScroll"&&kt("scroll",n):c!=null&&Oy(n,r,c,o))}switch(e){case"input":sf(n),Q1(n,i,!1);break;case"textarea":sf(n),J1(n);break;case"option":i.value!=null&&n.setAttribute("value",""+no(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?wl(n,!!i.multiple,r,!1):i.defaultValue!=null&&wl(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Sp)}switch(e){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Me(t),null;case 6:if(n&&t.stateNode!=null)Ib(n,t,n.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(I(166));if(e=Co(Ju.current),Co(is.current),ff(t)){if(i=t.stateNode,e=t.memoizedProps,i[Ji]=t,(r=i.nodeValue!==e)&&(n=Dn,n!==null))switch(n.tag){case 3:df(i.nodeValue,e,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&df(i.nodeValue,e,(n.mode&1)!==0)}r&&(t.flags|=4)}else i=(e.nodeType===9?e:e.ownerDocument).createTextNode(i),i[Ji]=t,t.stateNode=i}return Me(t),null;case 13:if(Pt(jt),i=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Nt&&Nn!==null&&t.mode&1&&!(t.flags&128))QA(),Fc(),t.flags|=98560,r=!1;else if(r=ff(t),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(I(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(I(317));r[Ji]=t}else Fc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Me(t),r=!1}else Si!==null&&(p0(Si),Si=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(n===null||jt.current&1?ae===0&&(ae=3):v1())),t.updateQueue!==null&&(t.flags|=4),Me(t),null);case 4:return zc(),o0(n,t),n===null&&qu(t.stateNode.containerInfo),Me(t),null;case 10:return e1(t.type._context),Me(t),null;case 17:return pn(t.type)&&Ep(),Me(t),null;case 19:if(Pt(jt),r=t.memoizedState,r===null)return Me(t),null;if(i=(t.flags&128)!==0,o=r.rendering,o===null)if(i)eu(r,!1);else{if(ae!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(o=Lp(n),o!==null){for(t.flags|=128,eu(r,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=e,e=t.child;e!==null;)r=e,n=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e=e.sibling;return _t(jt,jt.current&1|2),t.child}n=n.sibling}r.tail!==null&&Yt()>Bc&&(t.flags|=128,i=!0,eu(r,!1),t.lanes=4194304)}else{if(!i)if(n=Lp(o),n!==null){if(t.flags|=128,i=!0,e=n.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),eu(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Nt)return Me(t),null}else 2*Yt()-r.renderingStartTime>Bc&&e!==1073741824&&(t.flags|=128,i=!0,eu(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e!==null?e.sibling=o:t.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Yt(),t.sibling=null,e=jt.current,_t(jt,i?e&1|2:e&1),t):(Me(t),null);case 22:case 23:return y1(),i=t.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Ln&1073741824&&(Me(t),t.subtreeFlags&6&&(t.flags|=8192)):Me(t),null;case 24:return null;case 25:return null}throw Error(I(156,t.tag))}function U2(n,t){switch(Qy(t),t.tag){case 1:return pn(t.type)&&Ep(),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return zc(),Pt(fn),Pt(Ue),o1(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 5:return r1(t),null;case 13:if(Pt(jt),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(I(340));Fc()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return Pt(jt),null;case 4:return zc(),null;case 10:return e1(t.type._context),null;case 22:case 23:return y1(),null;case 24:return null;default:return null}}var mf=!1,$e=!1,V2=typeof WeakSet=="function"?WeakSet:Set,H=null;function pl(n,t){var e=n.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(i){Ut(n,t,i)}else e.current=null}function a0(n,t,e){try{e()}catch(i){Ut(n,t,i)}}var Hv=!1;function G2(n,t){if(Vm=Ap,n=jA(),qy(n)){if("selectionStart"in n)var e={start:n.selectionStart,end:n.selectionEnd};else t:{e=(e=n.ownerDocument)&&e.defaultView||window;var i=e.getSelection&&e.getSelection();if(i&&i.rangeCount!==0){e=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{e.nodeType,r.nodeType}catch{e=null;break t}var o=0,l=-1,c=-1,u=0,h=0,d=n,f=null;e:for(;;){for(var p;d!==e||s!==0&&d.nodeType!==3||(l=o+s),d!==r||i!==0&&d.nodeType!==3||(c=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===n)break e;if(f===e&&++u===s&&(l=o),f===r&&++h===i&&(c=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}e=l===-1||c===-1?null:{start:l,end:c}}else e=null}e=e||{start:0,end:0}}else e=null;for(Gm={focusedElem:n,selectionRange:e},Ap=!1,H=t;H!==null;)if(t=H,n=t.child,(t.subtreeFlags&1028)!==0&&n!==null)n.return=t,H=n;else for(;H!==null;){t=H;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var m=y.memoizedProps,S=y.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:li(t.type,m),S);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(E){Ut(t,t.return,E)}if(n=t.sibling,n!==null){n.return=t.return,H=n;break}H=t.return}return y=Hv,Hv=!1,y}function Fu(n,t,e){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&a0(t,e,r)}s=s.next}while(s!==i)}}function Sg(n,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&n)===n){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}}function l0(n){var t=n.ref;if(t!==null){var e=n.stateNode;switch(n.tag){case 5:n=e;break;default:n=e}typeof t=="function"?t(n):t.current=n}}function Nb(n){var t=n.alternate;t!==null&&(n.alternate=null,Nb(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&(delete t[Ji],delete t[Qu],delete t[Km],delete t[k2],delete t[T2])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Db(n){return n.tag===5||n.tag===3||n.tag===4}function Uv(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Db(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function c0(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(n,t):e.insertBefore(n,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(n,e)):(t=e,t.appendChild(n)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=Sp));else if(i!==4&&(n=n.child,n!==null))for(c0(n,t,e),n=n.sibling;n!==null;)c0(n,t,e),n=n.sibling}function u0(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.insertBefore(n,t):e.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(u0(n,t,e),n=n.sibling;n!==null;)u0(n,t,e),n=n.sibling}var _e=null,xi=!1;function ir(n,t,e){for(e=e.child;e!==null;)Ob(n,t,e),e=e.sibling}function Ob(n,t,e){if(ns&&typeof ns.onCommitFiberUnmount=="function")try{ns.onCommitFiberUnmount(gg,e)}catch{}switch(e.tag){case 5:$e||pl(e,t);case 6:var i=_e,s=xi;_e=null,ir(n,t,e),_e=i,xi=s,_e!==null&&(xi?(n=_e,e=e.stateNode,n.nodeType===8?n.parentNode.removeChild(e):n.removeChild(e)):_e.removeChild(e.stateNode));break;case 18:_e!==null&&(xi?(n=_e,e=e.stateNode,n.nodeType===8?rm(n.parentNode,e):n.nodeType===1&&rm(n,e),Wu(n)):rm(_e,e.stateNode));break;case 4:i=_e,s=xi,_e=e.stateNode.containerInfo,xi=!0,ir(n,t,e),_e=i,xi=s;break;case 0:case 11:case 14:case 15:if(!$e&&(i=e.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&a0(e,t,o),s=s.next}while(s!==i)}ir(n,t,e);break;case 1:if(!$e&&(pl(e,t),i=e.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=e.memoizedProps,i.state=e.memoizedState,i.componentWillUnmount()}catch(l){Ut(e,t,l)}ir(n,t,e);break;case 21:ir(n,t,e);break;case 22:e.mode&1?($e=(i=$e)||e.memoizedState!==null,ir(n,t,e),$e=i):ir(n,t,e);break;default:ir(n,t,e)}}function Vv(n){var t=n.updateQueue;if(t!==null){n.updateQueue=null;var e=n.stateNode;e===null&&(e=n.stateNode=new V2),t.forEach(function(i){var s=tC.bind(null,n,i);e.has(i)||(e.add(i),i.then(s,s))})}}function oi(n,t){var e=t.deletions;if(e!==null)for(var i=0;i<e.length;i++){var s=e[i];try{var r=n,o=t,l=o;t:for(;l!==null;){switch(l.tag){case 5:_e=l.stateNode,xi=!1;break t;case 3:_e=l.stateNode.containerInfo,xi=!0;break t;case 4:_e=l.stateNode.containerInfo,xi=!0;break t}l=l.return}if(_e===null)throw Error(I(160));Ob(r,o,s),_e=null,xi=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ut(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Fb(t,n),t=t.sibling}function Fb(n,t){var e=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(oi(t,n),Mi(n),i&4){try{Fu(3,n,n.return),Sg(3,n)}catch(m){Ut(n,n.return,m)}try{Fu(5,n,n.return)}catch(m){Ut(n,n.return,m)}}break;case 1:oi(t,n),Mi(n),i&512&&e!==null&&pl(e,e.return);break;case 5:if(oi(t,n),Mi(n),i&512&&e!==null&&pl(e,e.return),n.flags&32){var s=n.stateNode;try{Hu(s,"")}catch(m){Ut(n,n.return,m)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,o=e!==null?e.memoizedProps:r,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&r.type==="radio"&&r.name!=null&&rA(s,r),Nm(l,o);var u=Nm(l,r);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?uA(s,d):h==="dangerouslySetInnerHTML"?lA(s,d):h==="children"?Hu(s,d):Oy(s,h,d,u)}switch(l){case"input":Pm(s,r);break;case"textarea":oA(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?wl(s,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?wl(s,!!r.multiple,r.defaultValue,!0):wl(s,!!r.multiple,r.multiple?[]:"",!1))}s[Qu]=r}catch(m){Ut(n,n.return,m)}}break;case 6:if(oi(t,n),Mi(n),i&4){if(n.stateNode===null)throw Error(I(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(m){Ut(n,n.return,m)}}break;case 3:if(oi(t,n),Mi(n),i&4&&e!==null&&e.memoizedState.isDehydrated)try{Wu(t.containerInfo)}catch(m){Ut(n,n.return,m)}break;case 4:oi(t,n),Mi(n);break;case 13:oi(t,n),Mi(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(g1=Yt())),i&4&&Vv(n);break;case 22:if(h=e!==null&&e.memoizedState!==null,n.mode&1?($e=(u=$e)||h,oi(t,n),$e=u):oi(t,n),Mi(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(H=n,h=n.child;h!==null;){for(d=H=h;H!==null;){switch(f=H,p=f.child,f.tag){case 0:case 11:case 14:case 15:Fu(4,f,f.return);break;case 1:pl(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){i=f,e=f.return;try{t=i,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(m){Ut(i,e,m)}}break;case 5:pl(f,f.return);break;case 22:if(f.memoizedState!==null){Wv(d);continue}}p!==null?(p.return=f,H=p):Wv(d)}h=h.sibling}t:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=cA("display",o))}catch(m){Ut(n,n.return,m)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Ut(n,n.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break t;for(;d.sibling===null;){if(d.return===null||d.return===n)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:oi(t,n),Mi(n),i&4&&Vv(n);break;case 21:break;default:oi(t,n),Mi(n)}}function Mi(n){var t=n.flags;if(t&2){try{t:{for(var e=n.return;e!==null;){if(Db(e)){var i=e;break t}e=e.return}throw Error(I(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Hu(s,""),i.flags&=-33);var r=Uv(n);u0(n,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,l=Uv(n);c0(n,l,o);break;default:throw Error(I(161))}}catch(c){Ut(n,n.return,c)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function W2(n,t,e){H=n,jb(n)}function jb(n,t,e){for(var i=(n.mode&1)!==0;H!==null;){var s=H,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||mf;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||$e;l=mf;var u=$e;if(mf=o,($e=c)&&!u)for(H=s;H!==null;)o=H,c=o.child,o.tag===22&&o.memoizedState!==null?Xv(s):c!==null?(c.return=o,H=c):Xv(s);for(;r!==null;)H=r,jb(r),r=r.sibling;H=s,mf=l,$e=u}Gv(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,H=r):Gv(n)}}function Gv(n){for(;H!==null;){var t=H;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:$e||Sg(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!$e)if(e===null)i.componentDidMount();else{var s=t.elementType===t.type?e.memoizedProps:li(t.type,e.memoizedProps);i.componentDidUpdate(s,e.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&Pv(t,r,i);break;case 3:var o=t.updateQueue;if(o!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}Pv(t,o,e)}break;case 5:var l=t.stateNode;if(e===null&&t.flags&4){e=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&e.focus();break;case"img":c.src&&(e.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Wu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}$e||t.flags&512&&l0(t)}catch(f){Ut(t,t.return,f)}}if(t===n){H=null;break}if(e=t.sibling,e!==null){e.return=t.return,H=e;break}H=t.return}}function Wv(n){for(;H!==null;){var t=H;if(t===n){H=null;break}var e=t.sibling;if(e!==null){e.return=t.return,H=e;break}H=t.return}}function Xv(n){for(;H!==null;){var t=H;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{Sg(4,t)}catch(c){Ut(t,e,c)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var s=t.return;try{i.componentDidMount()}catch(c){Ut(t,s,c)}}var r=t.return;try{l0(t)}catch(c){Ut(t,r,c)}break;case 5:var o=t.return;try{l0(t)}catch(c){Ut(t,o,c)}}}catch(c){Ut(t,t.return,c)}if(t===n){H=null;break}var l=t.sibling;if(l!==null){l.return=t.return,H=l;break}H=t.return}}var X2=Math.ceil,Np=er.ReactCurrentDispatcher,f1=er.ReactCurrentOwner,ti=er.ReactCurrentBatchConfig,ct=0,ye=null,Jt=null,Pe=0,Ln=0,gl=uo(0),ae=0,ih=null,za=0,Eg=0,p1=0,ju=null,hn=null,g1=0,Bc=1/0,us=null,Dp=!1,h0=null,Jr=null,yf=!1,Xr=null,Op=0,zu=0,d0=null,Of=-1,Ff=0;function tn(){return ct&6?Yt():Of!==-1?Of:Of=Yt()}function to(n){return n.mode&1?ct&2&&Pe!==0?Pe&-Pe:R2.transition!==null?(Ff===0&&(Ff=xA()),Ff):(n=yt,n!==0||(n=window.event,n=n===void 0?16:PA(n.type)),n):1}function Ci(n,t,e,i){if(50<zu)throw zu=0,d0=null,Error(I(185));zd(n,e,i),(!(ct&2)||n!==ye)&&(n===ye&&(!(ct&2)&&(Eg|=e),ae===4&&lr(n,Pe)),gn(n,i),e===1&&ct===0&&!(t.mode&1)&&(Bc=Yt()+500,Ag&&ho()))}function gn(n,t){var e=n.callbackNode;R_(n,t);var i=wp(n,n===ye?Pe:0);if(i===0)e!==null&&nv(e),n.callbackNode=null,n.callbackPriority=0;else if(t=i&-i,n.callbackPriority!==t){if(e!=null&&nv(e),t===1)n.tag===0?P2(Kv.bind(null,n)):KA(Kv.bind(null,n)),_2(function(){!(ct&6)&&ho()}),e=null;else{switch(SA(i)){case 1:e=By;break;case 4:e=AA;break;case 16:e=vp;break;case 536870912:e=bA;break;default:e=vp}e=Wb(e,zb.bind(null,n))}n.callbackPriority=t,n.callbackNode=e}}function zb(n,t){if(Of=-1,Ff=0,ct&6)throw Error(I(327));var e=n.callbackNode;if(El()&&n.callbackNode!==e)return null;var i=wp(n,n===ye?Pe:0);if(i===0)return null;if(i&30||i&n.expiredLanes||t)t=Fp(n,i);else{t=i;var s=ct;ct|=2;var r=Bb();(ye!==n||Pe!==t)&&(us=null,Bc=Yt()+500,Na(n,t));do try{Y2();break}catch(l){$b(n,l)}while(!0);t1(),Np.current=r,ct=s,Jt!==null?t=0:(ye=null,Pe=0,t=ae)}if(t!==0){if(t===2&&(s=zm(n),s!==0&&(i=s,t=f0(n,s))),t===1)throw e=ih,Na(n,0),lr(n,i),gn(n,Yt()),e;if(t===6)lr(n,i);else{if(s=n.current.alternate,!(i&30)&&!K2(s)&&(t=Fp(n,i),t===2&&(r=zm(n),r!==0&&(i=r,t=f0(n,r))),t===1))throw e=ih,Na(n,0),lr(n,i),gn(n,Yt()),e;switch(n.finishedWork=s,n.finishedLanes=i,t){case 0:case 1:throw Error(I(345));case 2:yo(n,hn,us);break;case 3:if(lr(n,i),(i&130023424)===i&&(t=g1+500-Yt(),10<t)){if(wp(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){tn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=Xm(yo.bind(null,n,hn,us),t);break}yo(n,hn,us);break;case 4:if(lr(n,i),(i&4194240)===i)break;for(t=n.eventTimes,s=-1;0<i;){var o=31-_i(i);r=1<<o,o=t[o],o>s&&(s=o),i&=~r}if(i=s,i=Yt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*X2(i/1960))-i,10<i){n.timeoutHandle=Xm(yo.bind(null,n,hn,us),i);break}yo(n,hn,us);break;case 5:yo(n,hn,us);break;default:throw Error(I(329))}}}return gn(n,Yt()),n.callbackNode===e?zb.bind(null,n):null}function f0(n,t){var e=ju;return n.current.memoizedState.isDehydrated&&(Na(n,t).flags|=256),n=Fp(n,t),n!==2&&(t=hn,hn=e,t!==null&&p0(t)),n}function p0(n){hn===null?hn=n:hn.push.apply(hn,n)}function K2(n){for(var t=n;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var i=0;i<e.length;i++){var s=e[i],r=s.getSnapshot;s=s.value;try{if(!ki(r(),s))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function lr(n,t){for(t&=~p1,t&=~Eg,n.suspendedLanes|=t,n.pingedLanes&=~t,n=n.expirationTimes;0<t;){var e=31-_i(t),i=1<<e;n[e]=-1,t&=~i}}function Kv(n){if(ct&6)throw Error(I(327));El();var t=wp(n,0);if(!(t&1))return gn(n,Yt()),null;var e=Fp(n,t);if(n.tag!==0&&e===2){var i=zm(n);i!==0&&(t=i,e=f0(n,i))}if(e===1)throw e=ih,Na(n,0),lr(n,t),gn(n,Yt()),e;if(e===6)throw Error(I(345));return n.finishedWork=n.current.alternate,n.finishedLanes=t,yo(n,hn,us),gn(n,Yt()),null}function m1(n,t){var e=ct;ct|=1;try{return n(t)}finally{ct=e,ct===0&&(Bc=Yt()+500,Ag&&ho())}}function $a(n){Xr!==null&&Xr.tag===0&&!(ct&6)&&El();var t=ct;ct|=1;var e=ti.transition,i=yt;try{if(ti.transition=null,yt=1,n)return n()}finally{yt=i,ti.transition=e,ct=t,!(ct&6)&&ho()}}function y1(){Ln=gl.current,Pt(gl)}function Na(n,t){n.finishedWork=null,n.finishedLanes=0;var e=n.timeoutHandle;if(e!==-1&&(n.timeoutHandle=-1,E2(e)),Jt!==null)for(e=Jt.return;e!==null;){var i=e;switch(Qy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ep();break;case 3:zc(),Pt(fn),Pt(Ue),o1();break;case 5:r1(i);break;case 4:zc();break;case 13:Pt(jt);break;case 19:Pt(jt);break;case 10:e1(i.type._context);break;case 22:case 23:y1()}e=e.return}if(ye=n,Jt=n=eo(n.current,null),Pe=Ln=t,ae=0,ih=null,p1=Eg=za=0,hn=ju=null,_o!==null){for(t=0;t<_o.length;t++)if(e=_o[t],i=e.interleaved,i!==null){e.interleaved=null;var s=i.next,r=e.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}e.pending=i}_o=null}return n}function $b(n,t){do{var e=Jt;try{if(t1(),If.current=Ip,Mp){for(var i=zt.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Mp=!1}if(ja=0,me=oe=zt=null,Ou=!1,th=0,f1.current=null,e===null||e.return===null){ae=1,ih=t,Jt=null;break}t:{var r=n,o=e.return,l=e,c=t;if(t=Pe,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Dv(o);if(p!==null){p.flags&=-257,Ov(p,o,l,r,t),p.mode&1&&Nv(r,u,t),t=p,c=u;var y=t.updateQueue;if(y===null){var m=new Set;m.add(c),t.updateQueue=m}else y.add(c);break t}else{if(!(t&1)){Nv(r,u,t),v1();break t}c=Error(I(426))}}else if(Nt&&l.mode&1){var S=Dv(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Ov(S,o,l,r,t),Zy($c(c,l));break t}}r=c=$c(c,l),ae!==4&&(ae=2),ju===null?ju=[r]:ju.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var v=Sb(r,c,t);Tv(r,v);break t;case 1:l=c;var w=r.type,x=r.stateNode;if(!(r.flags&128)&&(typeof w.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Jr===null||!Jr.has(x)))){r.flags|=65536,t&=-t,r.lanes|=t;var E=Eb(r,l,t);Tv(r,E);break t}}r=r.return}while(r!==null)}Ub(e)}catch(_){t=_,Jt===e&&e!==null&&(Jt=e=e.return);continue}break}while(!0)}function Bb(){var n=Np.current;return Np.current=Ip,n===null?Ip:n}function v1(){(ae===0||ae===3||ae===2)&&(ae=4),ye===null||!(za&268435455)&&!(Eg&268435455)||lr(ye,Pe)}function Fp(n,t){var e=ct;ct|=2;var i=Bb();(ye!==n||Pe!==t)&&(us=null,Na(n,t));do try{q2();break}catch(s){$b(n,s)}while(!0);if(t1(),ct=e,Np.current=i,Jt!==null)throw Error(I(261));return ye=null,Pe=0,ae}function q2(){for(;Jt!==null;)Hb(Jt)}function Y2(){for(;Jt!==null&&!b_();)Hb(Jt)}function Hb(n){var t=Gb(n.alternate,n,Ln);n.memoizedProps=n.pendingProps,t===null?Ub(n):Jt=t,f1.current=null}function Ub(n){var t=n;do{var e=t.alternate;if(n=t.return,t.flags&32768){if(e=U2(e,t),e!==null){e.flags&=32767,Jt=e;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ae=6,Jt=null;return}}else if(e=H2(e,t,Ln),e!==null){Jt=e;return}if(t=t.sibling,t!==null){Jt=t;return}Jt=t=n}while(t!==null);ae===0&&(ae=5)}function yo(n,t,e){var i=yt,s=ti.transition;try{ti.transition=null,yt=1,Q2(n,t,e,i)}finally{ti.transition=s,yt=i}return null}function Q2(n,t,e,i){do El();while(Xr!==null);if(ct&6)throw Error(I(327));e=n.finishedWork;var s=n.finishedLanes;if(e===null)return null;if(n.finishedWork=null,n.finishedLanes=0,e===n.current)throw Error(I(177));n.callbackNode=null,n.callbackPriority=0;var r=e.lanes|e.childLanes;if(L_(n,r),n===ye&&(Jt=ye=null,Pe=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||yf||(yf=!0,Wb(vp,function(){return El(),null})),r=(e.flags&15990)!==0,e.subtreeFlags&15990||r){r=ti.transition,ti.transition=null;var o=yt;yt=1;var l=ct;ct|=4,f1.current=null,G2(n,e),Fb(e,n),y2(Gm),Ap=!!Vm,Gm=Vm=null,n.current=e,W2(e),x_(),ct=l,yt=o,ti.transition=r}else n.current=e;if(yf&&(yf=!1,Xr=n,Op=s),r=n.pendingLanes,r===0&&(Jr=null),__(e.stateNode),gn(n,Yt()),t!==null)for(i=n.onRecoverableError,e=0;e<t.length;e++)s=t[e],i(s.value,{componentStack:s.stack,digest:s.digest});if(Dp)throw Dp=!1,n=h0,h0=null,n;return Op&1&&n.tag!==0&&El(),r=n.pendingLanes,r&1?n===d0?zu++:(zu=0,d0=n):zu=0,ho(),null}function El(){if(Xr!==null){var n=SA(Op),t=ti.transition,e=yt;try{if(ti.transition=null,yt=16>n?16:n,Xr===null)var i=!1;else{if(n=Xr,Xr=null,Op=0,ct&6)throw Error(I(331));var s=ct;for(ct|=4,H=n.current;H!==null;){var r=H,o=r.child;if(H.flags&16){var l=r.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(H=u;H!==null;){var h=H;switch(h.tag){case 0:case 11:case 15:Fu(8,h,r)}var d=h.child;if(d!==null)d.return=h,H=d;else for(;H!==null;){h=H;var f=h.sibling,p=h.return;if(Nb(h),h===u){H=null;break}if(f!==null){f.return=p,H=f;break}H=p}}}var y=r.alternate;if(y!==null){var m=y.child;if(m!==null){y.child=null;do{var S=m.sibling;m.sibling=null,m=S}while(m!==null)}}H=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,H=o;else t:for(;H!==null;){if(r=H,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Fu(9,r,r.return)}var v=r.sibling;if(v!==null){v.return=r.return,H=v;break t}H=r.return}}var w=n.current;for(H=w;H!==null;){o=H;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,H=x;else t:for(o=w;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Sg(9,l)}}catch(_){Ut(l,l.return,_)}if(l===o){H=null;break t}var E=l.sibling;if(E!==null){E.return=l.return,H=E;break t}H=l.return}}if(ct=s,ho(),ns&&typeof ns.onPostCommitFiberRoot=="function")try{ns.onPostCommitFiberRoot(gg,n)}catch{}i=!0}return i}finally{yt=e,ti.transition=t}}return!1}function qv(n,t,e){t=$c(e,t),t=Sb(n,t,1),n=Zr(n,t,1),t=tn(),n!==null&&(zd(n,1,t),gn(n,t))}function Ut(n,t,e){if(n.tag===3)qv(n,n,e);else for(;t!==null;){if(t.tag===3){qv(t,n,e);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Jr===null||!Jr.has(i))){n=$c(e,n),n=Eb(t,n,1),t=Zr(t,n,1),n=tn(),t!==null&&(zd(t,1,n),gn(t,n));break}}t=t.return}}function Z2(n,t,e){var i=n.pingCache;i!==null&&i.delete(t),t=tn(),n.pingedLanes|=n.suspendedLanes&e,ye===n&&(Pe&e)===e&&(ae===4||ae===3&&(Pe&130023424)===Pe&&500>Yt()-g1?Na(n,0):p1|=e),gn(n,t)}function Vb(n,t){t===0&&(n.mode&1?(t=af,af<<=1,!(af&130023424)&&(af=4194304)):t=1);var e=tn();n=Ys(n,t),n!==null&&(zd(n,t,e),gn(n,e))}function J2(n){var t=n.memoizedState,e=0;t!==null&&(e=t.retryLane),Vb(n,e)}function tC(n,t){var e=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(e=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(I(314))}i!==null&&i.delete(t),Vb(n,e)}var Gb;Gb=function(n,t,e){if(n!==null)if(n.memoizedProps!==t.pendingProps||fn.current)dn=!0;else{if(!(n.lanes&e)&&!(t.flags&128))return dn=!1,B2(n,t,e);dn=!!(n.flags&131072)}else dn=!1,Nt&&t.flags&1048576&&qA(t,kp,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Df(n,t),n=t.pendingProps;var s=Oc(t,Ue.current);Sl(t,e),s=l1(null,t,i,n,s,e);var r=c1();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pn(i)?(r=!0,_p(t)):r=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,i1(t),s.updater=xg,t.stateNode=s,s._reactInternals=t,t0(t,i,n,e),t=i0(null,t,i,!0,r,e)):(t.tag=0,Nt&&r&&Yy(t),Ze(null,t,s,e),t=t.child),t;case 16:i=t.elementType;t:{switch(Df(n,t),n=t.pendingProps,s=i._init,i=s(i._payload),t.type=i,s=t.tag=nC(i),n=li(i,n),s){case 0:t=n0(null,t,i,n,e);break t;case 1:t=zv(null,t,i,n,e);break t;case 11:t=Fv(null,t,i,n,e);break t;case 14:t=jv(null,t,i,li(i.type,n),e);break t}throw Error(I(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:li(i,s),n0(n,t,i,s,e);case 1:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:li(i,s),zv(n,t,i,s,e);case 3:t:{if(Tb(t),n===null)throw Error(I(387));i=t.pendingProps,r=t.memoizedState,s=r.element,eb(n,t),Rp(t,i,null,e);var o=t.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){s=$c(Error(I(423)),t),t=$v(n,t,i,e,s);break t}else if(i!==s){s=$c(Error(I(424)),t),t=$v(n,t,i,e,s);break t}else for(Nn=Qr(t.stateNode.containerInfo.firstChild),Dn=t,Nt=!0,Si=null,e=JA(t,null,i,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(Fc(),i===s){t=Qs(n,t,e);break t}Ze(n,t,i,e)}t=t.child}return t;case 5:return nb(t),n===null&&Qm(t),i=t.type,s=t.pendingProps,r=n!==null?n.memoizedProps:null,o=s.children,Wm(i,s)?o=null:r!==null&&Wm(i,r)&&(t.flags|=32),kb(n,t),Ze(n,t,o,e),t.child;case 6:return n===null&&Qm(t),null;case 13:return Pb(n,t,e);case 4:return s1(t,t.stateNode.containerInfo),i=t.pendingProps,n===null?t.child=jc(t,null,i,e):Ze(n,t,i,e),t.child;case 11:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:li(i,s),Fv(n,t,i,s,e);case 7:return Ze(n,t,t.pendingProps,e),t.child;case 8:return Ze(n,t,t.pendingProps.children,e),t.child;case 12:return Ze(n,t,t.pendingProps.children,e),t.child;case 10:t:{if(i=t.type._context,s=t.pendingProps,r=t.memoizedProps,o=s.value,_t(Tp,i._currentValue),i._currentValue=o,r!==null)if(ki(r.value,o)){if(r.children===s.children&&!fn.current){t=Qs(n,t,e);break t}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var l=r.dependencies;if(l!==null){o=r.child;for(var c=l.firstContext;c!==null;){if(c.context===i){if(r.tag===1){c=Gs(-1,e&-e),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=e,c=r.alternate,c!==null&&(c.lanes|=e),Zm(r.return,e,t),l.lanes|=e;break}c=c.next}}else if(r.tag===10)o=r.type===t.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(I(341));o.lanes|=e,l=o.alternate,l!==null&&(l.lanes|=e),Zm(o,e,t),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Ze(n,t,s.children,e),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,Sl(t,e),s=ni(s),i=i(s),t.flags|=1,Ze(n,t,i,e),t.child;case 14:return i=t.type,s=li(i,t.pendingProps),s=li(i.type,s),jv(n,t,i,s,e);case 15:return _b(n,t,t.type,t.pendingProps,e);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:li(i,s),Df(n,t),t.tag=1,pn(i)?(n=!0,_p(t)):n=!1,Sl(t,e),xb(t,i,s),t0(t,i,s,e),i0(null,t,i,!0,n,e);case 19:return Rb(n,t,e);case 22:return Cb(n,t,e)}throw Error(I(156,t.tag))};function Wb(n,t){return wA(n,t)}function eC(n,t,e,i){this.tag=n,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(n,t,e,i){return new eC(n,t,e,i)}function w1(n){return n=n.prototype,!(!n||!n.isReactComponent)}function nC(n){if(typeof n=="function")return w1(n)?1:0;if(n!=null){if(n=n.$$typeof,n===jy)return 11;if(n===zy)return 14}return 2}function eo(n,t){var e=n.alternate;return e===null?(e=Jn(n.tag,t,n.key,n.mode),e.elementType=n.elementType,e.type=n.type,e.stateNode=n.stateNode,e.alternate=n,n.alternate=e):(e.pendingProps=t,e.type=n.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=n.flags&14680064,e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=n.sibling,e.index=n.index,e.ref=n.ref,e}function jf(n,t,e,i,s,r){var o=2;if(i=n,typeof n=="function")w1(n)&&(o=1);else if(typeof n=="string")o=5;else t:switch(n){case rl:return Da(e.children,s,r,t);case Fy:o=8,s|=8;break;case Em:return n=Jn(12,e,t,s|2),n.elementType=Em,n.lanes=r,n;case _m:return n=Jn(13,e,t,s),n.elementType=_m,n.lanes=r,n;case Cm:return n=Jn(19,e,t,s),n.elementType=Cm,n.lanes=r,n;case nA:return _g(e,s,r,t);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case tA:o=10;break t;case eA:o=9;break t;case jy:o=11;break t;case zy:o=14;break t;case rr:o=16,i=null;break t}throw Error(I(130,n==null?n:typeof n,""))}return t=Jn(o,e,t,s),t.elementType=n,t.type=i,t.lanes=r,t}function Da(n,t,e,i){return n=Jn(7,n,i,t),n.lanes=e,n}function _g(n,t,e,i){return n=Jn(22,n,i,t),n.elementType=nA,n.lanes=e,n.stateNode={isHidden:!1},n}function fm(n,t,e){return n=Jn(6,n,null,t),n.lanes=e,n}function pm(n,t,e){return t=Jn(4,n.children!==null?n.children:[],n.key,t),t.lanes=e,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}function iC(n,t,e,i,s){this.tag=t,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kg(0),this.expirationTimes=Kg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kg(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function A1(n,t,e,i,s,r,o,l,c){return n=new iC(n,t,e,l,c),t===1?(t=1,r===!0&&(t|=8)):t=0,r=Jn(3,null,null,t),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},i1(r),n}function sC(n,t,e){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sl,key:i==null?null:""+i,children:n,containerInfo:t,implementation:e}}function Xb(n){if(!n)return io;n=n._reactInternals;t:{if(Va(n)!==n||n.tag!==1)throw Error(I(170));var t=n;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(pn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(I(171))}if(n.tag===1){var e=n.type;if(pn(e))return XA(n,e,t)}return t}function Kb(n,t,e,i,s,r,o,l,c){return n=A1(e,i,!0,n,s,r,o,l,c),n.context=Xb(null),e=n.current,i=tn(),s=to(e),r=Gs(i,s),r.callback=t??null,Zr(e,r,s),n.current.lanes=s,zd(n,s,i),gn(n,i),n}function Cg(n,t,e,i){var s=t.current,r=tn(),o=to(s);return e=Xb(e),t.context===null?t.context=e:t.pendingContext=e,t=Gs(r,o),t.payload={element:n},i=i===void 0?null:i,i!==null&&(t.callback=i),n=Zr(s,t,o),n!==null&&(Ci(n,s,o,r),Mf(n,s,o)),o}function jp(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Yv(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var e=n.retryLane;n.retryLane=e!==0&&e<t?e:t}}function b1(n,t){Yv(n,t),(n=n.alternate)&&Yv(n,t)}function rC(){return null}var qb=typeof reportError=="function"?reportError:function(n){console.error(n)};function x1(n){this._internalRoot=n}kg.prototype.render=x1.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(I(409));Cg(n,t,null,null)};kg.prototype.unmount=x1.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;$a(function(){Cg(null,n,null,null)}),t[qs]=null}};function kg(n){this._internalRoot=n}kg.prototype.unstable_scheduleHydration=function(n){if(n){var t=CA();n={blockedOn:null,target:n,priority:t};for(var e=0;e<ar.length&&t!==0&&t<ar[e].priority;e++);ar.splice(e,0,n),e===0&&TA(n)}};function S1(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Tg(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Qv(){}function oC(n,t,e,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var u=jp(o);r.call(u)}}var o=Kb(t,i,n,0,null,!1,!1,"",Qv);return n._reactRootContainer=o,n[qs]=o.current,qu(n.nodeType===8?n.parentNode:n),$a(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var u=jp(c);l.call(u)}}var c=A1(n,0,!1,null,null,!1,!1,"",Qv);return n._reactRootContainer=c,n[qs]=c.current,qu(n.nodeType===8?n.parentNode:n),$a(function(){Cg(t,c,e,i)}),c}function Pg(n,t,e,i,s){var r=e._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var l=s;s=function(){var c=jp(o);l.call(c)}}Cg(t,o,n,s)}else o=oC(e,t,n,s,i);return jp(o)}EA=function(n){switch(n.tag){case 3:var t=n.stateNode;if(t.current.memoizedState.isDehydrated){var e=uu(t.pendingLanes);e!==0&&(Hy(t,e|1),gn(t,Yt()),!(ct&6)&&(Bc=Yt()+500,ho()))}break;case 13:$a(function(){var i=Ys(n,1);if(i!==null){var s=tn();Ci(i,n,1,s)}}),b1(n,1)}};Uy=function(n){if(n.tag===13){var t=Ys(n,134217728);if(t!==null){var e=tn();Ci(t,n,134217728,e)}b1(n,134217728)}};_A=function(n){if(n.tag===13){var t=to(n),e=Ys(n,t);if(e!==null){var i=tn();Ci(e,n,t,i)}b1(n,t)}};CA=function(){return yt};kA=function(n,t){var e=yt;try{return yt=n,t()}finally{yt=e}};Om=function(n,t,e){switch(t){case"input":if(Pm(n,e),t=e.name,e.type==="radio"&&t!=null){for(e=n;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var i=e[t];if(i!==n&&i.form===n.form){var s=wg(i);if(!s)throw Error(I(90));sA(i),Pm(i,s)}}}break;case"textarea":oA(n,e);break;case"select":t=e.value,t!=null&&wl(n,!!e.multiple,t,!1)}};fA=m1;pA=$a;var aC={usingClientEntryPoint:!1,Events:[Bd,cl,wg,hA,dA,m1]},nu={findFiberByHostInstance:Eo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lC={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:er.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=yA(n),n===null?null:n.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||rC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vf.isDisabled&&vf.supportsFiber)try{gg=vf.inject(lC),ns=vf}catch{}}jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aC;jn.createPortal=function(n,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S1(t))throw Error(I(200));return sC(n,t,null,e)};jn.createRoot=function(n,t){if(!S1(n))throw Error(I(299));var e=!1,i="",s=qb;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=A1(n,1,!1,null,null,e,!1,i,s),n[qs]=t.current,qu(n.nodeType===8?n.parentNode:n),new x1(t)};jn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(I(188)):(n=Object.keys(n).join(","),Error(I(268,n)));return n=yA(t),n=n===null?null:n.stateNode,n};jn.flushSync=function(n){return $a(n)};jn.hydrate=function(n,t,e){if(!Tg(t))throw Error(I(200));return Pg(null,n,t,!0,e)};jn.hydrateRoot=function(n,t,e){if(!S1(n))throw Error(I(405));var i=e!=null&&e.hydratedSources||null,s=!1,r="",o=qb;if(e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),t=Kb(t,null,n,1,e??null,s,!1,r,o),n[qs]=t.current,qu(n),i)for(n=0;n<i.length;n++)e=i[n],s=e._getVersion,s=s(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,s]:t.mutableSourceEagerHydrationData.push(e,s);return new kg(t)};jn.render=function(n,t,e){if(!Tg(t))throw Error(I(200));return Pg(null,n,t,!1,e)};jn.unmountComponentAtNode=function(n){if(!Tg(n))throw Error(I(40));return n._reactRootContainer?($a(function(){Pg(null,null,n,!1,function(){n._reactRootContainer=null,n[qs]=null})}),!0):!1};jn.unstable_batchedUpdates=m1;jn.unstable_renderSubtreeIntoContainer=function(n,t,e,i){if(!Tg(e))throw Error(I(200));if(n==null||n._reactInternals===void 0)throw Error(I(38));return Pg(n,t,e,!1,i)};jn.version="18.3.1-next-f1338f8080-20240426";function Yb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yb)}catch(n){console.error(n)}}Yb(),Yw.exports=jn;var cC=Yw.exports,Qb,Zv=cC;Qb=Zv.createRoot,Zv.hydrateRoot;const Zb=D.createContext(void 0),ri=()=>{const n=D.useContext(Zb);if(!n)throw new Error("useTheme must be used within a ThemeProvider");return n},uC=({children:n})=>{const[t,e]=D.useState(()=>localStorage.getItem("portfolio-theme")||"dark");return D.useEffect(()=>{localStorage.setItem("portfolio-theme",t)},[t]),C.jsx(Zb.Provider,{value:{theme:t,setTheme:e},children:n})},hC={ru:{nav:{home:"Главная",about:"О себе",skills:"Навыки",projects:"Проекты",resume:"Резюме",contact:"Контакты"},hero:{greeting:"Привет, я Данис Хасанов",name:"React Developer",status:"В поиске работы",description:`Создаю современные веб-приложения с опытом более 2 лет.
Специализируюсь на React/TypeScript и современных библиотеках.`,contactMe:"Связаться"},about:{title:"О себе",description:`Готов к сложным задачам, быстро вливаюсь в проекты, изучаю новые фреймворки и библиотеки.
Умею эффективно общаться с коллегами и участвовать в обсуждении технических решений.
Закончил School21 по программированию (Сбербанк)`,experience:"Опыт работы",projects:"Проектов",clients:"Клиентов"},skills:{title:"Навыки",frontend:"Frontend",backend:"Backend",tools:"Инструменты",mobile:"Мобильная разработка"},projects:{title:"Мои проекты",viewCode:"Посмотреть код",viewLive:"Демо",happyFox:{title:"Happy Fox",description:"Мобильная игра-приложение, где игроки управляют лисой в игровом процессе с механикой падения яиц, системой бустеров и внутриигровой экономикой. Проект включает полноценную игровую экосистему с магазином, системой друзей, розыгрышами, достижениями и профилем пользователя."},koorator:{title:"Koorator",description:"Мобильное приложение для пациентов, которое позволяет записываться на прием к врачам, просматривать планы лечения, историю посещений и управлять своим профилем. Приложение интегрировано с Telegram и предоставляет полный цикл взаимодействия пациента с клиникой от записи до отслеживания лечения."},agrotat:{title:"Agrotat",description:"Agrotat — это система мониторинга и управления транспортными средствами для сельскохозяйственных предприятий. Приложение позволяет отслеживать местоположение и состояние транспорта в реальном времени, управлять поездками, анализировать данные о пробеге и топливе."},barberLink:{title:"BarberLink",description:"Современная система для демо онлайн-записи в барбершопы с удобным интерфейсом и полным функционалом управления записями."},onlineShop:{title:"Online shop",description:"Современный демо-интернет-магазин с адаптивным дизайном и полным циклом покупки."},cdekOrderPro:{title:"Cdek OrderPRO",description:"Интеграция с сервисом доставки СДЭК, позволяющая автоматически рассчитывать стоимость доставки, создавать и скачивать накладные."},priceList:{title:"Price List",description:"Веб-приложение для управления и отображения прайс-листов. Основная цель проекта — упростить процесс создания, обновления и публикации прайс-листов в формате PDF для различных товаров и услуг."},customerOrders:{title:"Customer Orders",description:"Веб-приложение, предназначенное для управления заказами клиентов, с функцией автозаполнения для повышения удобства пользователей."}},resume:{title:"Резюме",description:"Ознакомьтесь с моим резюме или скачайте его для детального изучения",download:"Скачать резюме",showPreview:"Показать резюме",hidePreview:"Скрыть резюме",previewTitle:"Предварительный просмотр",previewText:"Здесь будет отображаться ваше резюме. Вы можете добавить PDF файл или встроить его просмотр."},contact:{title:"Связаться со мной",description:"Вы всегда можете связаться со мной, я отвечу на ваше сообщение как можно скорее",email:"Email",phone:"Телефон",location:"Местоположение"}},en:{nav:{home:"Home",about:"About",skills:"Skills",projects:"Projects",resume:"Resume",contact:"Contact"},hero:{greeting:"Hi, I'm Danis Khasanov",name:"React Developer",status:"Open to Work",description:`Building modern web applications with 2+ years of experience.
Specializing in React, TypeScript, and cutting-edge technologies.`,contactMe:"Contact Me"},about:{title:"About Me",description:`Ready for complex tasks, quickly integrate into projects, study new frameworks and libraries.
I can effectively communicate with colleagues and participate in technical discussions.
Graduated from School21 programming (Sberbank)`,experience:"Years Experience",projects:"Projects",clients:"Happy Clients"},skills:{title:"Skills",frontend:"Frontend",backend:"Backend",tools:"Tools",mobile:"Mobile Development"},projects:{title:"My Projects",viewCode:"View Code",viewLive:"Live Demo",happyFox:{title:"Happy Fox",description:"Mobile game application where players control a fox in gameplay with egg-dropping mechanics, booster system, and in-game economy. The project includes a complete gaming ecosystem with store, friends system, giveaways, achievements, and user profile."},koorator:{title:"Koorator",description:"Mobile application for patients that allows booking doctor appointments, viewing treatment plans, appointment history, and managing user profile. The app is integrated with Telegram and provides a complete patient-clinic interaction cycle from booking to treatment tracking."},agrotat:{title:"Agrotat",description:"Agrotat is a monitoring and management system for agricultural enterprises' vehicles. The application allows real-time tracking of vehicle location and status, trip management, and analysis of mileage and fuel data."},barberLink:{title:"BarberLink",description:"Modern system for demo online barbershop booking with user-friendly interface and complete appointment management functionality."},onlineShop:{title:"Online shop",description:"Modern demo online store with responsive design and complete purchase cycle."},cdekOrderPro:{title:"Cdek OrderPRO",description:"Integration with CDEK delivery service, allowing automatic delivery cost calculation, creating and downloading shipping labels."},priceList:{title:"Price List",description:"Web application for managing and displaying price lists. The main goal of the project is to simplify the process of creating, updating, and publishing price lists in PDF format for various goods and services."},customerOrders:{title:"Customer Orders",description:"Web application designed for managing customer orders, with autofill functionality to enhance user convenience."}},resume:{title:"Resume",description:"Check out my resume or download it for detailed review",download:"Download Resume",showPreview:"Show Resume",hidePreview:"Hide Resume",previewTitle:"Preview",previewText:"Your resume will be displayed here. You can add a PDF file or embed its preview."},contact:{title:"Get In Touch",description:"You can always contact me, I will respond to your message as soon as possible",email:"Email",phone:"Phone",location:"Location"}}},Jb=D.createContext(void 0),Ga=()=>{const n=D.useContext(Jb);if(!n)throw new Error("useLanguage must be used within a LanguageProvider");return n},dC=({children:n})=>{const[t,e]=D.useState(()=>localStorage.getItem("portfolio-language")||"ru");D.useEffect(()=>{localStorage.setItem("portfolio-language",t)},[t]);const i=hC[t];return C.jsx(Jb.Provider,{value:{language:t,setLanguage:e,t:i},children:n})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),we=(n,t)=>{const e=D.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:l="",children:c,...u},h)=>D.createElement("svg",{ref:h,...fC,width:s,height:s,stroke:i,strokeWidth:o?Number(r)*24/Number(s):r,className:["lucide",`lucide-${pC(n)}`,l].join(" "),...u},[...t.map(([d,f])=>D.createElement(d,f)),...Array.isArray(c)?c:[c]]));return e.displayName=`${n}`,e};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=we("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=we("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=we("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=we("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=we("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=we("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=we("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=we("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=we("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=we("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=we("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=we("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=we("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=we("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=we("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=we("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=we("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),fo=n=>n==="dark"?{primary:"from-blue-400 to-purple-500",secondary:"from-purple-400 to-pink-400",accent:"bg-blue-500",text:"text-blue-400",hover:"hover:bg-blue-600",border:"border-blue-400",ring:"ring-blue-400"}:{primary:"from-blue-600 to-purple-600",secondary:"from-purple-500 to-pink-500",accent:"bg-blue-600",text:"text-blue-600",hover:"hover:bg-blue-700",border:"border-blue-500",ring:"ring-blue-500"},bo=({children:n,variant:t="primary",size:e="md",onClick:i,className:s="",disabled:r=!1,type:o="button"})=>{const{theme:l}=ri(),c=fo(l),u="font-medium rounded-lg transition-all duration-300 transform hover:scale-105 focus:outline-none ",h={sm:"px-3 py-1.5 text-sm",md:"px-6 py-2.5 text-base",lg:"px-8 py-3 text-lg"},d={primary:`bg-gradient-to-r ${c.primary} text-white ${c.hover} shadow-lg hover:shadow-xl ${c.ring}`,secondary:`bg-gradient-to-r ${c.secondary} text-white ${c.hover} shadow-md hover:shadow-lg ${c.ring}`,outline:`border-2 ${c.border} ${c.text} hover:bg-gradient-to-r ${c.secondary} hover:text-white ${c.ring}`,ghost:`bg-transparent ${l==="dark"?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"} hover:bg-gray-500/10`},f=r?"opacity-50 cursor-not-allowed hover:scale-100":"";return C.jsx("button",{type:o,onClick:i,disabled:r,className:`${u} ${h[e]} ${d[t]} ${f} ${s}`,children:n})},TC=(n,t="-50% 0px -50% 0px")=>{const[e,i]=D.useState(""),s=D.useRef(null);return D.useEffect(()=>(s.current=new IntersectionObserver(r=>{r.forEach(o=>{o.isIntersecting&&i(o.target.id)})},{rootMargin:t}),n.forEach(r=>{var l;const o=document.getElementById(r);o&&((l=s.current)==null||l.observe(o))}),()=>{n.forEach(r=>{var l;const o=document.getElementById(r);o&&((l=s.current)==null||l.unobserve(o))})}),[n,t]),e},PC=()=>{const[n,t]=D.useState(!1),[e,i]=D.useState(!1),{language:s,setLanguage:r,t:o}=Ga(),{theme:l,setTheme:c}=ri(),u=[{href:"#home",label:o.nav.home},{href:"#about",label:o.nav.about},{href:"#skills",label:o.nav.skills},{href:"#projects",label:o.nav.projects},{href:"#resume",label:o.nav.resume},{href:"#contact",label:o.nav.contact}],h=u.map(y=>y.href.substring(1)),d=TC(h);D.useEffect(()=>{const y=()=>{i(window.scrollY>10)};return window.addEventListener("scroll",y),()=>window.removeEventListener("scroll",y)},[]);const f=y=>{const m=document.querySelector(y);m&&(m.scrollIntoView({behavior:"smooth"}),t(!1))},p=y=>`transition-colors duration-200 ${`#${d}`===y?l==="dark"?"text-white":"text-gray-900 font-bold":l==="dark"?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-900"}`;return C.jsx("header",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${n?l==="dark"?"bg-gray-900":"bg-white":e?l==="dark"?"bg-gray-900/90 backdrop-blur-md":"bg-white/90 backdrop-blur-md":"bg-transparent"} ${e||n?"shadow-lg":""}`,children:C.jsxs("nav",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[C.jsxs("div",{className:"relative flex items-center justify-center h-16",children:[C.jsx("div",{className:"hidden md:block",children:C.jsx("div",{className:"flex items-baseline space-x-4",children:u.map(y=>C.jsx("button",{onClick:()=>f(y.href),className:`px-3 py-2 rounded-md text-sm font-medium ${p(y.href)}`,children:y.label},y.href))})}),C.jsxs("div",{className:"absolute right-0 flex items-center space-x-2",children:[C.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[C.jsx(bo,{variant:"ghost",size:"sm",onClick:()=>c(l==="light"?"dark":"light"),children:l==="light"?C.jsx(Jv,{className:"w-5 h-5"}):C.jsx(tw,{className:"w-5 h-5"})}),C.jsx(bo,{variant:"ghost",size:"sm",onClick:()=>r(s==="ru"?"en":"ru"),children:C.jsx("span",{className:"font-semibold",children:s.toUpperCase()})})]}),C.jsx("div",{className:"md:hidden",children:C.jsx(bo,{variant:"ghost",size:"sm",onClick:()=>t(!n),children:C.jsx(EC,{className:"w-6 h-6"})})})]})]}),C.jsx("div",{className:`fixed inset-0 bg-black/30 z-40 md:hidden transition-opacity duration-300 ${n?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:()=>t(!1)}),C.jsx("div",{className:`fixed top-0 right-0 h-[100vh] w-3/4 max-w-xs z-50 md:hidden transition-all duration-300 ease-in-out ${l==="dark"?"bg-gray-900":"bg-white"} ${n?"translate-x-0":"translate-x-full"}`,children:C.jsxs("div",{className:"p-5 pt-8 h-full flex flex-col",children:[C.jsx("div",{className:"flex-grow flex flex-col space-y-4",children:u.map(y=>C.jsx("button",{onClick:()=>f(y.href),className:`block px-3 py-2 rounded-md text-lg font-medium w-full text-left ${p(y.href)}`,children:y.label},y.href))}),C.jsxs("div",{className:`border-t pt-4 flex justify-between items-center ${l==="dark"?"border-gray-700":"border-gray-200"}`,children:[C.jsxs(bo,{variant:"ghost",size:"sm",onClick:()=>r(s==="ru"?"en":"ru"),className:"flex items-center",children:[C.jsx(AC,{className:"w-5 h-5 mr-2"}),C.jsx("span",{className:"font-semibold",children:s.toUpperCase()})]}),C.jsx(bo,{variant:"ghost",size:"sm",onClick:()=>c(l==="light"?"dark":"light"),children:l==="light"?C.jsx(Jv,{className:"w-5 h-5"}):C.jsx(tw,{className:"w-5 h-5"})})]})]})})]})})},RC=n=>{const[t,e]=D.useState(!1),[i,s]=D.useState(!1),r=D.useRef(null);return D.useEffect(()=>{if(!r.current)return;const o=new IntersectionObserver(([l])=>{e(l.isIntersecting),l.isIntersecting&&s(!0)},n);return o.observe(r.current),()=>o.disconnect()},[n]),{ref:r,isIntersecting:t,hasIntersected:i}},Be=({children:n,animation:t="fadeInUp",delay:e=0,className:i=""})=>{const{ref:s,hasIntersected:r}=RC({threshold:.1,rootMargin:"-50px"}),o={fadeInUp:r?"translate-y-0 opacity-100":"translate-y-10 opacity-0",fadeInLeft:r?"translate-x-0 opacity-100":"-translate-x-10 opacity-0",fadeInRight:r?"translate-x-0 opacity-100":"translate-x-10 opacity-0",fadeIn:r?"opacity-100":"opacity-0",scaleIn:r?"scale-100 opacity-100":"scale-95 opacity-0"};return C.jsx("div",{ref:s,className:`transition-all duration-700 ease-out ${o[t]} ${i}`,style:{transitionDelay:`${e}ms`},children:n})},ew=({color:n,size:t,top:e,left:i,right:s,bottom:r,opacity:o="0.2",delay:l="0s",className:c})=>C.jsx("div",{className:`blur-circle absolute animate-lively-blob ${c}`,style:{backgroundColor:n,width:t,height:t,top:e,left:i,right:s,bottom:r,opacity:o,animationDelay:l},"aria-hidden":"true"}),LC="/Portfolio/assets/photo-But09G8A.jpg",MC=()=>{const{t:n}=Ga(),{theme:t}=ri(),e=fo(t),i=()=>{const s=document.querySelector("#about");s&&s.scrollIntoView({behavior:"smooth"})};return C.jsxs("section",{id:"home",className:`min-h-screen flex items-center justify-center relative overflow-hidden ${t==="dark"?"bg-gray-900":"bg-white"}`,children:[C.jsx(ew,{color:"#6D28D9",size:"400px",top:"10%",right:"-10%",opacity:"0.5"}),C.jsx(ew,{color:"#6D28D9",size:"300px",bottom:"10%",left:"-100px",opacity:"0.3",delay:"0.1s"}),C.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-12 items-center",children:[C.jsx(Be,{animation:"fadeInLeft",delay:200,className:"md:col-span-2 flex justify-center",children:C.jsx("div",{className:`relative w-64 h-64 sm:w-80 sm:h-80 rounded-full p-1 bg-gradient-to-br ${e.primary}`,children:C.jsx("div",{className:"w-full h-full bg-gray-700 rounded-full flex items-center justify-center ",children:C.jsx("img",{src:LC,alt:"Hero Image",className:"w-full h-full object-cover rounded-full"})})})}),C.jsxs("div",{className:"md:col-span-3 text-center md:text-left",children:[C.jsx(Be,{animation:"fadeInRight",delay:100,children:C.jsx("div",{className:`inline-block px-4 py-1 mb-4 border rounded-full text-sm font-semibold tracking-wide
                bg-gradient-to-r from-blue-500/10 to-purple-500/10 
                border-green-400
                text-blue-400
                animate-pulse
              `,children:C.jsx("span",{className:"relative",children:n.hero.status})})}),C.jsx(Be,{animation:"fadeInRight",delay:200,children:C.jsx("p",{className:`text-lg sm:text-2xl mb-4 ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:n.hero.greeting})}),C.jsx(Be,{animation:"fadeInRight",delay:300,children:C.jsx("h1",{className:`text-4xl sm:text-6xl lg:text-7xl font-bold mb-6 ${t==="dark"?"text-white":"text-gray-900"}`,children:C.jsx("span",{className:`bg-gradient-to-r ${e.primary} bg-clip-text text-transparent`,children:n.hero.name})})}),C.jsx(Be,{animation:"fadeInRight",delay:400,children:C.jsx("p",{className:`text-lg mb-12 max-w-3xl leading-relaxed ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:n.hero.description.split(`
`).map((s,r)=>C.jsxs("span",{children:[s,C.jsx("br",{})]},r))})})]})]})}),C.jsx("button",{onClick:i,className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 cursor-pointer focus:outline-none","aria-label":"Scroll down",children:C.jsx("div",{className:"animate-bounce",children:C.jsx(gC,{className:`w-8 h-8 ${t==="dark"?"text-gray-400":"text-gray-600"}`})})})]})},IC="/Portfolio/assets/1-Lw8qhFt0.jpg",NC="/Portfolio/assets/2-B-UFKrgb.jpg",DC="/Portfolio/assets/3-BiYR_twt.jpg",OC="/Portfolio/assets/4-Cj2j6bDE.jpg",iu=[IC,NC,DC,OC],FC=()=>{const{t:n}=Ga(),{theme:t}=ri(),e=fo(t),[i,s]=D.useState(0),r=()=>{s(c=>(c+1)%iu.length)},o=()=>{s(c=>(c-1+iu.length)%iu.length)},l=c=>{s(c)};return D.useEffect(()=>{const c=setInterval(()=>{r()},3e3);return()=>clearInterval(c)},[]),C.jsx("section",{id:"about",className:`py-20 ${t==="dark"?"bg-gray-800":"bg-gray-100"}`,children:C.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[C.jsx(Be,{animation:"fadeInUp",children:C.jsxs("div",{className:"text-center mb-16",children:[C.jsx("h2",{className:`text-3xl sm:text-4xl font-bold mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:n.about.title}),C.jsx("div",{className:`w-[7rem] h-1 bg-gradient-to-r ${e.primary} mx-auto`})]})}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-12 items-center",children:[C.jsx(Be,{animation:"fadeInRight",delay:200,className:"md:col-span-2",children:C.jsxs("div",{className:"relative",children:[C.jsxs("div",{className:`relative w-full max-w-md mx-auto aspect-square rounded-2xl p-1 bg-gradient-to-br ${e.primary} shadow-2xl transform transition-all duration-500 hover:scale-105`,children:[C.jsx("img",{src:iu[i],alt:`Photo ${i+1}`,className:"w-full h-full object-cover rounded-xl"}),C.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent rounded-xl"})]}),C.jsx("div",{className:"mt-4 flex justify-center space-x-2",children:iu.map((c,u)=>C.jsxs("div",{className:`relative w-12 h-12 rounded-lg overflow-hidden cursor-pointer transition-all duration-300 ${u===i?`ring-2 ${e.ring} scale-110`:"opacity-60 hover:opacity-100 hover:scale-105"}`,onClick:()=>l(u),children:[C.jsx("img",{src:c,alt:`Thumbnail ${u+1}`,className:"w-full h-full object-cover"}),u===i&&C.jsx("div",{className:`absolute inset-0 ${e.accent}/20`})]},u))}),C.jsx("button",{onClick:o,className:`absolute left-2 top-1/2 transform -translate-y-1/2 w-10 h-10 ${t==="dark"?"bg-white/20 text-white hover:bg-white/30":"bg-black/20 text-white hover:bg-black/30"} backdrop-blur-sm rounded-full flex items-center justify-center transition-all duration-300 shadow-lg hover:scale-110`,children:C.jsx(tx,{className:"w-5 h-5"})}),C.jsx("button",{onClick:r,className:`absolute right-2 top-1/2 transform -translate-y-1/2 w-10 h-10 ${t==="dark"?"bg-white/20 text-white hover:bg-white/30":"bg-black/20 text-white hover:bg-black/30"} backdrop-blur-sm rounded-full flex items-center justify-center transition-all duration-300 shadow-lg hover:scale-110`,children:C.jsx(ex,{className:"w-5 h-5"})})]})}),C.jsx(Be,{animation:"fadeInLeft",delay:400,className:"md:col-span-3",children:C.jsx("div",{className:"text-left space-y-6",children:C.jsx("p",{className:`text-lg leading-relaxed ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:n.about.description.split(`
`).map((c,u)=>C.jsxs("span",{children:[c,u<n.about.description.split(`
`).length-1&&C.jsx("br",{})]},u))})})})]})]})})};var ix={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},nw=Ia.createContext&&Ia.createContext(ix),jC=["attr","size","title"];function zC(n,t){if(n==null)return{};var e=$C(n,t),i,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}function $C(n,t){if(n==null)return{};var e={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(t.indexOf(i)>=0)continue;e[i]=n[i]}return e}function zp(){return zp=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},zp.apply(this,arguments)}function iw(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),e.push.apply(e,i)}return e}function $p(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?iw(Object(e),!0).forEach(function(i){BC(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):iw(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function BC(n,t,e){return t=HC(t),t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function HC(n){var t=UC(n,"string");return typeof t=="symbol"?t:t+""}function UC(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function sx(n){return n&&n.map((t,e)=>Ia.createElement(t.tag,$p({key:e},t.attr),sx(t.child)))}function po(n){return t=>Ia.createElement(VC,zp({attr:$p({},n.attr)},t),sx(n.child))}function VC(n){var t=e=>{var{attr:i,size:s,title:r}=n,o=zC(n,jC),l=s||e.size||"1em",c;return e.className&&(c=e.className),n.className&&(c=(c?c+" ":"")+n.className),Ia.createElement("svg",zp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,i,o,{className:c,style:$p($p({color:n.color||e.color},e.style),n.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),r&&Ia.createElement("title",null,r),n.children)};return nw!==void 0?Ia.createElement(nw.Consumer,null,e=>t(e)):t(ix)}function GC(n){return po({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.5 0h21l-1.91 21.563L11.977 24l-8.565-2.438L1.5 0zm17.09 4.413L5.41 4.41l.213 2.622 10.125.002-.255 2.716h-6.64l.24 2.573h6.182l-.366 3.523-2.91.804-2.956-.81-.188-2.11h-2.61l.29 3.855L12 19.288l5.373-1.53L18.59 4.414z"},child:[]}]})(n)}function WC(n){return po({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M23.546 10.93L13.067.452c-.604-.603-1.582-.603-2.188 0L8.708 2.627l2.76 2.76c.645-.215 1.379-.07 1.889.441.516.515.658 1.258.438 1.9l2.658 2.66c.645-.223 1.387-.078 1.9.435.721.72.721 1.884 0 2.604-.719.719-1.881.719-2.6 0-.539-.541-.674-1.337-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348.713.721.713 1.883 0 2.6-.719.721-1.889.721-2.609 0-.719-.719-.719-1.879 0-2.598.182-.18.387-.316.605-.406V8.835c-.217-.091-.424-.222-.6-.401-.545-.545-.676-1.342-.396-2.009L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477c.604.604 1.582.604 2.186 0l10.43-10.43c.605-.603.605-1.582 0-2.187"},child:[]}]})(n)}function XC(n){return po({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.5 0h21l-1.91 21.563L11.977 24l-8.564-2.438L1.5 0zm7.031 9.75l-.232-2.718 10.059.003.23-2.622L5.412 4.41l.698 8.01h9.126l-.326 3.426-2.91.804-2.955-.81-.188-2.11H6.248l.33 4.171L12 19.351l5.379-1.443.744-8.157H8.531z"},child:[]}]})(n)}function KC(n){return po({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z"},child:[]}]})(n)}function qC(n){return po({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z"},child:[]}]})(n)}function sw(n){return po({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.634 16.504c.87-.075 1.543-.84 1.5-1.754-.047-.914-.796-1.648-1.709-1.648h-.061a1.71 1.71 0 00-1.648 1.769c.03.479.226.869.494 1.153-1.048 2.038-2.621 3.536-5.005 4.795-1.603.838-3.296 1.154-4.944.93-1.378-.195-2.456-.81-3.116-1.799-.988-1.499-1.078-3.116-.255-4.734.6-1.17 1.499-2.023 2.099-2.443a9.96 9.96 0 01-.42-1.543C-.868 14.408-.416 18.752.932 20.805c1.004 1.498 3.057 2.456 5.304 2.456.6 0 1.23-.044 1.843-.194 3.897-.749 6.848-3.086 8.541-6.532zm5.348-3.746c-2.32-2.728-5.738-4.226-9.634-4.226h-.51c-.253-.554-.837-.899-1.498-.899h-.045c-.943 0-1.678.81-1.647 1.753.03.898.794 1.648 1.708 1.648h.074a1.69 1.69 0 001.499-1.049h.555c2.309 0 4.495.674 6.488 1.992 1.527 1.005 2.622 2.323 3.237 3.897.538 1.288.509 2.547-.045 3.597-.855 1.647-2.294 2.517-4.196 2.517-1.199 0-2.367-.375-2.967-.644-.36.298-.96.793-1.394 1.093 1.318.598 2.652.943 3.94.943 2.922 0 5.094-1.647 5.919-3.236.898-1.798.824-4.824-1.47-7.416zM6.49 17.042c.03.899.793 1.648 1.708 1.648h.06a1.688 1.688 0 001.648-1.768c0-.9-.779-1.647-1.693-1.647h-.06c-.06 0-.15 0-.226.029-1.243-2.098-1.768-4.347-1.572-6.772.12-1.828.72-3.417 1.797-4.735.9-1.124 2.593-1.68 3.747-1.708 3.236-.061 4.585 3.971 4.689 5.574l1.498.45C17.741 3.197 14.686.62 11.764.62 9.02.62 6.49 2.613 5.47 5.535 4.077 9.43 4.991 13.177 6.7 16.174c-.15.195-.24.539-.21.868z"},child:[]}]})(n)}function YC(n){return po({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.001,4.8c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 C13.666,10.618,15.027,12,18.001,12c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C16.337,6.182,14.976,4.8,12.001,4.8z M6.001,12c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 c1.177,1.194,2.538,2.576,5.512,2.576c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C10.337,13.382,8.976,12,6.001,12z"},child:[]}]})(n)}function QC(n){return po({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.125 0C.502 0 0 .502 0 1.125v21.75C0 23.498.502 24 1.125 24h21.75c.623 0 1.125-.502 1.125-1.125V1.125C24 .502 23.498 0 22.875 0zm17.363 9.75c.612 0 1.154.037 1.627.111a6.38 6.38 0 0 1 1.306.34v2.458a3.95 3.95 0 0 0-.643-.361 5.093 5.093 0 0 0-.717-.26 5.453 5.453 0 0 0-1.426-.2c-.3 0-.573.028-.819.086a2.1 2.1 0 0 0-.623.242c-.17.104-.3.229-.393.374a.888.888 0 0 0-.14.49c0 .196.053.373.156.529.104.156.252.304.443.444s.423.276.696.41c.273.135.582.274.926.416.47.197.892.407 1.266.628.374.222.695.473.963.753.268.279.472.598.614.957.142.359.214.776.214 1.253 0 .657-.125 1.21-.373 1.656a3.033 3.033 0 0 1-1.012 1.085 4.38 4.38 0 0 1-1.487.596c-.566.12-1.163.18-1.79.18a9.916 9.916 0 0 1-1.84-.164 5.544 5.544 0 0 1-1.512-.493v-2.63a5.033 5.033 0 0 0 3.237 1.2c.333 0 .624-.03.872-.09.249-.06.456-.144.623-.25.166-.108.29-.234.373-.38a1.023 1.023 0 0 0-.074-1.089 2.12 2.12 0 0 0-.537-.5 5.597 5.597 0 0 0-.807-.444 27.72 27.72 0 0 0-1.007-.436c-.918-.383-1.602-.852-2.053-1.405-.45-.553-.676-1.222-.676-2.005 0-.614.123-1.141.369-1.582.246-.441.58-.804 1.004-1.089a4.494 4.494 0 0 1 1.47-.629 7.536 7.536 0 0 1 1.77-.201zm-15.113.188h9.563v2.166H9.506v9.646H6.789v-9.646H3.375z"},child:[]}]})(n)}const rw=[{name:"React",icon:C.jsx(qC,{}),category:"frontend"},{name:"TypeScript",icon:C.jsx(QC,{}),category:"frontend"},{name:"JavaScript",icon:C.jsx(KC,{}),category:"frontend"},{name:"Tailwind",icon:C.jsx(YC,{}),category:"frontend"},{name:"Git",icon:C.jsx(WC,{}),category:"tools"},{name:"Redux",icon:C.jsx(sw,{}),category:"frontend"},{name:"Redux Toolkit",icon:C.jsx(sw,{}),category:"frontend"},{name:"HTML",icon:C.jsx(XC,{}),category:"frontend"},{name:"CSS",icon:C.jsx(GC,{}),category:"frontend"}],ZC=()=>{const{t:n}=Ga(),{theme:t}=ri(),e=fo(t),i=D.useRef(null),[s,r]=D.useState(!1),[o,l]=D.useState(0),[c,u]=D.useState(0),h=[...rw,...rw],d=m=>{var S,v;r(!0),l(m.pageX-(((S=i.current)==null?void 0:S.offsetLeft)||0)),u(((v=i.current)==null?void 0:v.scrollLeft)||0)},f=()=>{r(!1)},p=()=>{r(!1)},y=m=>{var w;if(!s)return;m.preventDefault();const v=(m.pageX-(((w=i.current)==null?void 0:w.offsetLeft)||0)-o)*2;i.current&&(i.current.scrollLeft=c-v)};return C.jsx("section",{id:"skills",className:`py-20 ${t==="dark"?"bg-gray-900":"bg-white"}`,children:C.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[C.jsx(Be,{animation:"fadeInUp",children:C.jsxs("div",{className:"text-center mb-16",children:[C.jsx("h2",{className:`text-3xl sm:text-4xl font-bold mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:n.skills.title}),C.jsx("div",{className:`w-[12rem] h-1 bg-gradient-to-r ${e.primary} mx-auto`})]})}),C.jsx("div",{ref:i,className:`relative w-full overflow-x-auto no-scrollbar cursor-grab ${s?"cursor-grabbing":""}`,style:{maskImage:"linear-gradient(to right, transparent, black 10%, black 90%, transparent)",WebkitMaskImage:"linear-gradient(to right, transparent, black 10%, black 90%, transparent)"},onMouseDown:d,onMouseLeave:f,onMouseUp:p,onMouseMove:y,children:C.jsx("div",{className:`flex ${s?"":"animate-infinite-scroll hover:[animation-play-state:paused]"}`,children:h.map((m,S)=>C.jsxs("div",{className:`flex-shrink-0 w-48 mx-4 flex flex-col items-center justify-center p-6 rounded-lg
                          bg-white/5 border border-white/10 shadow-lg select-none`,children:[C.jsx("div",{className:`text-5xl mb-4 ${t==="dark"?"text-gray-100":"text-gray-800"}`,children:m.icon}),C.jsx("span",{className:`text-lg font-medium ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:m.name})]},S))})})]})})},JC=({children:n,className:t="",hover:e=!0})=>{const{theme:i}=ri(),s=e?"hover:shadow-xl hover:scale-102":"";return C.jsx("div",{className:`rounded-xl shadow-lg p-6 transition-all duration-300 ${s} ${i==="dark"?"bg-gray-800 text-white":"bg-gray-100 text-gray-900"} ${t}`,children:n})},tk=({children:n,variant:t="primary",size:e="sm",className:i=""})=>{const{theme:s}=ri(),r=fo(s),o="inline-flex items-center font-medium rounded-full transition-all duration-200",l={sm:"px-2.5 py-0.5 text-xs",md:"px-3 py-1 text-sm"},c={primary:`bg-gradient-to-r ${r.primary} text-white`,secondary:`bg-gradient-to-r ${r.secondary} text-white`,outline:`border ${r.border} ${r.text} bg-transparent`};return C.jsx("span",{className:`${o} ${l[e]} ${c[t]} ${i}`,children:n})},wf=[{id:"1",translationKey:"happyFox",title:"Happy Fox",description:"Мобильная игра-приложение, где игроки управляют лисой в игровом процессе с механикой падения яиц, системой бустеров и внутриигровой экономикой. Проект включает полноценную игровую экосистему с магазином, системой друзей, розыгрышами, достижениями и профилем пользователя.",technologies:["React","TypeScript","React-router-dom","Redux Toolkit","Tailwind CSS","Axios","Telegram API"],images:["/Portfolio/HF/Заставка.png","/Portfolio/HF/photo_2025-07-03_20-45-07.jpg","/Portfolio/HF/photo_2025-07-03_20-45-13.jpg","/Portfolio/HF/photo_2025-07-03_20-45-28.jpg","/Portfolio/HF/photo_2025-07-03_20-45-33.jpg","/Portfolio/HF/photo_2025-07-03_20-45-39-Photoroom.png","/Portfolio/HF/photo_2025-07-03_20-24-32-Photoroom.png"]},{id:"2",translationKey:"koorator",title:"Koorator",description:"Мобильное приложение для пациентов, которое позволяет записываться на прием к врачам, просматривать планы лечения, историю посещений и управлять своим профилем. Приложение интегрировано с Telegram и предоставляет полный цикл взаимодействия пациента с клиникой от записи до отслеживания лечения.",technologies:["React","TypeScript","Tailwind CSS","RTK Query","React-router-dom","Telegram API"],images:["/Portfolio/Koorator/1.png","/Portfolio/Koorator/photo_2025-07-03_21-13-45-Photoroom.jpg","/Portfolio/Koorator/photo_2025-07-03_21-14-15-Photoroom.jpg","/Portfolio/Koorator/photo_2025-07-03_21-14-26-Photoroom.jpg","/Portfolio/Koorator/photo_2025-07-03_21-14-30-Photoroom.jpg","/Portfolio/Koorator/photo_2025-07-03_21-14-33-Photoroom.jpg","/Portfolio/Koorator/photo_2025-07-03_21-14-37-Photoroom.jpg","/Portfolio/Koorator/photo_2025-07-03_21-14-42-Photoroom.jpg","/Portfolio/Koorator/photo_2025-07-03_21-14-45-Photoroom.jpg","/Portfolio/Koorator/photo_2025-07-03_21-14-49-Photoroom.jpg","/Portfolio/Koorator/photo_2025-07-03_21-14-52-Photoroom.jpg","/Portfolio/Koorator/photo_2025-07-03_21-14-57-Photoroom.jpg"]},{id:"8",translationKey:"agrotat",title:"Agrotat",description:"Agrotat — это система мониторинга и управления транспортными средствами для сельскохозяйственных предприятий. Приложение позволяет отслеживать местоположение и состояние транспорта в реальном времени, управлять поездками, анализировать данные о пробеге и топливе, ",technologies:["React","TypeScript","Tailwind CSS","React-router-dom","Axios","Vite","Notistack"],githubUrl:"https://github.com/DanisKhasanov/Agrotat",images:["/Portfolio/Agrotat/1.png",'/Portfolio/Agrotat/Модальное окно  "Мониторинг".png',"/Portfolio/Agrotat/Страница Уведомления.png","/Portfolio/Agrotat/Страница Анализ ( анализ пробега).png","/Portfolio/Agrotat/Страница отчеты (Заправки).png","/Portfolio/Agrotat/Создание поездки (автокомплит городов).png","/Portfolio/Agrotat/Страница Машины.png"]},{id:"3",translationKey:"barberLink",title:"BarberLink",description:"Современная система для демо онлайн-записи в барбершопы с удобным интерфейсом и полным функционалом управления записями.",technologies:["React","TypeScript","React-router-dom","Redux Toolkit","Tailwind CSS","Axios","Vite","Notistack"],images:["/Portfolio/Barber/1.png","/Portfolio/Barber/photo_2025-06-12_01-03-48.jpg","/Portfolio/Barber/photo_2025-06-12_01-43-26.jpg","/Portfolio/Barber/Снимок экрана 2025-06-12 в 01.52.59.png","/Portfolio/Barber/Снимок экрана 2025-06-12 в 02.01.15.png","/Portfolio/Barber/Снимок экрана 2025-06-12 в 02.03.43.png","/Portfolio/Barber/Снимок экрана 2025-06-12 в 02.04.54.png"],githubUrl:"https://github.com/DanisKhasanov/BarberLink"},{id:"7",translationKey:"onlineShop",title:"Online shop",description:"Современный демо-интернет-магазин с адаптивным дизайном и полным циклом покупки.",technologies:["React","TypeScript","React-router-dom","Axios","Vite","Notistack"],githubUrl:"https://github.com/DanisKhasanov/touch_it",liveUrl:"https://daniskhasanov.github.io/touch_it/",images:["/Portfolio/OnlineShop/Снимок экрана от 2025-07-03 21-31-22.png"]},{id:"6",translationKey:"cdekOrderPro",title:"Cdek OrderPRO",description:"Интеграция с сервисом доставки СДЭК, позволяющая автоматически рассчитывать стоимость доставки, создавать и скачивать накладные.",technologies:["React","TypeScript","React-router-dom","Axios","Vite","React-Dadata","Notistack"],images:["/Portfolio/Cdek/0.png","/Portfolio/Cdek/1.png","/Portfolio/Cdek/2.png","/Portfolio/Cdek/3.png","/Portfolio/Cdek/4.png","/Portfolio/Cdek/5.png","/Portfolio/Cdek/6.png"],githubUrl:"https://github.com/DanisKhasanov/Cdek_Order_PRO"},{id:"5",translationKey:"priceList",title:"Price List",description:"Веб-приложение для управления и отображения прайс-листов. Основная цель проекта — упростить процесс создания, обновления и публикации прайс-листов в формате PDF для различных товаров и услуг",technologies:["React","TypeScript","React-router-dom","Material UI","Material React Table","Axios","Vite","PDF Make"],images:["/Portfolio/PriceList/0.png","/Portfolio/PriceList/1.png","/Portfolio/PriceList/2.png","/Portfolio/PriceList/3.png"],githubUrl:"https://github.com/DanisKhasanov/PriceList"},{id:"4",translationKey:"customerOrders",title:"Customer Orders",description:"Веб-приложение, предназначенное для управления заказами клиентов, с функцией автозаполнения для повышения удобства пользователей.",technologies:["React","TypeScript","React-router-dom","Redux Toolkit","Material UI","Material React Table","Notistack"],images:[],githubUrl:"https://github.com/DanisKhasanov/Customer_orders"}],ek=()=>{const{t:n}=Ga(),{theme:t}=ri(),e=fo(t),[i,s]=D.useState(null);return C.jsxs("section",{id:"projects",className:`py-20 ${t==="dark"?"bg-gray-900":"bg-gray-200"}`,children:[C.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[C.jsx(Be,{animation:"fadeInUp",children:C.jsxs("div",{className:"text-center mb-16",children:[C.jsx("h2",{className:`text-3xl sm:text-4xl font-bold mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:n.projects.title}),C.jsx("div",{className:`w-[15rem] h-1 bg-gradient-to-r ${e.primary} mx-auto`})]})}),C.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:wf.map((r,o)=>{var l,c;return C.jsx(Be,{animation:"fadeInUp",delay:o*100,children:C.jsxs(JC,{className:"h-full flex flex-col",children:[r.images&&r.images.length>0?C.jsxs("div",{className:`h-[270px] rounded-xl mb-6 relative flex items-center justify-center shadow-lg overflow-hidden group transition-all ${t==="dark"?"bg-gray-900":"bg-white"}`,children:[C.jsx("img",{src:r.images&&r.images[0],alt:r.title,className:"w-full h-full object-cover cursor-pointer transition-transform duration-300 group-hover:scale-105",onClick:()=>r.images&&s(r.images[1])}),C.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:()=>r.images&&s(r.images[1]),children:C.jsx(kC,{className:"w-10 h-10 text-white drop-shadow-lg bg-black/50 rounded-full p-2"})})]}):C.jsx("div",{className:`h-[270px] bg-gradient-to-br ${e.primary} rounded-lg mb-6 relative overflow-hidden flex items-center justify-center`,children:C.jsx("span",{className:"text-white text-lg font-semibold",children:r.title})}),C.jsxs("div",{className:"flex-1 flex flex-col",children:[C.jsx("h3",{className:`text-xl font-semibold mb-3 ${t==="dark"?"text-white":"text-gray-900"}`,children:((l=n.projects[r.translationKey])==null?void 0:l.title)||r.title}),C.jsx("p",{className:`mb-4 flex-1 ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:((c=n.projects[r.translationKey])==null?void 0:c.description)||r.description}),C.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:r.technologies.map((u,h)=>C.jsx(tk,{variant:"outline",size:"sm",children:u},h))}),C.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-auto",children:[r.githubUrl&&C.jsxs(bo,{variant:"outline",size:"sm",onClick:()=>window.open(r.githubUrl,"_blank"),className:"flex-1 flex items-center justify-center",children:[C.jsx(nx,{className:"w-4 h-4 mr-2"}),n.projects.viewCode]}),r.liveUrl&&C.jsxs(bo,{size:"sm",onClick:()=>window.open(r.liveUrl,"_blank"),className:"flex-1 flex items-center justify-center",children:[C.jsx(yC,{className:"w-4 h-4 mr-2"}),n.projects.viewLive]})]})]})]})},r.id)})})]}),i&&C.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>s(null),children:C.jsxs("div",{className:"relative flex items-center justify-center w-full h-full",children:[C.jsx("button",{className:"absolute top-6 right-6 z-20 bg-black/60 hover:bg-black/80 text-white rounded-full p-2 shadow-lg transition-all",onClick:r=>{r.stopPropagation(),s(null)},"aria-label":"Закрыть",children:C.jsx(CC,{className:"w-8 h-8"})}),C.jsx("button",{className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-black/60 hover:bg-black/80 text-white rounded-full p-2 shadow-lg transition-all",onClick:r=>{r.stopPropagation();const o=wf.find(l=>l.images&&l.images.includes(i));if(o&&o.images&&o.images.length>1){const c=(o.images.indexOf(i)-1+o.images.length)%o.images.length;s(o.images[c])}},"aria-label":"Предыдущее фото",children:C.jsx(tx,{className:"w-8 h-8"})}),C.jsx("img",{src:i,alt:"project",className:"max-h-[90vh] max-w-[90vw] rounded-lg shadow-2xl "}),C.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-black/60 hover:bg-black/80 text-white rounded-full p-2 shadow-lg transition-all",onClick:r=>{r.stopPropagation();const o=wf.find(l=>l.images&&l.images.includes(i));if(o&&o.images&&o.images.length>1){const c=(o.images.indexOf(i)+1)%o.images.length;s(o.images[c])}},"aria-label":"Следующее фото",children:C.jsx(ex,{className:"w-8 h-8"})}),(()=>{const r=wf.find(o=>o.images&&o.images.includes(i));if(r&&r.images&&r.images.length>1){const o=r.images.indexOf(i);return C.jsxs("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 bg-black/60 text-white text-xs px-3 py-1 rounded-full shadow",children:[o+1," / ",r.images.length]})}return null})()]})})]})},Qe=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),g0=[.001,0,0,.001,0,0],gm=1.35,Rn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ts={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},nk="pdfjs_internal_editor_",Q={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},lt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},rx={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ie={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},$u={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Wt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Qa={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Ud={ERRORS:0,WARNINGS:1,INFOS:5},sh={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Af={moveTo:0,lineTo:1,curveTo:2,closePath:3},ox={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Rg=Ud.WARNINGS;function ik(n){Number.isInteger(n)&&(Rg=n)}function sk(){return Rg}function Lg(n){Rg>=Ud.INFOS&&console.log(`Info: ${n}`)}function J(n){Rg>=Ud.WARNINGS&&console.log(`Warning: ${n}`)}function At(n){throw new Error(n)}function te(n,t){n||At(t)}function rk(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function E1(n,t=null,e=null){if(!n)return null;if(e&&typeof n=="string"){if(e.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(e.tryConvertEncoding)try{n=uk(n)}catch{}}const i=t?URL.parse(n,t):URL.parse(n);return rk(i)?i:null}function _1(n,t,e=!1){const i=URL.parse(n);return i?(i.hash=t,i.href):e&&E1(n,"http://example.com")?n.split("#",1)[0]+`${t?`#${t}`:""}`:""}function rt(n,t,e,i=!1){return Object.defineProperty(n,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const Wa=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class ow extends Wa{constructor(t,e){super(t,"PasswordException"),this.code=e}}class mm extends Wa{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Bp extends Wa{constructor(t){super(t,"InvalidPDFException")}}class rh extends Wa{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class ok extends Wa{constructor(t){super(t,"FormatError")}}class Zs extends Wa{constructor(t){super(t,"AbortException")}}function ax(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&At("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const i=[];for(let s=0;s<t;s+=e){const r=Math.min(s+e,t),o=n.subarray(s,r);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function Vd(n){typeof n!="string"&&At("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=n.charCodeAt(i)&255;return e}function ak(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function lk(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function ck(){try{return new Function(""),!0}catch{return!1}}class ve{static get isLittleEndian(){return rt(this,"isLittleEndian",lk())}static get isEvalSupported(){return rt(this,"isEvalSupported",ck())}static get isOffscreenCanvasSupported(){return rt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return rt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return rt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return rt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const ym=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Ws,zf,m0;class W{static makeHexColor(t,e,i){return`#${ym[t]}${ym[e]}${ym[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,i=0){const s=t[i],r=t[i+1];t[i]=s*e[0]+r*e[2]+e[4],t[i+1]=s*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const s=e[0],r=e[1],o=e[2],l=e[3],c=e[4],u=e[5];for(let h=0;h<6;h+=2){const d=t[i+h],f=t[i+h+1];t[i+h]=d*s+f*o+c,t[i+h+1]=d*r+f*l+u}}static applyInverseTransform(t,e){const i=t[0],s=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-s*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-i*e[1]+s*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,i){const s=e[0],r=e[1],o=e[2],l=e[3],c=e[4],u=e[5],h=t[0],d=t[1],f=t[2],p=t[3];let y=s*h+c,m=y,S=s*f+c,v=S,w=l*d+u,x=w,E=l*p+u,_=E;if(r!==0||o!==0){const T=r*h,k=r*f,P=o*d,L=o*p;y+=P,v+=P,S+=L,m+=L,w+=T,_+=T,E+=k,x+=k}i[0]=Math.min(i[0],y,S,m,v),i[1]=Math.min(i[1],w,E,x,_),i[2]=Math.max(i[2],y,S,m,v),i[3]=Math.max(i[3],w,E,x,_)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],s=t[1],r=t[2],o=t[3],l=i**2+s**2,c=i*r+s*o,u=r**2+o**2,h=(l+u)/2,d=Math.sqrt(h**2-(l*u-c**2));e[0]=Math.sqrt(h+d||1),e[1]=Math.sqrt(h-d||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>s)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[i,r,s,o]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,s,r){r[0]=Math.min(r[0],t,i),r[1]=Math.min(r[1],e,s),r[2]=Math.max(r[2],t,i),r[3]=Math.max(r[3],e,s)}static bezierBoundingBox(t,e,i,s,r,o,l,c,u){u[0]=Math.min(u[0],t,l),u[1]=Math.min(u[1],e,c),u[2]=Math.max(u[2],t,l),u[3]=Math.max(u[3],e,c),b(this,Ws,m0).call(this,t,i,r,l,e,s,o,c,3*(-t+3*(i-r)+l),6*(t-2*i+r),3*(i-t),u),b(this,Ws,m0).call(this,t,i,r,l,e,s,o,c,3*(-e+3*(s-o)+c),6*(e-2*s+o),3*(s-e),u)}}Ws=new WeakSet,zf=function(t,e,i,s,r,o,l,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,y=d*(d*(d*t+3*u*e)+3*f*i)+p*s,m=d*(d*(d*r+3*u*o)+3*f*l)+p*c;h[0]=Math.min(h[0],y),h[1]=Math.min(h[1],m),h[2]=Math.max(h[2],y),h[3]=Math.max(h[3],m)},m0=function(t,e,i,s,r,o,l,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&b(this,Ws,zf).call(this,t,e,i,s,r,o,l,c,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const y=Math.sqrt(p),m=2*u;b(this,Ws,zf).call(this,t,e,i,s,r,o,l,c,(-h+y)/m,f),b(this,Ws,zf).call(this,t,e,i,s,r,o,l,c,(-h-y)/m,f)},A(W,Ws);function uk(n){return decodeURIComponent(escape(n))}let vm=null,aw=null;function lx(n){return vm||(vm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,aw=new Map([["ﬅ","ſt"]])),n.replaceAll(vm,(t,e,i)=>e?e.normalize("NFKC"):aw.get(i))}function C1(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),ax(n)}const k1="pdfjs_internal_id_";function hk(n,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,s,...r]=e;if(!n(i)&&!Number.isInteger(i)||!t(s))return!1;const o=r.length;let l=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of r)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function ze(n,t,e){return Math.min(Math.max(n,t),e)}function cx(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(ax(n))}function dk(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Vd(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...t){return new Promise(e=>{e(n(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((t,e)=>t+e,0)});const as="http://www.w3.org/2000/svg",xo=class xo{};N(xo,"CSS",96),N(xo,"PDF",72),N(xo,"PDF_TO_CSS_UNITS",xo.CSS/xo.PDF);let Js=xo;async function Xc(n,t="text"){if(du(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class Gd{constructor({viewBox:t,userUnit:e,scale:i,rotation:s,offsetX:r=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=s,this.offsetX=r,this.offsetY=o,i*=e;const c=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let h,d,f,p;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,d=0,f=0,p=1;break;case 90:h=0,d=1,f=1,p=0;break;case 270:h=0,d=-1,f=-1,p=0;break;case 0:h=1,d=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,p=-p);let y,m,S,v;h===0?(y=Math.abs(u-t[1])*i+r,m=Math.abs(c-t[0])*i+o,S=(t[3]-t[1])*i,v=(t[2]-t[0])*i):(y=Math.abs(c-t[0])*i+r,m=Math.abs(u-t[1])*i+o,S=(t[2]-t[0])*i,v=(t[3]-t[1])*i),this.transform=[h*i,d*i,f*i,p*i,y-h*i*c-f*i*u,m-d*i*c-p*i*u],this.width=S,this.height=v}get rawDims(){const t=this.viewBox;return rt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new Gd({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:r})}convertToViewportPoint(t,e){const i=[t,e];return W.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];W.applyTransform(e,this.transform);const i=[t[2],t[3]];return W.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return W.applyInverseTransform(i,this.transform),i}}class Mg extends Wa{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Wd(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function Ig(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function ux(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function hx(n,t="document.pdf"){if(typeof n!="string")return t;if(Wd(n))return J('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=e.exec(n);let r=i.exec(s[1])||i.exec(s[2])||i.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=i.exec(decodeURIComponent(r))[0]}catch{}return r||t}class lw{constructor(){N(this,"started",Object.create(null));N(this,"times",[])}time(t){t in this.started&&J(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||J(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:s,end:r}of this.times)t.push(`${i.padEnd(e)} ${r-s}ms
`);return t.join("")}}function du(n,t){const e=t?URL.parse(n,t):URL.parse(n);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function si(n){n.preventDefault()}function qt(n){n.preventDefault(),n.stopPropagation()}function fk(n){console.log("Deprecated API usage: "+n)}var hh;class Ng{static toDateObject(t){if(!t||typeof t!="string")return null;a(this,hh)||g(this,hh,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=a(this,hh).exec(t);if(!e)return null;const i=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const u=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,l+=d):u==="+"&&(o-=h,l-=d),new Date(Date.UTC(i,s,r,o,l,c))}}hh=new WeakMap,A(Ng,hh);function dx(n,{scale:t=1,rotation:e=0}){const{width:i,height:s}=n.attributes.style,r=[0,0,parseInt(i),parseInt(s)];return new Gd({viewBox:r,userUnit:1,scale:t,rotation:e})}function T1(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(J(`Not a valid color format: "${n}"`),[0,0,0])}function pk(n){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of n.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;n.set(e,T1(i))}t.remove()}function Ft(n){const{a:t,b:e,c:i,d:s,e:r,f:o}=n.getTransform();return[t,e,i,s,r,o]}function Ii(n){const{a:t,b:e,c:i,d:s,e:r,f:o}=n.getTransform().invertSelf();return[t,e,i,s,r,o]}function so(n,t,e=!1,i=!0){if(t instanceof Gd){const{pageWidth:s,pageHeight:r}=t.rawDims,{style:o}=n,l=ve.isCSSRoundSupported,c=`var(--total-scale-factor) * ${s}px`,u=`var(--total-scale-factor) * ${r}px`,h=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,d=l?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!e||t.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}i&&n.setAttribute("data-main-rotation",t.rotation)}class Ti{constructor(){const{pixelRatio:t}=Ti;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,s,r=-1){let o=1/0,l=1/0,c=1/0;i=Ti.capPixels(i,r),i>0&&(o=Math.sqrt(i/(t*e))),s!==-1&&(l=s/t,c=s/e);const u=Math.min(o,l,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const Hp=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var cr,ko,Bn,ur,dh,Tl,fh,qp,fx,Te,px,gx,fu,mx,$f;const hs=class hs{constructor(t){A(this,Te);A(this,cr,null);A(this,ko,null);A(this,Bn);A(this,ur,null);A(this,dh,null);A(this,Tl,null);g(this,Bn,t),a(hs,fh)||g(hs,fh,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=g(this,cr,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=a(this,Bn)._uiManager._signal;t.addEventListener("contextmenu",si,{signal:e}),t.addEventListener("pointerdown",b(hs,qp,fx),{signal:e});const i=g(this,ur,document.createElement("div"));i.className="buttons",t.append(i);const s=a(this,Bn).toolbarPosition;if(s){const{style:r}=t,o=a(this,Bn)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return b(this,Te,mx).call(this),t}get div(){return a(this,cr)}hide(){var t;a(this,cr).classList.add("hidden"),(t=a(this,ko))==null||t.hideDropdown()}show(){var t;a(this,cr).classList.remove("hidden"),(t=a(this,dh))==null||t.shown()}async addAltText(t){const e=await t.render();b(this,Te,fu).call(this,e),a(this,ur).prepend(e,a(this,Te,$f)),g(this,dh,t)}addColorPicker(t){g(this,ko,t);const e=t.renderButton();b(this,Te,fu).call(this,e),a(this,ur).prepend(e,a(this,Te,$f))}async addEditSignatureButton(t){const e=g(this,Tl,await t.renderEditButton(a(this,Bn)));b(this,Te,fu).call(this,e),a(this,ur).prepend(e,a(this,Te,$f))}updateEditSignatureButton(t){a(this,Tl)&&(a(this,Tl).title=t)}remove(){var t;a(this,cr).remove(),(t=a(this,ko))==null||t.destroy(),g(this,ko,null)}};cr=new WeakMap,ko=new WeakMap,Bn=new WeakMap,ur=new WeakMap,dh=new WeakMap,Tl=new WeakMap,fh=new WeakMap,qp=new WeakSet,fx=function(t){t.stopPropagation()},Te=new WeakSet,px=function(t){a(this,Bn)._focusEventsAllowed=!1,qt(t)},gx=function(t){a(this,Bn)._focusEventsAllowed=!0,qt(t)},fu=function(t){const e=a(this,Bn)._uiManager._signal;t.addEventListener("focusin",b(this,Te,px).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",b(this,Te,gx).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",si,{signal:e})},mx=function(){const{editorType:t,_uiManager:e}=a(this,Bn),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",a(hs,fh)[t]),b(this,Te,fu).call(this,i),i.addEventListener("click",s=>{e.delete()},{signal:e._signal}),a(this,ur).append(i)},$f=function(){const t=document.createElement("div");return t.className="divider",t},A(hs,qp),A(hs,fh,null);let y0=hs;var ph,To,Po,oo,yx,vx,wx;class gk{constructor(t){A(this,oo);A(this,ph,null);A(this,To,null);A(this,Po);g(this,Po,t)}show(t,e,i){const[s,r]=b(this,oo,vx).call(this,e,i),{style:o}=a(this,To)||g(this,To,b(this,oo,yx).call(this));t.append(a(this,To)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,To).remove()}}ph=new WeakMap,To=new WeakMap,Po=new WeakMap,oo=new WeakSet,yx=function(){const t=g(this,To,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",si,{signal:a(this,Po)._signal});const e=g(this,ph,document.createElement("div"));return e.className="buttons",t.append(e),b(this,oo,wx).call(this),t},vx=function(t,e){let i=0,s=0;for(const r of t){const o=r.y+r.height;if(o<i)continue;const l=r.x+(e?r.width:0);if(o>i){s=l,i=o;continue}e?l>s&&(s=l):l<s&&(s=l)}return[e?1-s:s,i]},wx=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=a(this,Po)._signal;t.addEventListener("contextmenu",si,{signal:i}),t.addEventListener("click",()=>{a(this,Po).highlightSelection("floating_button")},{signal:i}),a(this,ph).append(t)};function Ax(n,t,e){for(const i of e)t.addEventListener(i,n[i].bind(n))}var Yp;class mk{constructor(){A(this,Yp,0)}get id(){return`${nk}${Ge(this,Yp)._++}`}}Yp=new WeakMap;var Pl,gh,De,Rl,Bf;const z1=class z1{constructor(){A(this,Rl);A(this,Pl,C1());A(this,gh,0);A(this,De,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const r=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return rt(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:i,size:s,type:r}=t;return b(this,Rl,Bf).call(this,`${e}_${i}_${s}_${r}`,t)}async getFromUrl(t){return b(this,Rl,Bf).call(this,t,t)}async getFromBlob(t,e){const i=await e;return b(this,Rl,Bf).call(this,t,i)}async getFromId(t){a(this,De)||g(this,De,new Map);const e=a(this,De).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){a(this,De)||g(this,De,new Map);let i=a(this,De).get(t);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${a(this,Pl)}_${Ge(this,gh)._++}`,refCounter:1,isSvg:!1},a(this,De).set(t,i),a(this,De).set(i.id,i),i}getSvgUrl(t){const e=a(this,De).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;a(this,De)||g(this,De,new Map);const e=a(this,De).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=r.convertToBlob()}(s=i.close)==null||s.call(i),e.bitmap=null}isValidId(t){return t.startsWith(`image_${a(this,Pl)}_`)}};Pl=new WeakMap,gh=new WeakMap,De=new WeakMap,Rl=new WeakSet,Bf=async function(t,e){a(this,De)||g(this,De,new Map);let i=a(this,De).get(t);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${a(this,Pl)}_${Ge(this,gh)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(i.url=e,s=await Xc(e,"blob")):e instanceof File?s=i.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const r=z1._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((u,h)=>{l.onload=()=>{i.bitmap=l,i.isSvg=!0,u()},o.onload=async()=>{const d=i.svgUrl=o.result;l.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},l.onerror=o.onerror=h});o.readAsDataURL(s),await c}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){J(s),i=null}return a(this,De).set(t,i),i&&a(this,De).set(i.id,i),i};let v0=z1;var Xt,hr,mh,Ot;class yk{constructor(t=128){A(this,Xt,[]);A(this,hr,!1);A(this,mh);A(this,Ot,-1);g(this,mh,t)}add({cmd:t,undo:e,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(s&&t(),a(this,hr))return;const c={cmd:t,undo:e,post:i,type:r};if(a(this,Ot)===-1){a(this,Xt).length>0&&(a(this,Xt).length=0),g(this,Ot,0),a(this,Xt).push(c);return}if(o&&a(this,Xt)[a(this,Ot)].type===r){l&&(c.undo=a(this,Xt)[a(this,Ot)].undo),a(this,Xt)[a(this,Ot)]=c;return}const u=a(this,Ot)+1;u===a(this,mh)?a(this,Xt).splice(0,1):(g(this,Ot,u),u<a(this,Xt).length&&a(this,Xt).splice(u)),a(this,Xt).push(c)}undo(){if(a(this,Ot)===-1)return;g(this,hr,!0);const{undo:t,post:e}=a(this,Xt)[a(this,Ot)];t(),e==null||e(),g(this,hr,!1),g(this,Ot,a(this,Ot)-1)}redo(){if(a(this,Ot)<a(this,Xt).length-1){g(this,Ot,a(this,Ot)+1),g(this,hr,!0);const{cmd:t,post:e}=a(this,Xt)[a(this,Ot)];t(),e==null||e(),g(this,hr,!1)}}hasSomethingToUndo(){return a(this,Ot)!==-1}hasSomethingToRedo(){return a(this,Ot)<a(this,Xt).length-1}cleanType(t){if(a(this,Ot)!==-1){for(let e=a(this,Ot);e>=0;e--)if(a(this,Xt)[e].type!==t){a(this,Xt).splice(e+1,a(this,Ot)-e),g(this,Ot,e);return}a(this,Xt).length=0,g(this,Ot,-1)}}destroy(){g(this,Xt,null)}}Xt=new WeakMap,hr=new WeakMap,mh=new WeakMap,Ot=new WeakMap;var Qp,bx;class Xd{constructor(t){A(this,Qp);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=ve.platform;for(const[i,s,r={}]of t)for(const o of i){const l=o.startsWith("mac+");e&&l?(this.callbacks.set(o.slice(4),{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!l&&(this.callbacks.set(o,{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(b(this,Qp,bx).call(this,e));if(!i)return;const{callback:s,options:{bubbles:r=!1,args:o=[],checker:l=null}}=i;l&&!l(t,e)||(s.bind(t,...o,e)(),r||qt(e))}}Qp=new WeakSet,bx=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Zp=class Zp{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return pk(t),rt(this,"_colors",t)}convert(t){const e=T1(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,s]of this._colors)if(s.every((r,o)=>r===e[o]))return Zp._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?W.makeHexColor(...e):t}};N(Zp,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let w0=Zp;var Ll,yn,se,Ae,Ml,ps,Il,Hn,dr,fr,Nl,Ro,Fi,ci,Lo,yh,vh,Dl,wh,ji,pr,Ol,gr,zi,Jp,mr,Ah,yr,Mo,Io,vr,bh,ue,mt,gs,wr,No,xh,Sh,Ar,$i,ms,Eh,Un,z,Hf,A0,xx,Sx,Uf,Ex,_x,Cx,b0,kx,x0,S0,Tx,We,ls,Px,Rx,E0,Lx,pu,_0;const yl=class yl{constructor(t,e,i,s,r,o,l,c,u,h,d,f,p,y){A(this,z);A(this,Ll,new AbortController);A(this,yn,null);A(this,se,new Map);A(this,Ae,new Map);A(this,Ml,null);A(this,ps,null);A(this,Il,null);A(this,Hn,new yk);A(this,dr,null);A(this,fr,null);A(this,Nl,0);A(this,Ro,new Set);A(this,Fi,null);A(this,ci,null);A(this,Lo,new Set);N(this,"_editorUndoBar",null);A(this,yh,!1);A(this,vh,!1);A(this,Dl,!1);A(this,wh,null);A(this,ji,null);A(this,pr,null);A(this,Ol,null);A(this,gr,!1);A(this,zi,null);A(this,Jp,new mk);A(this,mr,!1);A(this,Ah,!1);A(this,yr,null);A(this,Mo,null);A(this,Io,null);A(this,vr,null);A(this,bh,null);A(this,ue,Q.NONE);A(this,mt,new Set);A(this,gs,null);A(this,wr,null);A(this,No,null);A(this,xh,null);A(this,Sh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,Ar,[0,0]);A(this,$i,null);A(this,ms,null);A(this,Eh,null);A(this,Un,null);const m=this._signal=a(this,Ll).signal;g(this,ms,t),g(this,Eh,e),g(this,Ml,i),g(this,wr,s),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:m}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),r._on("setpreference",this.onSetPreference.bind(this),{signal:m}),r._on("switchannotationeditorparams",S=>this.updateParams(S.type,S.value),{signal:m}),b(this,z,Ex).call(this),b(this,z,Tx).call(this),b(this,z,b0).call(this),g(this,ps,o.annotationStorage),g(this,wh,o.filterFactory),g(this,No,l),g(this,Ol,c||null),g(this,yh,u),g(this,vh,h),g(this,Dl,d),g(this,bh,f||null),this.viewParameters={realScale:Js.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=p||null,this._supportsPinchToZoom=y!==!1}static get _keyboardManager(){const t=yl.prototype,e=o=>a(o,ms).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return rt(this,"_keyboardManager",new Xd([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,ms).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,ms).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,i,s,r,o,l,c;(t=a(this,Un))==null||t.resolve(),g(this,Un,null),(e=a(this,Ll))==null||e.abort(),g(this,Ll,null),this._signal=null;for(const u of a(this,Ae).values())u.destroy();a(this,Ae).clear(),a(this,se).clear(),a(this,Lo).clear(),(i=a(this,vr))==null||i.clear(),g(this,yn,null),a(this,mt).clear(),a(this,Hn).destroy(),(s=a(this,Ml))==null||s.destroy(),(r=a(this,wr))==null||r.destroy(),(o=a(this,zi))==null||o.hide(),g(this,zi,null),(l=a(this,Io))==null||l.destroy(),g(this,Io,null),a(this,ji)&&(clearTimeout(a(this,ji)),g(this,ji,null)),a(this,$i)&&(clearTimeout(a(this,$i)),g(this,$i,null)),(c=this._editorUndoBar)==null||c.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return a(this,bh)}get useNewAltTextFlow(){return a(this,vh)}get useNewAltTextWhenAddingImage(){return a(this,Dl)}get hcmFilter(){return rt(this,"hcmFilter",a(this,No)?a(this,wh).addHCMFilter(a(this,No).foreground,a(this,No).background):"none")}get direction(){return rt(this,"direction",getComputedStyle(a(this,ms)).direction)}get highlightColors(){return rt(this,"highlightColors",a(this,Ol)?new Map(a(this,Ol).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return rt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),g(this,fr,t)}setMainHighlightColorPicker(t){g(this,Io,t)}editAltText(t,e=!1){var i;(i=a(this,Ml))==null||i.editAltText(this,t,e)}getSignature(t){var e;(e=a(this,wr))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return a(this,wr)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":g(this,Dl,e);break}}onPageChanging({pageNumber:t}){g(this,Nl,t-1)}focusMainContainer(){a(this,ms).focus()}findParent(t,e){for(const i of a(this,Ae).values()){const{x:s,y:r,width:o,height:l}=i.div.getBoundingClientRect();if(t>=s&&t<=s+o&&e>=r&&e<=r+l)return i}return null}disableUserSelect(t=!1){a(this,Eh).classList.toggle("noUserSelect",t)}addShouldRescale(t){a(this,Lo).add(t)}removeShouldRescale(t){a(this,Lo).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Js.PDF_TO_CSS_UNITS;for(const i of a(this,Lo))i.onScaleChanging();(e=a(this,fr))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o}=e,l=e.toString(),u=b(this,z,Hf).call(this,e).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;e.empty();const d=b(this,z,A0).call(this,u),f=a(this,ue)===Q.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:h,anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o,text:l}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(Q.HIGHLIGHT,p);return}p()}addToAnnotationStorage(t){!t.isEmpty()&&a(this,ps)&&!a(this,ps).has(t.id)&&a(this,ps).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,a(this,gr)&&(g(this,gr,!1),b(this,z,Uf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of a(this,mt))if(e.div.contains(t)){g(this,Mo,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!a(this,Mo))return;const[t,e]=a(this,Mo);g(this,Mo,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){b(this,z,b0).call(this),b(this,z,x0).call(this)}removeEditListeners(){b(this,z,kx).call(this),b(this,z,S0).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of a(this,ci))if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of a(this,ci))if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var i;if(t.preventDefault(),(i=a(this,yn))==null||i.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of a(this,mt)){const r=s.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of a(this,ci))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){J(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const c of i){const u=await s.deserialize(c);if(!u)return;r.push(u)}const o=()=>{for(const c of r)b(this,z,E0).call(this,c);b(this,z,_0).call(this,r)},l=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(r){J(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,ue)!==Q.NONE&&!this.isEditorHandlingKeyboard&&yl._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,gr)&&(g(this,gr,!1),b(this,z,Uf).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(b(this,z,_x).call(this),b(this,z,x0).call(this),b(this,z,We).call(this,{isEditing:a(this,ue)!==Q.NONE,isEmpty:b(this,z,pu).call(this),hasSomethingToUndo:a(this,Hn).hasSomethingToUndo(),hasSomethingToRedo:a(this,Hn).hasSomethingToRedo(),hasSelectedEditor:!1})):(b(this,z,Cx).call(this),b(this,z,S0).call(this),b(this,z,We).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!a(this,ci)){g(this,ci,t);for(const e of a(this,ci))b(this,z,ls).call(this,e.defaultPropertiesToUpdate)}}getId(){return a(this,Jp).id}get currentLayer(){return a(this,Ae).get(a(this,Nl))}getLayer(t){return a(this,Ae).get(t)}get currentPageIndex(){return a(this,Nl)}addLayer(t){a(this,Ae).set(t.pageIndex,t),a(this,mr)?t.enable():t.disable()}removeLayer(t){a(this,Ae).delete(t.pageIndex)}async updateMode(t,e=null,i=!1){var s,r,o;if(a(this,ue)!==t&&!(a(this,Un)&&(await a(this,Un).promise,!a(this,Un)))){if(g(this,Un,Promise.withResolvers()),(s=a(this,fr))==null||s.commitOrRemove(),g(this,ue,t),t===Q.NONE){this.setEditingState(!1),b(this,z,Rx).call(this),(r=this._editorUndoBar)==null||r.hide(),a(this,Un).resolve();return}t===Q.SIGNATURE&&await((o=a(this,wr))==null?void 0:o.loadSignatures()),this.setEditingState(!0),await b(this,z,Px).call(this),this.unselectAll();for(const l of a(this,Ae).values())l.updateMode(t);if(!e){i&&this.addNewEditorFromKeyboard(),a(this,Un).resolve();return}for(const l of a(this,se).values())l.annotationElementId===e||l.id===e?(this.setSelected(l),l.enterInEditMode()):l.unselect();a(this,Un).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==a(this,ue)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){var i;if(a(this,ci)){switch(t){case lt.CREATE:this.currentLayer.addNewEditor(e);return;case lt.HIGHLIGHT_DEFAULT_COLOR:(i=a(this,Io))==null||i.updateColor(e);break;case lt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,xh)||g(this,xh,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const s of a(this,mt))s.updateParams(t,e);for(const s of a(this,ci))s.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){var r;for(const o of a(this,se).values())o.editorType===t&&o.show(e);(((r=a(this,xh))==null?void 0:r.get(lt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&b(this,z,ls).call(this,[[lt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(a(this,Ah)!==t){g(this,Ah,t);for(const e of a(this,Ae).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const i of a(this,se).values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return a(this,se).get(t)}addEditor(t){a(this,se).set(t.id,t)}removeEditor(t){var e,i;t.div.contains(document.activeElement)&&(a(this,ji)&&clearTimeout(a(this,ji)),g(this,ji,setTimeout(()=>{this.focusMainContainer(),g(this,ji,null)},0))),a(this,se).delete(t.id),t.annotationElementId&&((e=a(this,vr))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!a(this,Ro).has(t.annotationElementId))&&((i=a(this,ps))==null||i.remove(t.id))}addDeletedAnnotationElement(t){a(this,Ro).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return a(this,Ro).has(t)}removeDeletedAnnotationElement(t){a(this,Ro).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){a(this,yn)!==t&&(g(this,yn,t),t&&b(this,z,ls).call(this,t.propertiesToUpdate))}updateUI(t){a(this,z,Lx)===t&&b(this,z,ls).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){b(this,z,ls).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(a(this,mt).has(t)){a(this,mt).delete(t),t.unselect(),b(this,z,We).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,mt).add(t),t.select(),b(this,z,ls).call(this,t.propertiesToUpdate),b(this,z,We).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=a(this,fr))==null||e.commitOrRemove();for(const i of a(this,mt))i!==t&&i.unselect();a(this,mt).clear(),a(this,mt).add(t),t.select(),b(this,z,ls).call(this,t.propertiesToUpdate),b(this,z,We).call(this,{hasSelectedEditor:!0})}isSelected(t){return a(this,mt).has(t)}get firstSelectedEditor(){return a(this,mt).values().next().value}unselect(t){t.unselect(),a(this,mt).delete(t),b(this,z,We).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,mt).size!==0}get isEnterHandled(){return a(this,mt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;a(this,Hn).undo(),b(this,z,We).call(this,{hasSomethingToUndo:a(this,Hn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:b(this,z,pu).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){a(this,Hn).redo(),b(this,z,We).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,Hn).hasSomethingToRedo(),isEmpty:b(this,z,pu).call(this)})}addCommands(t){a(this,Hn).add(t),b(this,z,We).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:b(this,z,pu).call(this)})}cleanUndoStack(t){a(this,Hn).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...a(this,mt)],i=()=>{var o;(o=this._editorUndoBar)==null||o.show(s,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},s=()=>{for(const o of e)b(this,z,E0).call(this,o)};this.addCommands({cmd:i,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=a(this,yn))==null||t.commitOrRemove()}hasSomethingToControl(){return a(this,yn)||this.hasSelection}selectAll(){for(const t of a(this,mt))t.commit();b(this,z,_0).call(this,a(this,se).values())}unselectAll(){var t;if(!(a(this,yn)&&(a(this,yn).commitOrRemove(),a(this,ue)!==Q.NONE))&&!((t=a(this,fr))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of a(this,mt))e.unselect();a(this,mt).clear(),b(this,z,We).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;a(this,Ar)[0]+=t,a(this,Ar)[1]+=e;const[s,r]=a(this,Ar),o=[...a(this,mt)],l=1e3;a(this,$i)&&clearTimeout(a(this,$i)),g(this,$i,setTimeout(()=>{g(this,$i,null),a(this,Ar)[0]=a(this,Ar)[1]=0,this.addCommands({cmd:()=>{for(const c of o)a(this,se).has(c.id)&&(c.translateInPage(s,r),c.translationDone())},undo:()=>{for(const c of o)a(this,se).has(c.id)&&(c.translateInPage(-s,-r),c.translationDone())},mustExec:!1})},l));for(const c of o)c.translateInPage(t,e),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),g(this,Fi,new Map);for(const t of a(this,mt))a(this,Fi).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,Fi))return!1;this.disableUserSelect(!1);const t=a(this,Fi);g(this,Fi,null);let e=!1;for(const[{x:s,y:r,pageIndex:o},l]of t)l.newX=s,l.newY=r,l.newPageIndex=o,e||(e=s!==l.savedX||r!==l.savedY||o!==l.savedPageIndex);if(!e)return!1;const i=(s,r,o,l)=>{if(a(this,se).has(s.id)){const c=a(this,Ae).get(l);c?s._setParentAndPosition(c,r,o):(s.pageIndex=l,s.x=r,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:o,newPageIndex:l}]of t)i(s,r,o,l)},undo:()=>{for(const[s,{savedX:r,savedY:o,savedPageIndex:l}]of t)i(s,r,o,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(a(this,Fi))for(const i of a(this,Fi).keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||a(this,mt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return a(this,yn)===t}getActive(){return a(this,yn)}getMode(){return a(this,ue)}get imageManager(){return rt(this,"imageManager",new v0)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,h=e.rangeCount;u<h;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:s,width:r,height:o}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(u,h,d,f)=>({x:(h-s)/o,y:1-(u+d-i)/r,width:f/o,height:d/r});break;case"180":l=(u,h,d,f)=>({x:1-(u+d-i)/r,y:1-(h+f-s)/o,width:d/r,height:f/o});break;case"270":l=(u,h,d,f)=>({x:1-(h+f-s)/o,y:(u-i)/r,width:f/o,height:d/r});break;default:l=(u,h,d,f)=>({x:(u-i)/r,y:(h-s)/o,width:d/r,height:f/o});break}const c=[];for(let u=0,h=e.rangeCount;u<h;u++){const d=e.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:y,height:m}of d.getClientRects())y===0||m===0||c.push(l(f,p,y,m))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(a(this,Il)||g(this,Il,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=a(this,Il))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=a(this,Il))==null?void 0:s.get(t.data.id);if(!e)return;const i=a(this,ps).getRawValue(e);i&&(a(this,ue)===Q.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){var r;const s=(r=a(this,vr))==null?void 0:r.get(t);s&&(s.setCanvas(e,i),a(this,vr).delete(t))}addMissingCanvas(t,e){(a(this,vr)||g(this,vr,new Map)).set(t,e)}};Ll=new WeakMap,yn=new WeakMap,se=new WeakMap,Ae=new WeakMap,Ml=new WeakMap,ps=new WeakMap,Il=new WeakMap,Hn=new WeakMap,dr=new WeakMap,fr=new WeakMap,Nl=new WeakMap,Ro=new WeakMap,Fi=new WeakMap,ci=new WeakMap,Lo=new WeakMap,yh=new WeakMap,vh=new WeakMap,Dl=new WeakMap,wh=new WeakMap,ji=new WeakMap,pr=new WeakMap,Ol=new WeakMap,gr=new WeakMap,zi=new WeakMap,Jp=new WeakMap,mr=new WeakMap,Ah=new WeakMap,yr=new WeakMap,Mo=new WeakMap,Io=new WeakMap,vr=new WeakMap,bh=new WeakMap,ue=new WeakMap,mt=new WeakMap,gs=new WeakMap,wr=new WeakMap,No=new WeakMap,xh=new WeakMap,Sh=new WeakMap,Ar=new WeakMap,$i=new WeakMap,ms=new WeakMap,Eh=new WeakMap,Un=new WeakMap,z=new WeakSet,Hf=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},A0=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of a(this,Ae).values())if(i.hasTextLayer(t))return i;return null},xx=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=b(this,z,Hf).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(a(this,zi)||g(this,zi,new gk(this)),a(this,zi).show(i,s,this.direction==="ltr"))},Sx=function(){var r,o,l;const t=document.getSelection();if(!t||t.isCollapsed){a(this,gs)&&((r=a(this,zi))==null||r.hide(),g(this,gs,null),b(this,z,We).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===a(this,gs))return;const s=b(this,z,Hf).call(this,t).closest(".textLayer");if(!s){a(this,gs)&&((o=a(this,zi))==null||o.hide(),g(this,gs,null),b(this,z,We).call(this,{hasSelectedText:!1}));return}if((l=a(this,zi))==null||l.hide(),g(this,gs,e),b(this,z,We).call(this,{hasSelectedText:!0}),!(a(this,ue)!==Q.HIGHLIGHT&&a(this,ue)!==Q.NONE)&&(a(this,ue)===Q.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),g(this,gr,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=a(this,ue)===Q.HIGHLIGHT?b(this,z,A0).call(this,s):null;c==null||c.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&b(this,z,Uf).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},Uf=function(t=""){a(this,ue)===Q.HIGHLIGHT?this.highlightSelection(t):a(this,yh)&&b(this,z,xx).call(this)},Ex=function(){document.addEventListener("selectionchange",b(this,z,Sx).bind(this),{signal:this._signal})},_x=function(){if(a(this,pr))return;g(this,pr,new AbortController);const t=this.combinedSignal(a(this,pr));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},Cx=function(){var t;(t=a(this,pr))==null||t.abort(),g(this,pr,null)},b0=function(){if(a(this,yr))return;g(this,yr,new AbortController);const t=this.combinedSignal(a(this,yr));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},kx=function(){var t;(t=a(this,yr))==null||t.abort(),g(this,yr,null)},x0=function(){if(a(this,dr))return;g(this,dr,new AbortController);const t=this.combinedSignal(a(this,dr));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},S0=function(){var t;(t=a(this,dr))==null||t.abort(),g(this,dr,null)},Tx=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},We=function(t){Object.entries(t).some(([i,s])=>a(this,Sh)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,Sh),t)}),a(this,ue)===Q.HIGHLIGHT&&t.hasSelectedEditor===!1&&b(this,z,ls).call(this,[[lt.HIGHLIGHT_FREE,!0]]))},ls=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},Px=async function(){if(!a(this,mr)){g(this,mr,!0);const t=[];for(const e of a(this,Ae).values())t.push(e.enable());await Promise.all(t);for(const e of a(this,se).values())e.enable()}},Rx=function(){if(this.unselectAll(),a(this,mr)){g(this,mr,!1);for(const t of a(this,Ae).values())t.disable();for(const t of a(this,se).values())t.disable()}},E0=function(t){const e=a(this,Ae).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},Lx=function(){let t=null;for(t of a(this,mt));return t},pu=function(){if(a(this,se).size===0)return!0;if(a(this,se).size===1)for(const t of a(this,se).values())return t.isEmpty();return!1},_0=function(t){for(const e of a(this,mt))e.unselect();a(this,mt).clear();for(const e of t)e.isEmpty()||(a(this,mt).add(e),e.select());b(this,z,We).call(this,{hasSelectedEditor:this.hasSelection})},N(yl,"TRANSLATE_SMALL",1),N(yl,"TRANSLATE_BIG",10);let ro=yl;var he,Bi,ui,Fl,Hi,vn,jl,Ui,an,ys,Do,Vi,br,Ei,gu,Vf;const Xe=class Xe{constructor(t){A(this,Ei);A(this,he,null);A(this,Bi,!1);A(this,ui,null);A(this,Fl,null);A(this,Hi,null);A(this,vn,null);A(this,jl,!1);A(this,Ui,null);A(this,an,null);A(this,ys,null);A(this,Do,null);A(this,Vi,!1);g(this,an,t),g(this,Vi,t._uiManager.useNewAltTextFlow),a(Xe,br)||g(Xe,br,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Xe._l10n??(Xe._l10n=t)}async render(){const t=g(this,ui,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=g(this,Fl,document.createElement("span"));t.append(e),a(this,Vi)?(t.classList.add("new"),t.setAttribute("data-l10n-id",a(Xe,br).missing),e.setAttribute("data-l10n-id",a(Xe,br)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=a(this,an)._uiManager._signal;t.addEventListener("contextmenu",si,{signal:i}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),a(this,an)._uiManager.editAltText(a(this,an)),a(this,Vi)&&a(this,an)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,Ei,gu)}})};return t.addEventListener("click",s,{capture:!0,signal:i}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(g(this,jl,!0),s(r))},{signal:i}),await b(this,Ei,Vf).call(this),t}finish(){a(this,ui)&&(a(this,ui).focus({focusVisible:a(this,jl)}),g(this,jl,!1))}isEmpty(){return a(this,Vi)?a(this,he)===null:!a(this,he)&&!a(this,Bi)}hasData(){return a(this,Vi)?a(this,he)!==null||!!a(this,ys):this.isEmpty()}get guessedText(){return a(this,ys)}async setGuessedText(t){a(this,he)===null&&(g(this,ys,t),g(this,Do,await Xe._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),b(this,Ei,Vf).call(this))}toggleAltTextBadge(t=!1){var e;if(!a(this,Vi)||a(this,he)){(e=a(this,Ui))==null||e.remove(),g(this,Ui,null);return}if(!a(this,Ui)){const i=g(this,Ui,document.createElement("div"));i.className="noAltTextBadge",a(this,an).div.append(i)}a(this,Ui).classList.toggle("hidden",!t)}serialize(t){let e=a(this,he);return!t&&a(this,ys)===e&&(e=a(this,Do)),{altText:e,decorative:a(this,Bi),guessedText:a(this,ys),textWithDisclaimer:a(this,Do)}}get data(){return{altText:a(this,he),decorative:a(this,Bi)}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:s,cancel:r=!1}){i&&(g(this,ys,i),g(this,Do,s)),!(a(this,he)===t&&a(this,Bi)===e)&&(r||(g(this,he,t),g(this,Bi,e)),b(this,Ei,Vf).call(this))}toggle(t=!1){a(this,ui)&&(!t&&a(this,vn)&&(clearTimeout(a(this,vn)),g(this,vn,null)),a(this,ui).disabled=!t)}shown(){a(this,an)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,Ei,gu)}})}destroy(){var t,e;(t=a(this,ui))==null||t.remove(),g(this,ui,null),g(this,Fl,null),g(this,Hi,null),(e=a(this,Ui))==null||e.remove(),g(this,Ui,null)}};he=new WeakMap,Bi=new WeakMap,ui=new WeakMap,Fl=new WeakMap,Hi=new WeakMap,vn=new WeakMap,jl=new WeakMap,Ui=new WeakMap,an=new WeakMap,ys=new WeakMap,Do=new WeakMap,Vi=new WeakMap,br=new WeakMap,Ei=new WeakSet,gu=function(){return a(this,he)&&"added"||a(this,he)===null&&this.guessedText&&"review"||"missing"},Vf=async function(){var s,r,o;const t=a(this,ui);if(!t)return;if(a(this,Vi)){if(t.classList.toggle("done",!!a(this,he)),t.setAttribute("data-l10n-id",a(Xe,br)[a(this,Ei,gu)]),(s=a(this,Fl))==null||s.setAttribute("data-l10n-id",a(Xe,br)[`${a(this,Ei,gu)}-label`]),!a(this,he)){(r=a(this,Hi))==null||r.remove();return}}else{if(!a(this,he)&&!a(this,Bi)){t.classList.remove("done"),(o=a(this,Hi))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=a(this,Hi);if(!e){g(this,Hi,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${a(this,an).id}`;const l=100,c=a(this,an)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(a(this,vn)),g(this,vn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{g(this,vn,setTimeout(()=>{g(this,vn,null),a(this,Hi).classList.add("show"),a(this,an)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),t.addEventListener("mouseleave",()=>{var u;a(this,vn)&&(clearTimeout(a(this,vn)),g(this,vn,null)),(u=a(this,Hi))==null||u.classList.remove("show")},{signal:c})}a(this,Bi)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=a(this,he)),e.parentNode||t.append(e);const i=a(this,an).getElementForAltText();i==null||i.setAttribute("aria-describedby",e.id)},A(Xe,br,null),N(Xe,"_l10n",null);let Up=Xe;var zl,Oo,_h,Ch,kh,Th,Ph,vs,Fo,ws,jo,As,ao,Mx,Ix,Nx;const $1=class $1{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:s=null,onPinching:r=null,onPinchEnd:o=null,signal:l}){A(this,ao);A(this,zl);A(this,Oo,!1);A(this,_h,null);A(this,Ch);A(this,kh);A(this,Th);A(this,Ph);A(this,vs,null);A(this,Fo);A(this,ws,null);A(this,jo);A(this,As,null);g(this,zl,t),g(this,_h,i),g(this,Ch,e),g(this,kh,s),g(this,Th,r),g(this,Ph,o),g(this,jo,new AbortController),g(this,Fo,AbortSignal.any([l,a(this,jo).signal])),t.addEventListener("touchstart",b(this,ao,Mx).bind(this),{passive:!1,signal:a(this,Fo)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ti.pixelRatio}destroy(){var t,e;(t=a(this,jo))==null||t.abort(),g(this,jo,null),(e=a(this,vs))==null||e.abort(),g(this,vs,null)}};zl=new WeakMap,Oo=new WeakMap,_h=new WeakMap,Ch=new WeakMap,kh=new WeakMap,Th=new WeakMap,Ph=new WeakMap,vs=new WeakMap,Fo=new WeakMap,ws=new WeakMap,jo=new WeakMap,As=new WeakMap,ao=new WeakSet,Mx=function(t){var s,r,o;if((s=a(this,Ch))!=null&&s.call(this))return;if(t.touches.length===1){if(a(this,vs))return;const l=g(this,vs,new AbortController),c=AbortSignal.any([a(this,Fo),l.signal]),u=a(this,zl),h={capture:!0,signal:c,passive:!1},d=f=>{var p;f.pointerType==="touch"&&((p=a(this,vs))==null||p.abort(),g(this,vs,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(qt(f),d(f))},h),u.addEventListener("pointerup",d,h),u.addEventListener("pointercancel",d,h);return}if(!a(this,As)){g(this,As,new AbortController);const l=AbortSignal.any([a(this,Fo),a(this,As).signal]),c=a(this,zl),u={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",b(this,ao,Ix).bind(this),u);const h=b(this,ao,Nx).bind(this);c.addEventListener("touchend",h,u),c.addEventListener("touchcancel",h,u),u.capture=!0,c.addEventListener("pointerdown",qt,u),c.addEventListener("pointermove",qt,u),c.addEventListener("pointercancel",qt,u),c.addEventListener("pointerup",qt,u),(r=a(this,kh))==null||r.call(this)}if(qt(t),t.touches.length!==2||(o=a(this,_h))!=null&&o.call(this)){g(this,ws,null);return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),g(this,ws,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY})},Ix=function(t){var E;if(!a(this,ws)||t.touches.length!==2)return;qt(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:s,screenY:r}=e,{screenX:o,screenY:l}=i,c=a(this,ws),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=c,p=d-u,y=f-h,m=o-s,S=l-r,v=Math.hypot(m,S)||1,w=Math.hypot(p,y)||1;if(!a(this,Oo)&&Math.abs(w-v)<=$1.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=s,c.touch0Y=r,c.touch1X=o,c.touch1Y=l,!a(this,Oo)){g(this,Oo,!0);return}const x=[(s+o)/2,(r+l)/2];(E=a(this,Th))==null||E.call(this,x,w,v)},Nx=function(t){var e;t.touches.length>=2||(a(this,As)&&(a(this,As).abort(),g(this,As,null),(e=a(this,Ph))==null||e.call(this)),a(this,ws)&&(qt(t),g(this,ws,null),g(this,Oo,!1)))};let oh=$1;var zo,hi,Tt,$l,xr,Rh,$o,be,Bo,bs,Sr,Lh,Ho,wn,Mh,Uo,xs,Gi,Bl,Hl,Vn,Vo,Ih,tg,q,C0,Nh,k0,Gf,Dx,Ox,T0,Wf,P0,Fx,jx,zx,R0,$x,L0,Bx,Hx,Ux,M0,mu;const it=class it{constructor(t){A(this,q);A(this,zo,null);A(this,hi,null);A(this,Tt,null);A(this,$l,!1);A(this,xr,null);A(this,Rh,"");A(this,$o,!1);A(this,be,null);A(this,Bo,null);A(this,bs,null);A(this,Sr,null);A(this,Lh,"");A(this,Ho,!1);A(this,wn,null);A(this,Mh,!1);A(this,Uo,!1);A(this,xs,!1);A(this,Gi,null);A(this,Bl,0);A(this,Hl,0);A(this,Vn,null);A(this,Vo,null);N(this,"isSelected",!1);N(this,"_isCopy",!1);N(this,"_editToolbar",null);N(this,"_initialOptions",Object.create(null));N(this,"_initialData",null);N(this,"_isVisible",!0);N(this,"_uiManager",null);N(this,"_focusEventsAllowed",!0);A(this,Ih,!1);A(this,tg,it._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[r,o];const[l,c]=this.parentDimensions;this.x=t.x/l,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=it.prototype._resizeWithKeyboard,e=ro.TRANSLATE_SMALL,i=ro.TRANSLATE_BIG;return rt(this,"_resizerKeyboardManager",new Xd([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],it.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return rt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new vk({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(it._l10n??(it._l10n=t),it._l10nResizer||(it._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),it._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);it._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){At("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,Ih)}set _isDraggable(t){var e;g(this,Ih,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,tg)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):b(this,q,mu).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(a(this,Ho)?g(this,Ho,!1):this.parent.setSelected(this))}focusout(t){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,s){const[r,o]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(t+i)/r,this.y=(e+s)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,s]=this.parentDimensions;this.setAt(t*i,e*s,this.width*i,this.height*s),this._onTranslated()}translate(t,e){b(this,q,C0).call(this,this.parentDimensions,t,e)}translateInPage(t,e){a(this,wn)||g(this,wn,[this.x,this.y,this.width,this.height]),b(this,q,C0).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){a(this,wn)||g(this,wn,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[s,r]}=this;if(this.x+=t/s,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,u]=this.getBaseTranslation();o+=c,l+=u;const{style:h}=i;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!a(this,wn)&&(a(this,wn)[0]!==this.x||a(this,wn)[1]!==this.y)}get _hasBeenResized(){return!!a(this,wn)&&(a(this,wn)[2]!==this.width||a(this,wn)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=it,s=i/t,r=i/e;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,s]}=this;let{x:r,y:o,width:l,height:c}=this;if(l*=i,c*=s,r*=i,o*=s,this._mustFixPosition)switch(t){case 0:r=ze(r,0,i-l),o=ze(o,0,s-c);break;case 90:r=ze(r,0,i-c),o=ze(o,l,s);break;case 180:r=ze(r,l,i),o=ze(o,c,s);break;case 270:r=ze(r,c,i),o=ze(o,0,s-l);break}this.x=r/=i,this.y=o/=s;const[u,h]=this.getBaseTranslation();r+=u,o+=h,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var i;return b(i=it,Nh,k0).call(i,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var i;return b(i=it,Nh,k0).call(i,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,s]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/i).toFixed(2)}%`,a(this,$o)||(r.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,s=i.endsWith("%"),r=!a(this,$o)&&e.endsWith("%");if(s&&r)return;const[o,l]=this.parentDimensions;s||(t.width=`${(100*parseFloat(i)/o).toFixed(2)}%`),!a(this,$o)&&!r&&(t.height=`${(100*parseFloat(e)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=a(this,Tt))==null||t.finish()}async addEditToolbar(){return this._editToolbar||a(this,Uo)?this._editToolbar:(this._editToolbar=new y0(this),this.div.append(this._editToolbar.render()),a(this,Tt)&&await this._editToolbar.addAltText(a(this,Tt)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=a(this,Tt))==null||t.destroy())}addContainer(t){var i;const e=(i=this._editToolbar)==null?void 0:i.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){a(this,Tt)||(Up.initialize(it._l10n),g(this,Tt,new Up(this)),a(this,zo)&&(a(this,Tt).data=a(this,zo),g(this,zo,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=a(this,Tt))==null?void 0:t.data}set altTextData(t){a(this,Tt)&&(a(this,Tt).data=t)}get guessedAltText(){var t;return(t=a(this,Tt))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=a(this,Tt))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=a(this,Tt))==null?void 0:e.serialize(t)}hasAltText(){return!!a(this,Tt)&&!a(this,Tt).isEmpty()}hasAltTextData(){var t;return((t=a(this,Tt))==null?void 0:t.hasData())??!1}render(){var o;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=a(this,$l)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),b(this,q,L0).call(this);const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),Ax(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,Vo)||g(this,Vo,new oh({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:b(this,q,Fx).bind(this),onPinching:b(this,q,jx).bind(this),onPinchEnd:b(this,q,zx).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),t}pointerdown(t){const{isMac:e}=ve.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(g(this,Ho,!0),this._isDraggable){b(this,q,$x).call(this,t);return}b(this,q,R0).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,Gi)&&clearTimeout(a(this,Gi)),g(this,Gi,setTimeout(()=>{var t;g(this,Gi,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const s=this.parentScale,[r,o]=this.pageDimensions,[l,c]=this.pageTranslation,u=t/s,h=e/s,d=this.x*r,f=this.y*o,p=this.width*r,y=this.height*o;switch(i){case 0:return[d+u+l,o-f-h-y+c,d+u+p+l,o-f-h+c];case 90:return[d+h+l,o-f+u+c,d+h+y+l,o-f+u+p+c];case 180:return[d-u-p+l,o-f+h+c,d-u+l,o-f+h+y+c];case 270:return[d-h-y+l,o-f-u-p+c,d-h+l,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,s,r,o]=t,l=r-i,c=o-s;switch(this.rotation){case 0:return[i,e-o,l,c];case 90:return[i,e-s,c,l];case 180:return[r,e-s,l,c];case 270:return[r,e-o,c,l];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),g(this,Uo,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),g(this,Uo,!1),!0):!1}isInEditMode(){return a(this,Uo)}shouldGetKeyboardEvents(){return a(this,xs)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:s}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&s>0&&t<r&&i>0}rebuild(){b(this,q,L0).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){At("An editor must be serializable")}static async deserialize(t,e,i){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});s.rotation=t.rotation,g(s,zo,t.accessibilityData),s._isCopy=t.isCopy||!1;const[r,o]=s.pageDimensions,[l,c,u,h]=s.getRectInCurrentCoords(t.rect,o);return s.x=l/r,s.y=c/o,s.width=u/r,s.height=h/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=a(this,Sr))==null||t.abort(),g(this,Sr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,Gi)&&(clearTimeout(a(this,Gi)),g(this,Gi,null)),b(this,q,mu).call(this),this.removeEditToolbar(),a(this,Vn)){for(const i of a(this,Vn).values())clearTimeout(i);g(this,Vn,null)}this.parent=null,(e=a(this,Vo))==null||e.destroy(),g(this,Vo,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(b(this,q,Dx).call(this),a(this,be).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),g(this,bs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=a(this,be).children;if(!a(this,hi)){g(this,hi,Array.from(e));const o=b(this,q,Bx).bind(this),l=b(this,q,Hx).bind(this),c=this._uiManager._signal;for(const u of a(this,hi)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",l,{signal:c}),u.addEventListener("focus",b(this,q,Ux).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",it._l10nResizer[h])}}const i=a(this,hi)[0];let s=0;for(const o of e){if(o===i)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(a(this,hi).length/4);if(r!==s){if(r<s)for(let l=0;l<s-r;l++)a(this,be).append(a(this,be).firstChild);else if(r>s)for(let l=0;l<r-s;l++)a(this,be).firstChild.before(a(this,be).lastChild);let o=0;for(const l of e){const u=a(this,hi)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",it._l10nResizer[u])}}b(this,q,M0).call(this,0),g(this,xs,!0),a(this,be).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){a(this,xs)&&b(this,q,P0).call(this,a(this,Lh),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){b(this,q,mu).call(this),this.div.focus()}select(){var t,e,i;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(i=a(this,Tt))==null||i.toggleAltTextBadge(!1)}}unselect(){var t,e,i,s,r;this.isSelected&&(this.isSelected=!1,(t=a(this,be))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=a(this,Tt))==null||r.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return a(this,Mh)}set isEditing(t){g(this,Mh,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){g(this,$o,!0);const i=t/e,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){a(this,Vn)||g(this,Vn,new Map);const{action:i}=t;let s=a(this,Vn).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),a(this,Vn).delete(i),a(this,Vn).size===0&&g(this,Vn,null)},it._telemetryTimeout),a(this,Vn).set(i,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),g(this,$l,!1)}disable(){this.div&&(this.div.tabIndex=-1),g(this,$l,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};zo=new WeakMap,hi=new WeakMap,Tt=new WeakMap,$l=new WeakMap,xr=new WeakMap,Rh=new WeakMap,$o=new WeakMap,be=new WeakMap,Bo=new WeakMap,bs=new WeakMap,Sr=new WeakMap,Lh=new WeakMap,Ho=new WeakMap,wn=new WeakMap,Mh=new WeakMap,Uo=new WeakMap,xs=new WeakMap,Gi=new WeakMap,Bl=new WeakMap,Hl=new WeakMap,Vn=new WeakMap,Vo=new WeakMap,Ih=new WeakMap,tg=new WeakMap,q=new WeakSet,C0=function([t,e],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Nh=new WeakSet,k0=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Gf=function(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}},Dx=function(){if(a(this,be))return;g(this,be,document.createElement("div")),a(this,be).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const s=document.createElement("div");a(this,be).append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",b(this,q,Ox).bind(this,i),{signal:e}),s.addEventListener("contextmenu",si,{signal:e}),s.tabIndex=-1}this.div.prepend(a(this,be))},Ox=function(t,e){var h;e.preventDefault();const{isMac:i}=ve.platform;if(e.button!==0||e.ctrlKey&&i)return;(h=a(this,Tt))==null||h.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,g(this,Bo,[e.screenX,e.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",b(this,q,P0).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",qt,{passive:!1,signal:o}),window.addEventListener("contextmenu",si,{signal:o}),g(this,bs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=a(this,Tt))==null||d.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=l,this.div.style.cursor=c,b(this,q,Wf).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},T0=function(t,e,i,s){this.width=i,this.height=s,this.x=t,this.y=e;const[r,o]=this.parentDimensions;this.setDims(r*i,o*s),this.fixAndSetPosition(),this._onResized()},Wf=function(){if(!a(this,bs))return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:s}=a(this,bs);g(this,bs,null);const r=this.x,o=this.y,l=this.width,c=this.height;r===t&&o===e&&l===i&&c===s||this.addCommands({cmd:b(this,q,T0).bind(this,r,o,l,c),undo:b(this,q,T0).bind(this,t,e,i,s),mustExec:!0})},P0=function(t,e){const[i,s]=this.parentDimensions,r=this.x,o=this.y,l=this.width,c=this.height,u=it.MIN_SIZE/i,h=it.MIN_SIZE/s,d=b(this,q,Gf).call(this,this.rotation),f=(F,j)=>[d[0]*F+d[2]*j,d[1]*F+d[3]*j],p=b(this,q,Gf).call(this,360-this.rotation),y=(F,j)=>[p[0]*F+p[2]*j,p[1]*F+p[3]*j];let m,S,v=!1,w=!1;switch(t){case"topLeft":v=!0,m=(F,j)=>[0,0],S=(F,j)=>[F,j];break;case"topMiddle":m=(F,j)=>[F/2,0],S=(F,j)=>[F/2,j];break;case"topRight":v=!0,m=(F,j)=>[F,0],S=(F,j)=>[0,j];break;case"middleRight":w=!0,m=(F,j)=>[F,j/2],S=(F,j)=>[0,j/2];break;case"bottomRight":v=!0,m=(F,j)=>[F,j],S=(F,j)=>[0,0];break;case"bottomMiddle":m=(F,j)=>[F/2,j],S=(F,j)=>[F/2,0];break;case"bottomLeft":v=!0,m=(F,j)=>[0,j],S=(F,j)=>[F,0];break;case"middleLeft":w=!0,m=(F,j)=>[0,j/2],S=(F,j)=>[F,j/2];break}const x=m(l,c),E=S(l,c);let _=f(...E);const T=it._round(r+_[0]),k=it._round(o+_[1]);let P=1,L=1,R,M;if(e.fromKeyboard)({deltaX:R,deltaY:M}=e);else{const{screenX:F,screenY:j}=e,[O,V]=a(this,Bo);[R,M]=this.screenToPageTranslation(F-O,j-V),a(this,Bo)[0]=F,a(this,Bo)[1]=j}if([R,M]=y(R/i,M/s),v){const F=Math.hypot(l,c);P=L=Math.max(Math.min(Math.hypot(E[0]-x[0]-R,E[1]-x[1]-M)/F,1/l,1/c),u/l,h/c)}else w?P=ze(Math.abs(E[0]-x[0]-R),u,1)/l:L=ze(Math.abs(E[1]-x[1]-M),h,1)/c;const Y=it._round(l*P),Z=it._round(c*L);_=f(...S(Y,Z));const K=T-_[0],nt=k-_[1];a(this,wn)||g(this,wn,[this.x,this.y,this.width,this.height]),this.width=Y,this.height=Z,this.x=K,this.y=nt,this.setDims(i*Y,s*Z),this.fixAndSetPosition(),this._onResizing()},Fx=function(){var t;g(this,bs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=a(this,Tt))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},jx=function(t,e,i){let r=.7*(i/e)+1-.7;if(r===1)return;const o=b(this,q,Gf).call(this,this.rotation),l=(T,k)=>[o[0]*T+o[2]*k,o[1]*T+o[3]*k],[c,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,p=this.height,y=it.MIN_SIZE/c,m=it.MIN_SIZE/u;r=Math.max(Math.min(r,1/f,1/p),y/f,m/p);const S=it._round(f*r),v=it._round(p*r);if(S===f&&v===p)return;a(this,wn)||g(this,wn,[h,d,f,p]);const w=l(f/2,p/2),x=it._round(h+w[0]),E=it._round(d+w[1]),_=l(S/2,v/2);this.x=x-_[0],this.y=E-_[1],this.width=S,this.height=v,this.setDims(c*S,u*v),this.fixAndSetPosition(),this._onResizing()},zx=function(){var t;(t=a(this,Tt))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),b(this,q,Wf).call(this)},R0=function(t){const{isMac:e}=ve.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},$x=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:r},l=u=>{s.abort(),g(this,xr,null),g(this,Ho,!1),this._uiManager.endDragSession()||b(this,q,R0).call(this,u),i&&this._onStopDragging()};e&&(g(this,Bl,t.clientX),g(this,Hl,t.clientY),g(this,xr,t.pointerId),g(this,Rh,t.pointerType),window.addEventListener("pointermove",u=>{i||(i=!0,this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==a(this,xr)){qt(u);return}const[p,y]=this.screenToPageTranslation(h-a(this,Bl),d-a(this,Hl));g(this,Bl,h),g(this,Hl,d),this._uiManager.dragSelectedEditors(p,y)},o),window.addEventListener("touchmove",qt,o),window.addEventListener("pointerdown",u=>{u.pointerType===a(this,Rh)&&(a(this,Vo)||u.isPrimary)&&l(u),qt(u)},o));const c=u=>{if(!a(this,xr)||a(this,xr)===u.pointerId){l(u);return}qt(u)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},L0=function(){if(a(this,Sr)||!this.div)return;g(this,Sr,new AbortController);const t=this._uiManager.combinedSignal(a(this,Sr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},Bx=function(t){it._resizerKeyboardManager.exec(this,t)},Hx=function(t){var e;a(this,xs)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==a(this,be)&&b(this,q,mu).call(this)},Ux=function(t){g(this,Lh,a(this,xs)?t:"")},M0=function(t){if(a(this,hi))for(const e of a(this,hi))e.tabIndex=t},mu=function(){g(this,xs,!1),b(this,q,M0).call(this,-1),b(this,q,Wf).call(this)},A(it,Nh),N(it,"_l10n",null),N(it,"_l10nResizer",null),N(it,"_borderLineWidth",-1),N(it,"_colorManager",new w0),N(it,"_zIndex",1),N(it,"_telemetryTimeout",1e3);let Ct=it;class vk extends Ct{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const cw=3285377520,$n=4294901760,Ni=65535;class Vx{constructor(t){this.h1=t?t&4294967295:cw,this.h2=t?t&4294967295:cw}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let m=0,S=t.length;m<S;m++){const v=t.charCodeAt(m);v<=255?e[i++]=v:(e[i++]=v>>>8,e[i++]=v&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,r=i-s*4,o=new Uint32Array(e.buffer,0,s);let l=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&Ni,y=f&Ni;for(let m=0;m<s;m++)m&1?(l=o[m],l=l*d&$n|l*p&Ni,l=l<<15|l>>>17,l=l*f&$n|l*y&Ni,u^=l,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[m],c=c*d&$n|c*p&Ni,c=c<<15|c>>>17,c=c*f&$n|c*y&Ni,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,r){case 3:l^=e[s*4+2]<<16;case 2:l^=e[s*4+1]<<8;case 1:l^=e[s*4],l=l*d&$n|l*p&Ni,l=l<<15|l>>>17,l=l*f&$n|l*y&Ni,s&1?u^=l:h^=l}this.h1=u,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&$n|t*36045&Ni,e=e*4283543511&$n|((e<<16|t>>>16)*2950163797&$n)>>>16,t^=e>>>1,t=t*444984403&$n|t*60499&Ni,e=e*3301882366&$n|((e<<16|t>>>16)*3120437893&$n)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const I0=Object.freeze({map:null,hash:"",transfer:void 0});var Go,Wo,xe,eg,Gx;class P1{constructor(){A(this,eg);A(this,Go,!1);A(this,Wo,null);A(this,xe,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=a(this,xe).get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return a(this,xe).get(t)}remove(t){if(a(this,xe).delete(t),a(this,xe).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of a(this,xe).values())if(e instanceof Ct)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=a(this,xe).get(t);let s=!1;if(i!==void 0)for(const[r,o]of Object.entries(e))i[r]!==o&&(s=!0,i[r]=o);else s=!0,a(this,xe).set(t,e);s&&b(this,eg,Gx).call(this),e instanceof Ct&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return a(this,xe).has(t)}get size(){return a(this,xe).size}resetModified(){a(this,Go)&&(g(this,Go,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Wx(this)}get serializable(){if(a(this,xe).size===0)return I0;const t=new Map,e=new Vx,i=[],s=Object.create(null);let r=!1;for(const[o,l]of a(this,xe)){const c=l instanceof Ct?l.serialize(!1,s):l;c&&(t.set(o,c),e.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of t.values())o.bitmap&&i.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:I0}get editorStats(){let t=null;const e=new Map;for(const i of a(this,xe).values()){if(!(i instanceof Ct))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:r}=s;e.has(r)||e.set(r,Object.getPrototypeOf(i).constructor),t||(t=Object.create(null));const o=t[r]||(t[r]=new Map);for(const[l,c]of Object.entries(s)){if(l==="type")continue;let u=o.get(l);u||(u=new Map,o.set(l,u));const h=u.get(c)??0;u.set(c,h+1)}}for(const[i,s]of e)t[i]=s.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){g(this,Wo,null)}get modifiedIds(){if(a(this,Wo))return a(this,Wo);const t=[];for(const e of a(this,xe).values())!(e instanceof Ct)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return g(this,Wo,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return a(this,xe).entries()}}Go=new WeakMap,Wo=new WeakMap,xe=new WeakMap,eg=new WeakSet,Gx=function(){a(this,Go)||(g(this,Go,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Dh;class Wx extends P1{constructor(e){super();A(this,Dh);const{map:i,hash:s,transfer:r}=e.serializable,o=structuredClone(i,r?{transfer:r}:null);g(this,Dh,{map:o,hash:s,transfer:r})}get print(){At("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,Dh)}get modifiedIds(){return rt(this,"modifiedIds",{ids:new Set,hash:""})}}Dh=new WeakMap;var Ul;class wk{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){A(this,Ul,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),a(this,Ul).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||a(this,Ul).has(t.loadedName))){if(te(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:r,style:o}=t,l=new FontFace(s,r,o);this.addNativeFontFace(l);try{await l.load(),a(this,Ul).add(s),i==null||i(t)}catch{J(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}At("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw J(`Failed to load font '${i.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return rt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return rt(this,"isSyncFontLoadingSupported",Qe||ve.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(te(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:e,callback:t};return i.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return rt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(E,_){return E.charCodeAt(_)<<24|E.charCodeAt(_+1)<<16|E.charCodeAt(_+2)<<8|E.charCodeAt(_+3)&255}function s(E,_,T,k){const P=E.substring(0,_),L=E.substring(_+T);return P+k+L}let r,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let u=0;function h(E,_){if(++u>30){J("Load test font never loaded."),_();return}if(c.font="30px "+E,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){_();return}setTimeout(h.bind(null,E,_))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,d.length,d);const y=16,m=1482184792;let S=i(f,y);for(r=0,o=d.length-3;r<o;r+=4)S=S-m+i(d,r)|0;r<d.length&&(S=S-m+i(d+"XXX",r)|0),f=s(f,y,4,ak(S));const v=`url(data:font/opentype;base64,${btoa(f)});`,w=`@font-face {font-family:"${d}";src:${v}}`;this.insertRule(w);const x=this._document.createElement("div");x.style.visibility="hidden",x.style.width=x.style.height="10px",x.style.position="absolute",x.style.top=x.style.left="0px";for(const E of[t.loadedName,d]){const _=this._document.createElement("span");_.textContent="Hi",_.style.fontFamily=E,x.append(_)}this._document.body.append(x),h(d,()=>{x.remove(),e.complete()})}}Ul=new WeakMap;class Ak{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const i in t)this[i]=t[i];this._inspectFont=e}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${cx(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(i=this._inspectFont)==null||i.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let s;try{s=t.get(i)}catch(o){J(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(s||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=r}}function bk(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Qe)return n;const t=URL.parse(n,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function xk(n){if(Qe&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Vd(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function bf(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const N0=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,Sk=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",Xx=hk.bind(null,N0,Sk);var Ss,ng;class Ek{constructor(){A(this,Ss,new Map);A(this,ng,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};a(this,ng).then(()=>{for(const[s]of a(this,Ss))s.call(this,i)})}addEventListener(t,e,i=null){let s=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:r}=i;if(r.aborted){J("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);s=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}a(this,Ss).set(e,s)}removeEventListener(t,e){const i=a(this,Ss).get(e);i==null||i(),a(this,Ss).delete(e)}terminate(){for(const[,t]of a(this,Ss))t==null||t();a(this,Ss).clear()}}Ss=new WeakMap,ng=new WeakMap;const xf={DATA:1,ERROR:2},Zt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function uw(){}function rn(n){if(n instanceof Zs||n instanceof Bp||n instanceof ow||n instanceof rh||n instanceof mm)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||At('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Zs(n.message);case"InvalidPDFException":return new Bp(n.message);case"PasswordException":return new ow(n.message,n.code);case"ResponseException":return new rh(n.message,n.status,n.missing);case"UnknownErrorException":return new mm(n.message,n.details)}return new mm(n.message,n.toString())}var Vl,ei,Kx,qx,Yx,Xf;class yu{constructor(t,e,i){A(this,ei);A(this,Vl,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",b(this,ei,Kx).bind(this),{signal:a(this,Vl).signal})}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},i)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,i,s){const r=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:t,streamId:r,data:e,desiredSize:u.desiredSize},s),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:o,targetName:l,stream:Zt.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{te(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:Zt.CANCEL,streamId:r,reason:rn(u)}),h.promise}},i)}destroy(){var t;(t=a(this,Vl))==null||t.abort(),g(this,Vl,null)}}Vl=new WeakMap,ei=new WeakSet,Kx=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){b(this,ei,Yx).call(this,t);return}if(t.callback){const i=t.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===xf.DATA)s.resolve(t.data);else if(t.callback===xf.ERROR)s.reject(rn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,s=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:i,targetName:s,callback:xf.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:i,targetName:s,callback:xf.ERROR,callbackId:t.callbackId,reason:rn(o)})});return}if(t.streamId){b(this,ei,qx).call(this,t);return}e(t.data)},qx=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,r=this.comObj,o=this,l=this.actionHandler[t.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:s,stream:Zt.ENQUEUE,streamId:e,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:Zt.CLOSE,streamId:e}),delete o.streamSinks[e])},error(u){te(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:Zt.ERROR,streamId:e,reason:rn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(l,t.data,c).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Zt.START_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:Zt.START_COMPLETE,streamId:e,reason:rn(u)})})},Yx=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,r=this.comObj,o=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case Zt.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(rn(t.reason));break;case Zt.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(rn(t.reason));break;case Zt.PULL:if(!l){r.postMessage({sourceName:i,targetName:s,stream:Zt.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,Promise.try(l.onPull||uw).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Zt.PULL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:Zt.PULL_COMPLETE,streamId:e,reason:rn(u)})});break;case Zt.ENQUEUE:if(te(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case Zt.CLOSE:if(te(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),b(this,ei,Xf).call(this,o,e);break;case Zt.ERROR:te(o,"error should have stream controller"),o.controller.error(rn(t.reason)),b(this,ei,Xf).call(this,o,e);break;case Zt.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(rn(t.reason)),b(this,ei,Xf).call(this,o,e);break;case Zt.CANCEL:if(!l)break;const c=rn(t.reason);Promise.try(l.onCancel||uw,c).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Zt.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:Zt.CANCEL_COMPLETE,streamId:e,reason:rn(u)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Xf=async function(t,e){var i,s,r;await Promise.allSettled([(i=t.startCall)==null?void 0:i.promise,(s=t.pullCall)==null?void 0:s.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var Oh;class Qx{constructor({enableHWA:t=!1}){A(this,Oh,!1);g(this,Oh,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!a(this,Oh)})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){At("Abstract method `_createCanvas` called.")}}Oh=new WeakMap;class _k extends Qx{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class Zx{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){At("Abstract method `_fetch` called.")}}class hw extends Zx{async _fetch(t){const e=await Xc(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Vd(e)}}class Jx{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,s,r){return"none"}destroy(t=!1){}}var Xo,Gl,Es,_s,Oe,Ko,qo,$,Ne,vu,Za,Kf,Ja,tS,D0,tl,wu,Au,O0,bu;class Ck extends Jx{constructor({docId:e,ownerDocument:i=globalThis.document}){super();A(this,$);A(this,Xo);A(this,Gl);A(this,Es);A(this,_s);A(this,Oe);A(this,Ko);A(this,qo,0);g(this,_s,e),g(this,Oe,i)}addFilter(e){if(!e)return"none";let i=a(this,$,Ne).get(e);if(i)return i;const[s,r,o]=b(this,$,Kf).call(this,e),l=e.length===1?s:`${s}${r}${o}`;if(i=a(this,$,Ne).get(l),i)return a(this,$,Ne).set(e,i),i;const c=`g_${a(this,_s)}_transfer_map_${Ge(this,qo)._++}`,u=b(this,$,Ja).call(this,c);a(this,$,Ne).set(e,u),a(this,$,Ne).set(l,u);const h=b(this,$,tl).call(this,c);return b(this,$,Au).call(this,s,r,o,h),u}addHCMFilter(e,i){var y;const s=`${e}-${i}`,r="base";let o=a(this,$,vu).get(r);if((o==null?void 0:o.key)===s||(o?((y=o.filter)==null||y.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},a(this,$,vu).set(r,o)),!e||!i))return o.url;const l=b(this,$,bu).call(this,e);e=W.makeHexColor(...l);const c=b(this,$,bu).call(this,i);if(i=W.makeHexColor(...c),a(this,$,Za).style.color="",e==="#000000"&&i==="#ffffff"||e===i)return o.url;const u=new Array(256);for(let m=0;m<=255;m++){const S=m/255;u[m]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const h=u.join(","),d=`g_${a(this,_s)}_hcm_filter`,f=o.filter=b(this,$,tl).call(this,d);b(this,$,Au).call(this,h,h,h,f),b(this,$,D0).call(this,f);const p=(m,S)=>{const v=l[m]/255,w=c[m]/255,x=new Array(S+1);for(let E=0;E<=S;E++)x[E]=v+E/S*(w-v);return x.join(",")};return b(this,$,Au).call(this,p(0,5),p(1,5),p(2,5),f),o.url=b(this,$,Ja).call(this,d),o.url}addAlphaFilter(e){let i=a(this,$,Ne).get(e);if(i)return i;const[s]=b(this,$,Kf).call(this,[e]),r=`alpha_${s}`;if(i=a(this,$,Ne).get(r),i)return a(this,$,Ne).set(e,i),i;const o=`g_${a(this,_s)}_alpha_map_${Ge(this,qo)._++}`,l=b(this,$,Ja).call(this,o);a(this,$,Ne).set(e,l),a(this,$,Ne).set(r,l);const c=b(this,$,tl).call(this,o);return b(this,$,O0).call(this,s,c),l}addLuminosityFilter(e){let i=a(this,$,Ne).get(e||"luminosity");if(i)return i;let s,r;if(e?([s]=b(this,$,Kf).call(this,[e]),r=`luminosity_${s}`):r="luminosity",i=a(this,$,Ne).get(r),i)return a(this,$,Ne).set(e,i),i;const o=`g_${a(this,_s)}_luminosity_map_${Ge(this,qo)._++}`,l=b(this,$,Ja).call(this,o);a(this,$,Ne).set(e,l),a(this,$,Ne).set(r,l);const c=b(this,$,tl).call(this,o);return b(this,$,tS).call(this,c),e&&b(this,$,O0).call(this,s,c),l}addHighlightHCMFilter(e,i,s,r,o){var w;const l=`${i}-${s}-${r}-${o}`;let c=a(this,$,vu).get(e);if((c==null?void 0:c.key)===l||(c?((w=c.filter)==null||w.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},a(this,$,vu).set(e,c)),!i||!s))return c.url;const[u,h]=[i,s].map(b(this,$,bu).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,y]=[r,o].map(b(this,$,bu).bind(this));f<d&&([d,f,p,y]=[f,d,y,p]),a(this,$,Za).style.color="";const m=(x,E,_)=>{const T=new Array(256),k=(f-d)/_,P=x/255,L=(E-x)/(255*_);let R=0;for(let M=0;M<=_;M++){const Y=Math.round(d+M*k),Z=P+M*L;for(let K=R;K<=Y;K++)T[K]=Z;R=Y+1}for(let M=R;M<256;M++)T[M]=T[R-1];return T.join(",")},S=`g_${a(this,_s)}_hcm_${e}_filter`,v=c.filter=b(this,$,tl).call(this,S);return b(this,$,D0).call(this,v),b(this,$,Au).call(this,m(p[0],y[0],5),m(p[1],y[1],5),m(p[2],y[2],5),v),c.url=b(this,$,Ja).call(this,S),c.url}destroy(e=!1){var i,s,r,o;e&&((i=a(this,Ko))!=null&&i.size)||((s=a(this,Es))==null||s.parentNode.parentNode.remove(),g(this,Es,null),(r=a(this,Gl))==null||r.clear(),g(this,Gl,null),(o=a(this,Ko))==null||o.clear(),g(this,Ko,null),g(this,qo,0))}}Xo=new WeakMap,Gl=new WeakMap,Es=new WeakMap,_s=new WeakMap,Oe=new WeakMap,Ko=new WeakMap,qo=new WeakMap,$=new WeakSet,Ne=function(){return a(this,Gl)||g(this,Gl,new Map)},vu=function(){return a(this,Ko)||g(this,Ko,new Map)},Za=function(){if(!a(this,Es)){const e=a(this,Oe).createElement("div"),{style:i}=e;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=a(this,Oe).createElementNS(as,"svg");s.setAttribute("width",0),s.setAttribute("height",0),g(this,Es,a(this,Oe).createElementNS(as,"defs")),e.append(s),s.append(a(this,Es)),a(this,Oe).body.append(e)}return a(this,Es)},Kf=function(e){if(e.length===1){const u=e[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[i,s,r]=e,o=new Array(256),l=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=i[u]/255,l[u]=s[u]/255,c[u]=r[u]/255;return[o.join(","),l.join(","),c.join(",")]},Ja=function(e){if(a(this,Xo)===void 0){g(this,Xo,"");const i=a(this,Oe).URL;i!==a(this,Oe).baseURI&&(Wd(i)?J('#createUrl: ignore "data:"-URL for performance reasons.'):g(this,Xo,_1(i,"")))}return`url(${a(this,Xo)}#${e})`},tS=function(e){const i=a(this,Oe).createElementNS(as,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(i)},D0=function(e){const i=a(this,Oe).createElementNS(as,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(i)},tl=function(e){const i=a(this,Oe).createElementNS(as,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",e),a(this,$,Za).append(i),i},wu=function(e,i,s){const r=a(this,Oe).createElementNS(as,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),e.append(r)},Au=function(e,i,s,r){const o=a(this,Oe).createElementNS(as,"feComponentTransfer");r.append(o),b(this,$,wu).call(this,o,"feFuncR",e),b(this,$,wu).call(this,o,"feFuncG",i),b(this,$,wu).call(this,o,"feFuncB",s)},O0=function(e,i){const s=a(this,Oe).createElementNS(as,"feComponentTransfer");i.append(s),b(this,$,wu).call(this,s,"feFuncA",e)},bu=function(e){return a(this,$,Za).style.color=e,T1(getComputedStyle(a(this,$,Za)).getPropertyValue("color"))};class eS{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){At("Abstract method `_fetch` called.")}}class dw extends eS{async _fetch(t){const e=await Xc(t,"arraybuffer");return new Uint8Array(e)}}class nS{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){At("Abstract method `_fetch` called.")}}class fw extends nS{async _fetch(t){const e=await Xc(t,"arraybuffer");return new Uint8Array(e)}}Qe&&J("Please use the `legacy` build in Node.js environments.");async function R1(n){const e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}class kk extends Jx{}class Tk extends Qx{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class Pk extends Zx{async _fetch(t){return R1(t)}}class Rk extends eS{async _fetch(t){return R1(t)}}class Lk extends nS{async _fetch(t){return R1(t)}}const Ce={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function F0(n,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,i),n.clip(s)}class L1{isModifyingCurrentTransform(){return!1}getPattern(){At("Abstract method `getPattern` called.")}}class Mk extends L1{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,s){let r;if(s===Ce.STROKE||s===Ce.FILL){const o=e.current.getClippedPathBoundingBox(s,Ft(t))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=e.cachedCanvases.getCanvas("pattern",l,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),i=W.transform(i,[1,0,0,1,o[0],o[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),F0(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=t.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(i);r.setTransform(d)}else F0(t,this._bbox),r=this._createGradient(t);return r}}function wm(n,t,e,i,s,r,o,l){const c=t.coords,u=t.colors,h=n.data,d=n.width*4;let f;c[e+1]>c[i+1]&&(f=e,e=i,i=f,f=r,r=o,o=f),c[i+1]>c[s+1]&&(f=i,i=s,s=f,f=o,o=l,l=f),c[e+1]>c[i+1]&&(f=e,e=i,i=f,f=r,r=o,o=f);const p=(c[e]+t.offsetX)*t.scaleX,y=(c[e+1]+t.offsetY)*t.scaleY,m=(c[i]+t.offsetX)*t.scaleX,S=(c[i+1]+t.offsetY)*t.scaleY,v=(c[s]+t.offsetX)*t.scaleX,w=(c[s+1]+t.offsetY)*t.scaleY;if(y>=w)return;const x=u[r],E=u[r+1],_=u[r+2],T=u[o],k=u[o+1],P=u[o+2],L=u[l],R=u[l+1],M=u[l+2],Y=Math.round(y),Z=Math.round(w);let K,nt,F,j,O,V,X,at;for(let tt=Y;tt<=Z;tt++){if(tt<S){const ft=tt<y?0:(y-tt)/(y-S);K=p-(p-m)*ft,nt=x-(x-T)*ft,F=E-(E-k)*ft,j=_-(_-P)*ft}else{let ft;tt>w?ft=1:S===w?ft=0:ft=(S-tt)/(S-w),K=m-(m-v)*ft,nt=T-(T-L)*ft,F=k-(k-R)*ft,j=P-(P-M)*ft}let dt;tt<y?dt=0:tt>w?dt=1:dt=(y-tt)/(y-w),O=p-(p-v)*dt,V=x-(x-L)*dt,X=E-(E-R)*dt,at=_-(_-M)*dt;const Vt=Math.round(Math.min(K,O)),ne=Math.round(Math.max(K,O));let Dt=d*tt+Vt*4;for(let ft=Vt;ft<=ne;ft++)dt=(K-ft)/(K-O),dt<0?dt=0:dt>1&&(dt=1),h[Dt++]=nt-(nt-V)*dt|0,h[Dt++]=F-(F-X)*dt|0,h[Dt++]=j-(j-at)*dt|0,h[Dt++]=255}}function Ik(n,t,e){const i=t.coords,s=t.colors;let r,o;switch(t.type){case"lattice":const l=t.verticesPerRow,c=Math.floor(i.length/l)-1,u=l-1;for(r=0;r<c;r++){let h=r*l;for(let d=0;d<u;d++,h++)wm(n,e,i[h],i[h+1],i[h+l],s[h],s[h+1],s[h+l]),wm(n,e,i[h+l+1],i[h+1],i[h+l],s[h+l+1],s[h+1],s[h+l])}break;case"triangles":for(r=0,o=i.length;r<o;r+=3)wm(n,e,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class Nk extends L1{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*t[1]*1.1)),3e3),p=u/d,y=h/f,m={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/p,scaleY:1/y},S=d+2*2,v=f+2*2,w=i.getCanvas("mesh",S,v),x=w.context,E=x.createImageData(d,f);if(e){const T=E.data;for(let k=0,P=T.length;k<P;k+=4)T[k]=e[0],T[k+1]=e[1],T[k+2]=e[2],T[k+3]=255}for(const T of this._figures)Ik(E,T,m);return x.putImageData(E,2,2),{canvas:w.canvas,offsetX:l-2*p,offsetY:c-2*y,scaleX:p,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,s){F0(t,this._bbox);const r=new Float32Array(2);if(s===Ce.SHADING)W.singularValueDecompose2dScale(Ft(t),r);else if(this.matrix){W.singularValueDecompose2dScale(this.matrix,r);const[l,c]=r;W.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=l,r[1]*=c}else W.singularValueDecompose2dScale(e.baseTransform,r);const o=this._createMeshCanvas(r,s===Ce.SHADING?null:this._background,e.cachedCanvases);return s!==Ce.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class Dk extends L1{getPattern(){return"hotpink"}}function Ok(n){switch(n[0]){case"RadialAxial":return new Mk(n);case"Mesh":return new Nk(n);case"Dummy":return new Dk}throw new Error(`Unknown IR type: ${n[0]}`)}const pw={COLORED:1,UNCOLORED:2},ig=class ig{constructor(t,e,i,s){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(t){const{bbox:e,operatorList:i,paintType:s,tilingType:r,color:o,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),Lg("TilingType: "+r);const h=e[0],d=e[1],f=e[2],p=e[3],y=f-h,m=p-d,S=new Float32Array(2);W.singularValueDecompose2dScale(this.matrix,S);const[v,w]=S;W.singularValueDecompose2dScale(this.baseTransform,S);const x=v*S[0],E=w*S[1];let _=y,T=m,k=!1,P=!1;const L=Math.ceil(c*x),R=Math.ceil(u*E),M=Math.ceil(y*x),Y=Math.ceil(m*E);L>=M?_=c:k=!0,R>=Y?T=u:P=!0;const Z=this.getSizeAndScale(_,this.ctx.canvas.width,x),K=this.getSizeAndScale(T,this.ctx.canvas.height,E),nt=t.cachedCanvases.getCanvas("pattern",Z.size,K.size),F=nt.context,j=l.createCanvasGraphics(F);if(j.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(j,s,o),F.translate(-Z.scale*h,-K.scale*d),j.transform(Z.scale,0,0,K.scale,0,0),F.save(),this.clipBbox(j,h,d,f,p),j.baseTransform=Ft(j.ctx),j.executeOperatorList(i),j.endDrawing(),F.restore(),k||P){const O=nt.canvas;k&&(_=c),P&&(T=u);const V=this.getSizeAndScale(_,this.ctx.canvas.width,x),X=this.getSizeAndScale(T,this.ctx.canvas.height,E),at=V.size,tt=X.size,dt=t.cachedCanvases.getCanvas("pattern-workaround",at,tt),Vt=dt.context,ne=k?Math.floor(y/c):0,Dt=P?Math.floor(m/u):0;for(let ft=0;ft<=ne;ft++)for(let Ri=0;Ri<=Dt;Ri++)Vt.drawImage(O,at*ft,tt*Ri,at,tt,0,0,at,tt);return{canvas:dt.canvas,scaleX:V.scale,scaleY:X.scale,offsetX:h,offsetY:d}}return{canvas:nt.canvas,scaleX:Z.scale,scaleY:K.scale,offsetX:h,offsetY:d}}getSizeAndScale(t,e,i){const s=Math.max(ig.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*i);return r>=s?r=s:i=r/t,{scale:i,size:r}}clipBbox(t,e,i,s,r){const o=s-e,l=r-i;t.ctx.rect(e,i,o,l),W.axialAlignedBoundingBox([e,i,s,r],Ft(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const s=t.ctx,r=t.current;switch(e){case pw.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;s.fillStyle=r.fillColor=o,s.strokeStyle=r.strokeColor=l;break;case pw.UNCOLORED:s.fillStyle=s.strokeStyle=i,r.fillColor=r.strokeColor=i;break;default:throw new ok(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,s){let r=i;s!==Ce.SHADING&&(r=W.transform(r,e.baseTransform),this.matrix&&(r=W.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let l=new DOMMatrix(r);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=t.createPattern(o.canvas,"repeat");return c.setTransform(l),c}};N(ig,"MAX_PATTERN_SIZE",3e3);let j0=ig;function Fk({src:n,srcPos:t=0,dest:e,width:i,height:s,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const l=ve.isLittleEndian?4278190080:255,[c,u]=o?[r,l]:[l,r],h=i>>3,d=i&7,f=n.length;e=new Uint32Array(e.buffer);let p=0;for(let y=0;y<s;y++){for(const S=t+h;t<S;t++){const v=t<f?n[t]:255;e[p++]=v&128?u:c,e[p++]=v&64?u:c,e[p++]=v&32?u:c,e[p++]=v&16?u:c,e[p++]=v&8?u:c,e[p++]=v&4?u:c,e[p++]=v&2?u:c,e[p++]=v&1?u:c}if(d===0)continue;const m=t<f?n[t++]:255;for(let S=0;S<d;S++)e[p++]=m&1<<7-S?u:c}return{srcPos:t,destPos:p}}const gw=16,mw=100,jk=15,yw=10,un=16,Am=new DOMMatrix,Mn=new Float32Array(2),ml=new Float32Array([1/0,1/0,-1/0,-1/0]);function zk(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},n.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},n.transform=function(e,i,s,r,o,l){t.transform(e,i,s,r,o,l),this.__originalTransform(e,i,s,r,o,l)},n.setTransform=function(e,i,s,r,o,l){t.setTransform(e,i,s,r,o,l),this.__originalSetTransform(e,i,s,r,o,l)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(e){t.rotate(e),this.__originalRotate(e)},n.clip=function(e){t.clip(e),this.__originalClip(e)},n.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},n.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},n.bezierCurveTo=function(e,i,s,r,o,l){t.bezierCurveTo(e,i,s,r,o,l),this.__originalBezierCurveTo(e,i,s,r,o,l)},n.rect=function(e,i,s,r){t.rect(e,i,s,r),this.__originalRect(e,i,s,r)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class $k{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,i)):(s=this.canvasFactory.create(e,i),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Sf(n,t,e,i,s,r,o,l,c,u){const[h,d,f,p,y,m]=Ft(n);if(d===0&&f===0){const w=o*h+y,x=Math.round(w),E=l*p+m,_=Math.round(E),T=(o+c)*h+y,k=Math.abs(Math.round(T)-x)||1,P=(l+u)*p+m,L=Math.abs(Math.round(P)-_)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(p),x,_),n.drawImage(t,e,i,s,r,0,0,k,L),n.setTransform(h,d,f,p,y,m),[k,L]}if(h===0&&p===0){const w=l*f+y,x=Math.round(w),E=o*d+m,_=Math.round(E),T=(l+u)*f+y,k=Math.abs(Math.round(T)-x)||1,P=(o+c)*d+m,L=Math.abs(Math.round(P)-_)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,x,_),n.drawImage(t,e,i,s,r,0,0,L,k),n.setTransform(h,d,f,p,y,m),[L,k]}n.drawImage(t,e,i,s,r,o,l,c,u);const S=Math.hypot(h,d),v=Math.hypot(f,p);return[S*c,v*u]}class vw{constructor(t,e){N(this,"alphaIsShape",!1);N(this,"fontSize",0);N(this,"fontSizeScale",1);N(this,"textMatrix",null);N(this,"textMatrixScale",1);N(this,"fontMatrix",g0);N(this,"leading",0);N(this,"x",0);N(this,"y",0);N(this,"lineX",0);N(this,"lineY",0);N(this,"charSpacing",0);N(this,"wordSpacing",0);N(this,"textHScale",1);N(this,"textRenderingMode",Ie.FILL);N(this,"textRise",0);N(this,"fillColor","#000000");N(this,"strokeColor","#000000");N(this,"patternFill",!1);N(this,"patternStroke",!1);N(this,"fillAlpha",1);N(this,"strokeAlpha",1);N(this,"lineWidth",1);N(this,"activeSMask",null);N(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,t,e]),this.minMax=ml.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Ce.FILL,e=null){const i=this.minMax.slice();if(t===Ce.STROKE){e||At("Stroke bounding box must include transform."),W.singularValueDecompose2dScale(e,Mn);const s=Mn[0]*this.lineWidth/2,r=Mn[1]*this.lineWidth/2;i[0]-=s,i[1]-=r,i[2]+=s,i[3]+=r}return i}updateClipFromPath(){const t=W.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ml,0)}getClippedPathBoundingBox(t=Ce.FILL,e=null){return W.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function ww(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,i=t.width,s=e%un,r=(e-s)/un,o=s===0?r:r+1,l=n.createImageData(i,un);let c=0,u;const h=t.data,d=l.data;let f,p,y,m;if(t.kind===$u.GRAYSCALE_1BPP){const S=h.byteLength,v=new Uint32Array(d.buffer,0,d.byteLength>>2),w=v.length,x=i+7>>3,E=4294967295,_=ve.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(y=f<r?un:s,u=0,p=0;p<y;p++){const T=S-c;let k=0;const P=T>x?i:T*8-7,L=P&-8;let R=0,M=0;for(;k<L;k+=8)M=h[c++],v[u++]=M&128?E:_,v[u++]=M&64?E:_,v[u++]=M&32?E:_,v[u++]=M&16?E:_,v[u++]=M&8?E:_,v[u++]=M&4?E:_,v[u++]=M&2?E:_,v[u++]=M&1?E:_;for(;k<P;k++)R===0&&(M=h[c++],R=128),v[u++]=M&R?E:_,R>>=1}for(;u<w;)v[u++]=0;n.putImageData(l,0,f*un)}}else if(t.kind===$u.RGBA_32BPP){for(p=0,m=i*un*4,f=0;f<r;f++)d.set(h.subarray(c,c+m)),c+=m,n.putImageData(l,0,p),p+=un;f<o&&(m=i*s*4,d.set(h.subarray(c,c+m)),n.putImageData(l,0,p))}else if(t.kind===$u.RGB_24BPP)for(y=un,m=i*y,f=0;f<o;f++){for(f>=r&&(y=s,m=i*y),u=0,p=m;p--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;n.putImageData(l,0,f*un)}else throw new Error(`bad image kind: ${t.kind}`)}function Aw(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,s=e%un,r=(e-s)/un,o=s===0?r:r+1,l=n.createImageData(i,un);let c=0;const u=t.data,h=l.data;for(let d=0;d<o;d++){const f=d<r?un:s;({srcPos:c}=Fk({src:u,srcPos:c,dest:h,width:i,height:f,nonBlackColor:0})),n.putImageData(l,0,d*un)}}function su(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)n[i]!==void 0&&(t[i]=n[i]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function Ef(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}function bw(n,t){if(t)return!0;W.singularValueDecompose2dScale(n,Mn);const e=Math.fround(Ti.pixelRatio*Js.PDF_TO_CSS_UNITS);return Mn[0]<=e&&Mn[1]<=e}const Bk=["butt","round","square"],Hk=["miter","round","bevel"],Uk={},xw={};var Pi,z0,$0,B0;const B1=class B1{constructor(t,e,i,s,r,{optionalContentConfig:o,markedContentStack:l=null},c,u){A(this,Pi);this.ctx=t,this.current=new vw(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new $k(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:s=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=l,i){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Ft(this.compositeCtx))}this.ctx.save(),Ef(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Ft(this.ctx)}executeOperatorList(t,e,i,s){const r=t.argsArray,o=t.fnArray;let l=e||0;const c=r.length;if(c===l)return l;const u=c-l>yw&&typeof i=="function",h=u?Date.now()+jk:0;let d=0;const f=this.commonObjs,p=this.objs;let y;for(;;){if(s!==void 0&&l===s.nextBreakPoint)return s.breakIt(l,i),l;if(y=o[l],y!==sh.dependency)this[y].apply(this,r[l]);else for(const m of r[l]){const S=m.startsWith("g_")?f:p;if(!S.has(m))return S.get(m,i),l}if(l++,l===c)return l;if(u&&++d>yw){if(Date.now()>h)return i(),l;d=0}}}endDrawing(){b(this,Pi,z0).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),b(this,Pi,$0).call(this)}_scaleImage(t,e){const i=t.width??t.displayWidth,s=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=i,c=s,u="prescale1",h,d;for(;r>2&&l>1||o>2&&c>1;){let f=l,p=c;r>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/f),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(t,0,0,l,c,0,0,f,p),t=h.canvas,l=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:s}=t,r=this.current.fillColor,o=this.current.patternFill,l=Ft(e);let c,u,h,d;if((t.bitmap||t.data)&&t.count>1){const L=t.bitmap||t.data.buffer;u=JSON.stringify(o?l:[l.slice(0,4),r]),c=this._cachedBitmapsMap.get(L),c||(c=new Map,this._cachedBitmapsMap.set(L,c));const R=c.get(u);if(R&&!o){const M=Math.round(Math.min(l[0],l[2])+l[4]),Y=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:R,offsetX:M,offsetY:Y}}h=R}h||(d=this.cachedCanvases.getCanvas("maskCanvas",i,s),Aw(d.context,t));let f=W.transform(l,[1/i,0,0,-1/s,0,0]);f=W.transform(f,[1,0,0,1,0,-s]);const p=ml.slice();W.axialAlignedBoundingBox([0,0,i,s],f,p);const[y,m,S,v]=p,w=Math.round(S-y)||1,x=Math.round(v-m)||1,E=this.cachedCanvases.getCanvas("fillCanvas",w,x),_=E.context,T=y,k=m;_.translate(-T,-k),_.transform(...f),h||(h=this._scaleImage(d.canvas,Ii(_)),h=h.img,c&&o&&c.set(u,h)),_.imageSmoothingEnabled=bw(Ft(_),t.interpolate),Sf(_,h,0,0,h.width,h.height,0,0,i,s),_.globalCompositeOperation="source-in";const P=W.transform(Ii(_),[1,0,0,1,-T,-k]);return _.fillStyle=o?r.getPattern(e,this,P,Ce.FILL):r,_.fillRect(0,0,i,s),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,E.canvas)),{canvas:E.canvas,offsetX:Math.round(T),offsetY:Math.round(k)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=Bk[t]}setLineJoin(t){this.ctx.lineJoin=Hk[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx;const r=this.ctx=s.context;r.setTransform(this.suspendedCtx.getTransform()),su(this.suspendedCtx,r),zk(r,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),su(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,s){const r=s[0],o=s[1],l=s[2]-r,c=s[3]-o;l===0||c===0||(this.genericComposeSMask(e.context,i,l,c,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,s,r,o,l,c,u,h,d){let f=t.canvas,p=c-h,y=u-d;if(o)if(p<0||y<0||p+i>f.width||y+s>f.height){const S=this.cachedCanvases.getCanvas("maskExtension",i,s),v=S.context;v.drawImage(f,-p,-y),v.globalCompositeOperation="destination-atop",v.fillStyle=o,v.fillRect(0,0,i,s),v.globalCompositeOperation="source-over",f=S.canvas,p=y=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(p,y,i,s),t.clip(S),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(p,y,i,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const m=new Path2D;m.rect(c,u,i,s),e.clip(m),e.globalCompositeOperation="destination-in",e.drawImage(f,p,y,i,s,c,u,i,s),e.restore()}save(){this.inSMaskMode&&su(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&su(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,s,r,o){this.ctx.transform(t,e,i,s,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){let[s]=e;if(!i){s||(s=e[0]=new Path2D),this[t](s);return}if(!(s instanceof Path2D)){const r=e[0]=new Path2D;for(let o=0,l=s.length;o<l;)switch(s[o++]){case Af.moveTo:r.moveTo(s[o++],s[o++]);break;case Af.lineTo:r.lineTo(s[o++],s[o++]);break;case Af.curveTo:r.bezierCurveTo(s[o++],s[o++],s[o++],s[o++],s[o++],s[o++]);break;case Af.closePath:r.closePath();break;default:J(`Unrecognized drawing path operator: ${s[o-1]}`);break}s=r}W.axialAlignedBoundingBox(i,Ft(this.ctx),this.current.minMax),this[t](s)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const i=this.ctx,s=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const r=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=s.getPattern(i,this,Ii(i),Ce.STROKE),r){const o=new Path2D;o.addPath(t,i.getTransform().invertSelf().multiplySelf(r)),t=o}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(Ce.STROKE,Ft(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const i=this.ctx,s=this.current.fillColor,r=this.current.patternFill;let o=!1;if(r){const c=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.fillStyle=s.getPattern(i,this,Ii(i),Ce.FILL),c){const u=new Path2D;u.addPath(t,i.getTransform().invertSelf().multiplySelf(c)),t=u}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),o&&i.restore(),e&&this.consumePath(t,l)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=Uk}eoClip(){this.pendingClip=xw}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const i=new Path2D,s=e.getTransform().invertSelf();for(const{transform:r,x:o,y:l,fontSize:c,path:u}of t)i.addPath(u,new DOMMatrix(r).preMultiplySelf(s).translate(o,l).scale(c,-c));e.clip(i),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var h;const i=this.commonObjs.get(t),s=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=i.fontMatrix||g0,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&J("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const r=i.loadedName||"sans-serif",o=((h=i.systemFontInfo)==null?void 0:h.css)||`"${r}", ${i.fallbackName}`;let l="normal";i.black?l="900":i.bold&&(l="bold");const c=i.italic?"italic":"normal";let u=e;e<gw?u=gw:e>mw&&(u=mw),this.current.fontSizeScale=e/u,this.ctx.font=`${c} ${l} ${u}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,s,r){const o=this.ctx,l=this.current,c=l.font,u=l.textRenderingMode,h=l.fontSize/l.fontSizeScale,d=u&Ie.FILL_STROKE_MASK,f=!!(u&Ie.ADD_TO_PATH_FLAG),p=l.patternFill&&!c.missingFile,y=l.patternStroke&&!c.missingFile;let m;if((c.disableFontFace||f||p||y)&&(m=c.getPathGenerator(this.commonObjs,t)),c.disableFontFace||p||y){o.save(),o.translate(e,i),o.scale(h,-h);let S;if((d===Ie.FILL||d===Ie.FILL_STROKE)&&(s?(S=o.getTransform(),o.setTransform(...s),o.fill(b(this,Pi,B0).call(this,m,S,s))):o.fill(m)),d===Ie.STROKE||d===Ie.FILL_STROKE)if(r){S||(S=o.getTransform()),o.setTransform(...r);const{a:v,b:w,c:x,d:E}=S,_=W.inverseTransform(r),T=W.transform([v,w,x,E,0,0],_);W.singularValueDecompose2dScale(T,Mn),o.lineWidth*=Math.max(Mn[0],Mn[1])/h,o.stroke(b(this,Pi,B0).call(this,m,S,r))}else o.lineWidth/=h,o.stroke(m);o.restore()}else(d===Ie.FILL||d===Ie.FILL_STROKE)&&o.fillText(t,e,i),(d===Ie.STROKE||d===Ie.FILL_STROKE)&&o.strokeText(t,e,i);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ft(o),x:e,y:i,fontSize:h,path:m})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){i=!0;break}return rt(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(s===0)return;const r=this.ctx,o=e.fontSizeScale,l=e.charSpacing,c=e.wordSpacing,u=e.fontDirection,h=e.textHScale*u,d=t.length,f=i.vertical,p=f?1:-1,y=i.defaultVMetrics,m=s*e.fontMatrix[0],S=e.textRenderingMode===Ie.FILL&&!i.disableFontFace&&!e.patternFill;r.save(),e.textMatrix&&r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),u>0?r.scale(h,-1):r.scale(h,1);let v,w;if(e.patternFill){r.save();const k=e.fillColor.getPattern(r,this,Ii(r),Ce.FILL);v=Ft(r),r.restore(),r.fillStyle=k}if(e.patternStroke){r.save();const k=e.strokeColor.getPattern(r,this,Ii(r),Ce.STROKE);w=Ft(r),r.restore(),r.strokeStyle=k}let x=e.lineWidth;const E=e.textMatrixScale;if(E===0||x===0){const k=e.textRenderingMode&Ie.FILL_STROKE_MASK;(k===Ie.STROKE||k===Ie.FILL_STROKE)&&(x=this.getSinglePixelWidth())}else x/=E;if(o!==1&&(r.scale(o,o),x/=o),r.lineWidth=x,i.isInvalidPDFjsFont){const k=[];let P=0;for(const L of t)k.push(L.unicode),P+=L.width;r.fillText(k.join(""),0,0),e.x+=P*m*h,r.restore(),this.compose();return}let _=0,T;for(T=0;T<d;++T){const k=t[T];if(typeof k=="number"){_+=p*k*s/1e3;continue}let P=!1;const L=(k.isSpace?c:0)+l,R=k.fontChar,M=k.accent;let Y,Z,K=k.width;if(f){const F=k.vmetric||y,j=-(k.vmetric?F[1]:K*.5)*m,O=F[2]*m;K=F?-F[0]:K,Y=j/o,Z=(_+O)/o}else Y=_/o,Z=0;if(i.remeasure&&K>0){const F=r.measureText(R).width*1e3/s*o;if(K<F&&this.isFontSubpixelAAEnabled){const j=K/F;P=!0,r.save(),r.scale(j,1),Y/=j}else K!==F&&(Y+=(K-F)/2e3*s/o)}if(this.contentVisible&&(k.isInFont||i.missingFile)){if(S&&!M)r.fillText(R,Y,Z);else if(this.paintChar(R,Y,Z,v,w),M){const F=Y+s*M.offset.x/o,j=Z-s*M.offset.y/o;this.paintChar(M.fontChar,F,j,v,w)}}const nt=f?K*m-L*u:K*m+L*u;_+=nt,P&&r.restore()}f?e.y-=_:e.x+=_*h,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,s=i.font,r=i.fontSize,o=i.fontDirection,l=s.vertical?1:-1,c=i.charSpacing,u=i.wordSpacing,h=i.textHScale*o,d=i.fontMatrix||g0,f=t.length,p=i.textRenderingMode===Ie.INVISIBLE;let y,m,S,v;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),i.textMatrix&&e.transform(...i.textMatrix),e.translate(i.x,i.y+i.textRise),e.scale(h,o),y=0;y<f;++y){if(m=t[y],typeof m=="number"){v=l*m*r/1e3,this.ctx.translate(v,0),i.x+=v*h;continue}const w=(m.isSpace?u:0)+c,x=s.charProcOperatorList[m.operatorListId];x?this.contentVisible&&(this.save(),e.scale(r,r),e.transform(...d),this.executeOperatorList(x),this.restore()):J(`Type3 character "${m.operatorListId}" is not available.`);const E=[m.width,0];W.applyTransform(E,d),S=E[0]*r+w,e.translate(S,0),i.x+=S*h}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,s,r,o){const l=new Path2D;l.rect(i,s,r-i,o-s),this.ctx.clip(l),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const i=this.baseTransform||Ft(this.ctx),s={createCanvasGraphics:r=>new B1(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new j0(t,this.ctx,s,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=Ok(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,Ii(e),Ce.SHADING);const s=Ii(e);if(s){const{width:r,height:o}=e.canvas,l=ml.slice();W.axialAlignedBoundingBox([0,0,r,o],s,l);const[c,u,h,d]=l;this.ctx.fillRect(c,u,h-c,d-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){At("Should not call beginInlineImage")}beginImageData(){At("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Ft(this.ctx),e)){W.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[i,s,r,o]=e,l=new Path2D;l.rect(i,s,r-i,o-s),this.ctx.clip(l),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Lg("TODO: Support non-isolated groups."),t.knockout&&J("Knockout groups not supported.");const i=Ft(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=ml.slice();W.axialAlignedBoundingBox(t.bbox,Ft(e),s);const r=[0,0,e.canvas.width,e.canvas.height];s=W.intersect(s,r)||[0,0,0,0];const o=Math.floor(s[0]),l=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-o,1),u=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,c,u),f=d.context;f.translate(-o,-l),f.transform(...i);let p=new Path2D;const[y,m,S,v]=t.bbox;if(p.rect(y,m,S-y,v-m),t.matrix){const w=new Path2D;w.addPath(p,new DOMMatrix(t.matrix)),p=w}f.clip(p),t.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,l),e.save()),su(e,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Ft(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=ml.slice();W.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s,r),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,i,s,r){if(b(this,Pi,z0).call(this),Ef(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],l=e[3]-e[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=l,W.singularValueDecompose2dScale(Ft(this.ctx),Mn);const{viewportScale:c}=this,u=Math.ceil(o*this.outputScaleX*c),h=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(u,h);const{canvas:d,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(t,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(Mn[0],0,0,-Mn[1],0,l*Mn[1]),Ef(this.ctx)}else{Ef(this.ctx),this.endPath();const c=new Path2D;c.rect(e[0],e[1],o,l),this.ctx.clip(c)}}this.current=new vw(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),b(this,Pi,$0).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,s=this._createMaskCanvas(t),r=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(r,s.offsetX,s.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,s=0,r,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const l=this.ctx;l.save();const c=Ft(l);l.transform(e,i,s,r,0,0);const u=this._createMaskCanvas(t);l.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let h=0,d=o.length;h<d;h+=2){const f=W.transform(c,[e,i,s,r,o[h],o[h+1]]);l.drawImage(u.canvas,f[4],f[5])}l.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const r of t){const{data:o,width:l,height:c,transform:u}=r,h=this.cachedCanvases.getCanvas("maskCanvas",l,c),d=h.context;d.save();const f=this.getObject(o,r);Aw(d,f),d.globalCompositeOperation="source-in",d.fillStyle=s?i.getPattern(d,this,Ii(e),Ce.FILL):i,d.fillRect(0,0,l,c),d.restore(),e.save(),e.transform(...u),e.scale(1,-1),Sf(e,h.canvas,0,0,l,c,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){J("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,s){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){J("Dependent image isn't ready yet");return}const o=r.width,l=r.height,c=[];for(let u=0,h=s.length;u<h;u+=2)c.push({transform:[e,0,0,i,s[u],s[u+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:s}=t,r=this.cachedCanvases.getCanvas("inlineImage",i,s),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,s=this.ctx;this.save();const{filter:r}=s;r!=="none"&&r!==""&&(s.filter="none"),s.scale(1/e,-1/i);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const u=this.cachedCanvases.getCanvas("inlineImage",e,i).context;ww(u,t),o=this.applyTransferMapsToCanvas(u)}const l=this._scaleImage(o,Ii(s));s.imageSmoothingEnabled=bw(Ft(s),t.interpolate),Sf(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const r=t.width,o=t.height,c=this.cachedCanvases.getCanvas("inlineImage",r,o).context;ww(c,t),s=this.applyTransferMapsToCanvas(c)}for(const r of e)i.save(),i.transform(...r.transform),i.scale(1,-1),Sf(i,s,r.x,r.y,r.w,r.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const s=this.ctx;this.pendingClip&&(i||(this.pendingClip===xw?s.clip(t,"evenodd"):s.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Ft(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:s,d:r}=this.ctx.getTransform();let o,l;if(i===0&&s===0){const c=Math.abs(e),u=Math.abs(r);if(c===u)if(t===0)o=l=1/c;else{const h=c*t;o=l=h<1?1/h:1}else if(t===0)o=1/c,l=1/u;else{const h=c*t,d=u*t;o=h<1?1/h:1,l=d<1?1/d:1}}else{const c=Math.abs(e*r-i*s),u=Math.hypot(e,i),h=Math.hypot(s,r);if(t===0)o=h/c,l=u/c;else{const d=t*c;o=h>d?h/d:1,l=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:s}}=this,[r,o]=this.getScaleForStroking();if(r===o){i.lineWidth=(s||1)*r,i.stroke(t);return}const l=i.getLineDash();e&&i.save(),i.scale(r,o),Am.a=1/r,Am.d=1/o;const c=new Path2D;if(c.addPath(t,Am),l.length>0){const u=Math.max(r,o);i.setLineDash(l.map(h=>h/u)),i.lineDashOffset/=u}i.lineWidth=s||1,i.stroke(c),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Pi=new WeakSet,z0=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},$0=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},B0=function(t,e,i){const s=new Path2D;return s.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),s};let _l=B1;for(const n in sh)_l.prototype[n]!==void 0&&(_l.prototype[sh[n]]=_l.prototype[n]);var Fh,jh;class Qn{static get workerPort(){return a(this,Fh)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");g(this,Fh,t)}static get workerSrc(){return a(this,jh)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");g(this,jh,t)}}Fh=new WeakMap,jh=new WeakMap,A(Qn,Fh,null),A(Qn,jh,"");var Wl,zh;class Vk{constructor({parsedData:t,rawData:e}){A(this,Wl);A(this,zh);g(this,Wl,t),g(this,zh,e)}getRaw(){return a(this,zh)}get(t){return a(this,Wl).get(t)??null}[Symbol.iterator](){return a(this,Wl).entries()}}Wl=new WeakMap,zh=new WeakMap;const el=Symbol("INTERNAL");var $h,Bh,Hh,Xl;class Gk{constructor(t,{name:e,intent:i,usage:s,rbGroups:r}){A(this,$h,!1);A(this,Bh,!1);A(this,Hh,!1);A(this,Xl,!0);g(this,$h,!!(t&Rn.DISPLAY)),g(this,Bh,!!(t&Rn.PRINT)),this.name=e,this.intent=i,this.usage=s,this.rbGroups=r}get visible(){if(a(this,Hh))return a(this,Xl);if(!a(this,Xl))return!1;const{print:t,view:e}=this.usage;return a(this,$h)?(e==null?void 0:e.viewState)!=="OFF":a(this,Bh)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,i=!1){t!==el&&At("Internal method `_setVisible` called."),g(this,Hh,i),g(this,Xl,e)}}$h=new WeakMap,Bh=new WeakMap,Hh=new WeakMap,Xl=new WeakMap;var Er,vt,Kl,ql,Uh,H0;class Wk{constructor(t,e=Rn.DISPLAY){A(this,Uh);A(this,Er,null);A(this,vt,new Map);A(this,Kl,null);A(this,ql,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,g(this,ql,t.order);for(const i of t.groups)a(this,vt).set(i.id,new Gk(e,i));if(t.baseState==="OFF")for(const i of a(this,vt).values())i._setVisible(el,!1);for(const i of t.on)a(this,vt).get(i)._setVisible(el,!0);for(const i of t.off)a(this,vt).get(i)._setVisible(el,!1);g(this,Kl,this.getHash())}}isVisible(t){if(a(this,vt).size===0)return!0;if(!t)return Lg("Optional content group not defined."),!0;if(t.type==="OCG")return a(this,vt).has(t.id)?a(this,vt).get(t.id).visible:(J(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return b(this,Uh,H0).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!a(this,vt).has(e))return J(`Optional content group not found: ${e}`),!0;if(a(this,vt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!a(this,vt).has(e))return J(`Optional content group not found: ${e}`),!0;if(!a(this,vt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!a(this,vt).has(e))return J(`Optional content group not found: ${e}`),!0;if(!a(this,vt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!a(this,vt).has(e))return J(`Optional content group not found: ${e}`),!0;if(a(this,vt).get(e).visible)return!1}return!0}return J(`Unknown optional content policy ${t.policy}.`),!0}return J(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){var r;const s=a(this,vt).get(t);if(!s){J(`Optional content group not found: ${t}`);return}if(i&&e&&s.rbGroups.length)for(const o of s.rbGroups)for(const l of o)l!==t&&((r=a(this,vt).get(l))==null||r._setVisible(el,!1,!0));s._setVisible(el,!!e,!0),g(this,Er,null)}setOCGState({state:t,preserveRB:e}){let i;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const r=a(this,vt).get(s);if(r)switch(i){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!r.visible,e);break}}g(this,Er,null)}get hasInitialVisibility(){return a(this,Kl)===null||this.getHash()===a(this,Kl)}getOrder(){return a(this,vt).size?a(this,ql)?a(this,ql).slice():[...a(this,vt).keys()]:null}getGroup(t){return a(this,vt).get(t)||null}getHash(){if(a(this,Er)!==null)return a(this,Er);const t=new Vx;for(const[e,i]of a(this,vt))t.update(`${e}:${i.visible}`);return g(this,Er,t.hexdigest())}[Symbol.iterator](){return a(this,vt).entries()}}Er=new WeakMap,vt=new WeakMap,Kl=new WeakMap,ql=new WeakMap,Uh=new WeakSet,H0=function(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let s=1;s<e;s++){const r=t[s];let o;if(Array.isArray(r))o=b(this,Uh,H0).call(this,r);else if(a(this,vt).has(r))o=a(this,vt).get(r).visible;else return J(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"};class Xk{constructor(t,{disableRange:e=!1,disableStream:i=!1}){te(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:o,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),t.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(i),!0)});te(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,i,s,r;t.total===void 0?(i=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||i.call(e,{loaded:t.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){te(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Kk(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new qk(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class Kk{constructor(t,e,i=!1,s=null){this._stream=t,this._done=i||!1,this._filename=Ig(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class qk{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Yk(n){let t=!0,e=i("filename\\*","i").exec(n);if(e){e=e[1];let h=l(e);return h=unescape(h),h=c(h),h=u(h),r(h)}if(e=o(n),e){const h=u(e);return r(h)}if(e=i("filename","i").exec(n),e){e=e[1];let h=l(e);return h=u(h),r(h)}function i(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function s(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=Vd(d);d=f.decode(p),t=!1}catch{}}return d}function r(h){return t&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),t&&(h=s("iso-8859-1",h))),h}function o(h){const d=[];let f;const p=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,m,S,v]=f;if(m=parseInt(m,10),m in d){if(m===0)break;continue}d[m]=[S,v]}const y=[];for(let m=0;m<d.length&&m in d;++m){let[S,v]=d[m];v=l(v),S&&(v=unescape(v),m===0&&(v=c(v))),y.push(v)}return y.join("")}function l(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),y=h.slice(d+1).replace(/^[^']*'/,"");return s(f,y)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,y){if(p==="q"||p==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,S){return String.fromCharCode(parseInt(S,16))}),s(f,y);try{y=atob(y)}catch{}return s(f,y)})}return""}function iS(n,t){const e=new Headers;if(!n||!t||typeof t!="object")return e;for(const i in t){const s=t[i];s!==void 0&&e.append(i,s)}return e}function Dg(n){var t;return((t=URL.parse(n))==null?void 0:t.origin)??null}function sS({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*e)||i||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function rS(n){const t=n.get("Content-Disposition");if(t){let e=Yk(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Ig(e))return e}return null}function Kd(n,t){return new rh(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n,n===404||n===0&&t.startsWith("file:"))}function oS(n){return n===200||n===206}function aS(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function lS(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(J(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class Qk{constructor(t){N(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=iS(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return te(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Zk(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Jk(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Zk{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),s=e.url;fetch(s,aS(i,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=Dg(r.url),!oS(r.status))throw Kd(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:l,suggestedLength:c}=sS({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=rS(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Zs("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:lS(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class Jk{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${i-1}`);const o=s.url;fetch(o,aS(r,this._withCredentials,this._abortController)).then(l=>{const c=Dg(l.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!oS(l.status))throw Kd(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:lS(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const bm=200,xm=206;function tT(n){const t=n.response;return typeof t!="string"?t:Vd(t).buffer}class eT{constructor({url:t,httpHeaders:e,withCredentials:i}){N(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=iS(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=xm):s.expectedStatus=bm,e.responseType="arraybuffer",te(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var s;const i=this.pendingRequests[t];i&&((s=i.onProgress)==null||s.call(i,e))}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){i.onError(s.status);return}const r=s.status||bm;if(!(r===bm&&i.expectedStatus===xm)&&r!==i.expectedStatus){i.onError(s.status);return}const l=tT(s);if(r===xm){const c=s.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?i.onDone({begin:parseInt(u[1],10),chunk:l}):(J('Missing or invalid "Content-Range" header.'),i.onError(0))}else l?i.onDone({begin:0,chunk:l}):i.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class nT{constructor(t){this._source=t,this._manager=new eT(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return te(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new iT(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new sT(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class iT{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Dg(e.responseURL);const i=e.getAllResponseHeaders(),s=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...u]=l.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=sS({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=rS(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Kd(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class sT{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=Dg((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Kd(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const rT=/^[a-z][a-z0-9\-+.]+:/i;function oT(n){if(rT.test(n))return new URL(n);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}class aT{constructor(t){this.source=t,this.url=oT(t.url),te(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return te(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new lT(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new cT(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class lT{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=Kd(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Zs("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class cT{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const ru=Symbol("INITIAL_DATA");var An,Vh,U0;class cS{constructor(){A(this,Vh);A(this,An,Object.create(null))}get(t,e=null){if(e){const s=b(this,Vh,U0).call(this,t);return s.promise.then(()=>e(s.data)),null}const i=a(this,An)[t];if(!i||i.data===ru)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=a(this,An)[t];return!!e&&e.data!==ru}delete(t){const e=a(this,An)[t];return!e||e.data===ru?!1:(delete a(this,An)[t],!0)}resolve(t,e=null){const i=b(this,Vh,U0).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in a(this,An)){const{data:i}=a(this,An)[e];(t=i==null?void 0:i.bitmap)==null||t.close()}g(this,An,Object.create(null))}*[Symbol.iterator](){for(const t in a(this,An)){const{data:e}=a(this,An)[t];e!==ru&&(yield[t,e])}}}An=new WeakMap,Vh=new WeakSet,U0=function(t){var e;return(e=a(this,An))[t]||(e[t]={...Promise.withResolvers(),data:ru})};const uT=1e5,Sw=30;var Ow,_r,ln,Gh,Wh,Yo,Cs,Xh,Kh,Qo,Yl,Ql,Cr,Zl,qh,Jl,Zo,Yh,Qh,Ht,tc,Jo,Zh,kr,ec,tr,uS,hS,V0,On,qf,G0,dS,fS;let ah=(Ht=class{constructor({textContentSource:t,container:e,viewport:i}){A(this,tr);A(this,_r,Promise.withResolvers());A(this,ln,null);A(this,Gh,!1);A(this,Wh,!!((Ow=globalThis.FontInspector)!=null&&Ow.enabled));A(this,Yo,null);A(this,Cs,null);A(this,Xh,0);A(this,Kh,0);A(this,Qo,null);A(this,Yl,null);A(this,Ql,0);A(this,Cr,0);A(this,Zl,Object.create(null));A(this,qh,[]);A(this,Jl,null);A(this,Zo,[]);A(this,Yh,new WeakMap);A(this,Qh,null);var c;if(t instanceof ReadableStream)g(this,Jl,t);else if(typeof t=="object")g(this,Jl,new ReadableStream({start(u){u.enqueue(t),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');g(this,ln,g(this,Yl,e)),g(this,Cr,i.scale*Ti.pixelRatio),g(this,Ql,i.rotation),g(this,Cs,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:o,pageY:l}=i.rawDims;g(this,Qh,[1,0,0,-1,-o,l+r]),g(this,Kh,s),g(this,Xh,r),b(c=Ht,On,dS).call(c),so(e,i),a(this,_r).promise.finally(()=>{a(Ht,ec).delete(this),g(this,Cs,null),g(this,Zl,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=ve.platform;return rt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{a(this,Qo).read().then(({value:e,done:i})=>{if(i){a(this,_r).resolve();return}a(this,Yo)??g(this,Yo,e.lang),Object.assign(a(this,Zl),e.styles),b(this,tr,uS).call(this,e.items),t()},a(this,_r).reject)};return g(this,Qo,a(this,Jl).getReader()),a(Ht,ec).add(this),t(),a(this,_r).promise}update({viewport:t,onBefore:e=null}){var r;const i=t.scale*Ti.pixelRatio,s=t.rotation;if(s!==a(this,Ql)&&(e==null||e(),g(this,Ql,s),so(a(this,Yl),{rotation:s})),i!==a(this,Cr)){e==null||e(),g(this,Cr,i);const o={div:null,properties:null,ctx:b(r=Ht,On,qf).call(r,a(this,Yo))};for(const l of a(this,Zo))o.properties=a(this,Yh).get(l),o.div=l,b(this,tr,V0).call(this,o)}}cancel(){var e;const t=new Zs("TextLayer task cancelled.");(e=a(this,Qo))==null||e.cancel(t).catch(()=>{}),g(this,Qo,null),a(this,_r).reject(t)}get textDivs(){return a(this,Zo)}get textContentItemsStr(){return a(this,qh)}static cleanup(){if(!(a(this,ec).size>0)){a(this,tc).clear();for(const{canvas:t}of a(this,Jo).values())t.remove();a(this,Jo).clear()}}},_r=new WeakMap,ln=new WeakMap,Gh=new WeakMap,Wh=new WeakMap,Yo=new WeakMap,Cs=new WeakMap,Xh=new WeakMap,Kh=new WeakMap,Qo=new WeakMap,Yl=new WeakMap,Ql=new WeakMap,Cr=new WeakMap,Zl=new WeakMap,qh=new WeakMap,Jl=new WeakMap,Zo=new WeakMap,Yh=new WeakMap,Qh=new WeakMap,tc=new WeakMap,Jo=new WeakMap,Zh=new WeakMap,kr=new WeakMap,ec=new WeakMap,tr=new WeakSet,uS=function(t){var s,r;if(a(this,Gh))return;(r=a(this,Cs)).ctx??(r.ctx=b(s=Ht,On,qf).call(s,a(this,Yo)));const e=a(this,Zo),i=a(this,qh);for(const o of t){if(e.length>uT){J("Ignoring additional textDivs for performance reasons."),g(this,Gh,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=a(this,ln);g(this,ln,document.createElement("span")),a(this,ln).classList.add("markedContent"),o.id!==null&&a(this,ln).setAttribute("id",`${o.id}`),l.append(a(this,ln))}else o.type==="endMarkedContent"&&g(this,ln,a(this,ln).parentNode);continue}i.push(o.str),b(this,tr,hS).call(this,o)}},hS=function(t){var m;const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};a(this,Zo).push(e);const s=W.transform(a(this,Qh),t.transform);let r=Math.atan2(s[1],s[0]);const o=a(this,Zl)[t.fontName];o.vertical&&(r+=Math.PI/2);let l=a(this,Wh)&&o.fontSubstitution||o.fontFamily;l=Ht.fontFamilyMap.get(l)||l;const c=Math.hypot(s[2],s[3]),u=c*b(m=Ht,On,fS).call(m,l,o,a(this,Yo));let h,d;r===0?(h=s[4],d=s[5]-u):(h=s[4]+u*Math.sin(r),d=s[5]-u*Math.cos(r));const f="calc(var(--total-scale-factor) *",p=e.style;a(this,ln)===a(this,Yl)?(p.left=`${(100*h/a(this,Kh)).toFixed(2)}%`,p.top=`${(100*d/a(this,Xh)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(a(Ht,kr)*c).toFixed(2)}px)`,p.fontFamily=l,i.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,a(this,Wh)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(i.angle=r*(180/Math.PI));let y=!1;if(t.str.length>1)y=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),v=Math.abs(t.transform[3]);S!==v&&Math.max(S,v)/Math.min(S,v)>1.5&&(y=!0)}if(y&&(i.canvasWidth=o.vertical?t.height:t.width),a(this,Yh).set(e,i),a(this,Cs).div=e,a(this,Cs).properties=i,b(this,tr,V0).call(this,a(this,Cs)),i.hasText&&a(this,ln).append(e),i.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),a(this,ln).append(S)}},V0=function(t){var l;const{div:e,properties:i,ctx:s}=t,{style:r}=e;let o="";if(a(Ht,kr)>1&&(o=`scale(${1/a(Ht,kr)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=i;b(l=Ht,On,G0).call(l,s,h*a(this,Cr),c);const{width:d}=s.measureText(e.textContent);d>0&&(o=`scaleX(${u*a(this,Cr)/d}) ${o}`)}i.angle!==0&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(r.transform=o)},On=new WeakSet,qf=function(t=null){let e=a(this,Jo).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,Jo).set(t,e),a(this,Zh).set(e,{size:0,family:""})}return e},G0=function(t,e,i){const s=a(this,Zh).get(t);e===s.size&&i===s.family||(t.font=`${e}px ${i}`,s.size=e,s.family=i)},dS=function(){if(a(this,kr)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),g(this,kr,t.getBoundingClientRect().height),t.remove()},fS=function(t,e,i){const s=a(this,tc).get(t);if(s)return s;const r=b(this,On,qf).call(this,i);r.canvas.width=r.canvas.height=Sw,b(this,On,G0).call(this,r,Sw,t);const o=r.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let u=.8;return l?u=l/(l+c):(ve.platform.isFirefox&&J("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?u=e.ascent:e.descent&&(u=1+e.descent)),a(this,tc).set(t,u),u},A(Ht,On),A(Ht,tc,new Map),A(Ht,Jo,new Map),A(Ht,Zh,new WeakMap),A(Ht,kr,null),A(Ht,ec,new Set),Ht);class lh{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function s(r){var c;if(!r)return;let o=null;const l=r.name;if(l==="#text")o=r.value;else if(lh.shouldBuildText(l))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const u of r.children)s(u)}return s(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const hT=100;function M1(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new W0,{docId:e}=t,i=n.url?bk(n.url):null,s=n.data?xk(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,l=n.password??null,c=n.range instanceof I1?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let h=n.worker instanceof Hc?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!Wd(n.docBaseUrl)?n.docBaseUrl:null,p=bf(n.cMapUrl),y=n.cMapPacked!==!1,m=n.CMapReaderFactory||(Qe?Pk:hw),S=bf(n.iccUrl),v=bf(n.standardFontDataUrl),w=n.StandardFontDataFactory||(Qe?Rk:dw),x=bf(n.wasmUrl),E=n.WasmFactory||(Qe?Lk:fw),_=n.stopAtErrors!==!0,T=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,k=n.isEvalSupported!==!1,P=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Qe,L=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Qe&&(ve.platform.isFirefox||!globalThis.chrome),R=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,M=typeof n.disableFontFace=="boolean"?n.disableFontFace:Qe,Y=n.fontExtraProperties===!0,Z=n.enableXfa===!0,K=n.ownerDocument||globalThis.document,nt=n.disableRange===!0,F=n.disableStream===!0,j=n.disableAutoFetch===!0,O=n.pdfBug===!0,V=n.CanvasFactory||(Qe?Tk:_k),X=n.FilterFactory||(Qe?kk:Ck),at=n.enableHWA===!0,tt=n.useWasm!==!1,dt=c?c.length:n.length??NaN,Vt=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Qe&&!M,ne=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(m===hw&&w===dw&&E===fw&&p&&v&&x&&du(p,document.baseURI)&&du(v,document.baseURI)&&du(x,document.baseURI)),Dt=null;ik(d);const ft={canvasFactory:new V({ownerDocument:K,enableHWA:at}),filterFactory:new X({docId:e,ownerDocument:K}),cMapReaderFactory:ne?null:new m({baseUrl:p,isCompressed:y}),standardFontDataFactory:ne?null:new w({baseUrl:v}),wasmFactory:ne?null:new E({baseUrl:x})};h||(h=Hc.create({verbosity:d,port:Qn.workerPort}),t._worker=h);const Ri={docId:e,apiVersion:"5.3.31",data:s,password:l,disableAutoFetch:j,rangeChunkSize:u,length:dt,docBaseUrl:f,enableXfa:Z,evaluatorOptions:{maxImageSize:T,disableFontFace:M,ignoreErrors:_,isEvalSupported:k,isOffscreenCanvasSupported:P,isImageDecoderSupported:L,canvasMaxAreaInBytes:R,fontExtraProperties:Y,useSystemFonts:Vt,useWasm:tt,useWorkerFetch:ne,cMapUrl:p,iccUrl:S,standardFontDataUrl:v,wasmUrl:x}},Li={ownerDocument:K,pdfBug:O,styleElement:Dt,loadingParams:{disableAutoFetch:j,enableXfa:Z}};return h.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Rt=h.messageHandler.sendWithPromise("GetDocRequest",Ri,s?[s.buffer]:null);let rs;if(c)rs=new Xk(c,{disableRange:nt,disableStream:F});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");const os=du(i)?Qk:Qe?aT:nT;rs=new os({url:i,length:dt,httpHeaders:r,withCredentials:o,rangeChunkSize:u,disableRange:nt,disableStream:F})}return Rt.then(os=>{if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ve=new yu(e,os,h.port),St=new pT(Ve,t,rs,Li,ft);t._transport=St,Ve.send("Ready",null)})}).catch(t._capability.reject),t}var sg;const rg=class rg{constructor(){N(this,"_capability",Promise.withResolvers());N(this,"_transport",null);N(this,"_worker",null);N(this,"docId",`d${Ge(rg,sg)._++}`);N(this,"destroyed",!1);N(this,"onPassword",null);N(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,i,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};sg=new WeakMap,A(rg,sg,0);let W0=rg;var ta,Jh,td,ed,nd,Fw;let I1=(Fw=class{constructor(t,e,i=!1,s=null){A(this,ta,Promise.withResolvers());A(this,Jh,[]);A(this,td,[]);A(this,ed,[]);A(this,nd,[]);this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=s}addRangeListener(t){a(this,nd).push(t)}addProgressListener(t){a(this,ed).push(t)}addProgressiveReadListener(t){a(this,td).push(t)}addProgressiveDoneListener(t){a(this,Jh).push(t)}onDataRange(t,e){for(const i of a(this,nd))i(t,e)}onDataProgress(t,e){a(this,ta).promise.then(()=>{for(const i of a(this,ed))i(t,e)})}onDataProgressiveRead(t){a(this,ta).promise.then(()=>{for(const e of a(this,td))e(t)})}onDataProgressiveDone(){a(this,ta).promise.then(()=>{for(const t of a(this,Jh))t()})}transportReady(){a(this,ta).resolve()}requestDataRange(t,e){At("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},ta=new WeakMap,Jh=new WeakMap,td=new WeakMap,ed=new WeakMap,nd=new WeakMap,Fw);class dT{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return rt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var ks,ea,xu;class fT{constructor(t,e,i,s=!1){A(this,ea);A(this,ks,!1);this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=s?new lw:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new cS,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:r=!1}={}){return new Gd({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return rt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:s=ts.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:d=!1}){var E,_;(E=this._stats)==null||E.time("Overall");const f=this._transport.getRenderingIntent(i,s,h,d),{renderingIntent:p,cacheKey:y}=f;g(this,ks,!1),l||(l=this._transport.getOptionalContentConfig(p));let m=this._intentStates.get(y);m||(m=Object.create(null),this._intentStates.set(y,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const S=!!(p&Rn.PRINT);m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(_=this._stats)==null||_.time("Page Request"),this._pumpOperatorList(f));const v=T=>{var k;m.renderTasks.delete(w),S&&g(this,ks,!0),b(this,ea,xu).call(this),T?(w.capability.reject(T),this._abortOperatorList({intentState:m,reason:T instanceof Error?T:new Error(T)})):w.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(k=globalThis.Stats)!=null&&k.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new X0({callback:v,params:{canvasContext:t,viewport:e,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:u});(m.renderTasks||(m.renderTasks=new Set)).add(w);const x=w.task;return Promise.all([m.displayReadyCapability.promise,l]).then(([T,k])=>{var P;if(this.destroyed){v();return}if((P=this._stats)==null||P.time("Rendering"),!(k.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:T,optionalContentConfig:k}),w.operatorListChanged()}).catch(v),x}getOperatorList({intent:t="display",annotationMode:e=ts.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){var u;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(t,e,i,s,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>lh.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,s){function r(){o.read().then(function({value:c,done:u}){if(u){i(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),r()},s)}const o=e.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),g(this,ks,!1),Promise.all(t)}cleanup(t=!1){g(this,ks,!0);const e=b(this,ea,xu).call(this);return t&&e&&this._stats&&(this._stats=new lw),e}_startRenderPage(t,e){var s,r;const i=this._intentStates.get(e);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=i.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let i=0,s=t.length;i<s;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&b(this,ea,xu).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:s}){const{map:r,transfer:o}=i,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:s},o).getReader(),u=this._intentStates.get(e);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();b(this,ea,xu).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Mg){let s=hT;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Zs(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}ks=new WeakMap,ea=new WeakSet,xu=function(){if(!a(this,ks)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),g(this,ks,!1),!0};var Tr,di,Ts,na,og,ia,sa,Je,Yf,pS,gS,Su,nc,Qf;const Lt=class Lt{constructor({name:t=null,port:e=null,verbosity:i=sk()}={}){A(this,Je);A(this,Tr,Promise.withResolvers());A(this,di,null);A(this,Ts,null);A(this,na,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(a(Lt,sa).has(e))throw new Error("Cannot use more than one PDFWorker per port.");a(Lt,sa).set(e,this),b(this,Je,pS).call(this,e)}else b(this,Je,gS).call(this)}get promise(){return a(this,Tr).promise}get port(){return a(this,Ts)}get messageHandler(){return a(this,di)}destroy(){var t,e;this.destroyed=!0,(t=a(this,na))==null||t.terminate(),g(this,na,null),a(Lt,sa).delete(a(this,Ts)),g(this,Ts,null),(e=a(this,di))==null||e.destroy(),g(this,di,null)}static create(t){const e=a(this,sa).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Lt(t)}static get workerSrc(){if(Qn.workerSrc)return Qn.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return rt(this,"_setupFakeWorkerGlobal",(async()=>a(this,nc,Qf)?a(this,nc,Qf):(await import(this.workerSrc)).WorkerMessageHandler)())}};Tr=new WeakMap,di=new WeakMap,Ts=new WeakMap,na=new WeakMap,og=new WeakMap,ia=new WeakMap,sa=new WeakMap,Je=new WeakSet,Yf=function(){a(this,Tr).resolve(),a(this,di).send("configure",{verbosity:this.verbosity})},pS=function(t){g(this,Ts,t),g(this,di,new yu("main","worker",t)),a(this,di).on("ready",()=>{}),b(this,Je,Yf).call(this)},gS=function(){if(a(Lt,ia)||a(Lt,nc,Qf)){b(this,Je,Su).call(this);return}let{workerSrc:t}=Lt;try{Lt._isSameOrigin(window.location,t)||(t=Lt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new yu("main","worker",e),s=()=>{r.abort(),i.destroy(),e.terminate(),this.destroyed?a(this,Tr).reject(new Error("Worker was destroyed")):b(this,Je,Su).call(this)},r=new AbortController;e.addEventListener("error",()=>{a(this,na)||s()},{signal:r.signal}),i.on("test",l=>{if(r.abort(),this.destroyed||!l){s();return}g(this,di,i),g(this,Ts,e),g(this,na,e),b(this,Je,Yf).call(this)}),i.on("ready",l=>{if(r.abort(),this.destroyed){s();return}try{o()}catch{b(this,Je,Su).call(this)}});const o=()=>{const l=new Uint8Array;i.send("test",l,[l.buffer])};o();return}catch{Lg("The worker has been disabled.")}b(this,Je,Su).call(this)},Su=function(){a(Lt,ia)||(J("Setting up fake worker."),g(Lt,ia,!0)),Lt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){a(this,Tr).reject(new Error("Worker was destroyed"));return}const e=new Ek;g(this,Ts,e);const i=`fake${Ge(Lt,og)._++}`,s=new yu(i+"_worker",i,e);t.setup(s,e),g(this,di,new yu(i,i+"_worker",e)),b(this,Je,Yf).call(this)}).catch(t=>{a(this,Tr).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},nc=new WeakSet,Qf=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},A(Lt,nc),A(Lt,og,0),A(Lt,ia,!1),A(Lt,sa,new WeakMap),Qe&&(g(Lt,ia,!0),Qn.workerSrc||(Qn.workerSrc="./pdf.worker.mjs")),Lt._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!(i!=null&&i.origin)||i.origin==="null")return!1;const s=new URL(e,i);return i.origin===s.origin},Lt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Lt.fromPort=t=>{if(fk("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Lt.create(t)};let Hc=Lt;var Ps,Wi,ic,sc,Rs,ra,Eu;class pT{constructor(t,e,i,s,r){A(this,ra);A(this,Ps,new Map);A(this,Wi,new Map);A(this,ic,new Map);A(this,sc,new Map);A(this,Rs,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new cS,this.fontLoader=new wk({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return rt(this,"annotationStorage",new P1)}getRenderingIntent(t,e=ts.ENABLE,i=null,s=!1,r=!1){let o=Rn.DISPLAY,l=I0;switch(t){case"any":o=Rn.ANY;break;case"display":break;case"print":o=Rn.PRINT;break;default:J(`getRenderingIntent - invalid intent: ${t}`)}const c=o&Rn.PRINT&&i instanceof Wx?i:this.annotationStorage;switch(e){case ts.DISABLE:o+=Rn.ANNOTATIONS_DISABLE;break;case ts.ENABLE:break;case ts.ENABLE_FORMS:o+=Rn.ANNOTATIONS_FORMS;break;case ts.ENABLE_STORAGE:o+=Rn.ANNOTATIONS_STORAGE,l=c.serializable;break;default:J(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(o+=Rn.IS_EDITING),r&&(o+=Rn.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[o,l.hash,h];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:l,modifiedIds:u}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=a(this,Rs))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of a(this,Wi).values())t.push(s._destroy());a(this,Wi).clear(),a(this,ic).clear(),a(this,sc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s,r;this.commonObjs.clear(),this.fontLoader.clear(),a(this,Ps).clear(),this.filterFactory.destroy(),ah.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Zs("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,s)=>{te(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){s.close();return}te(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async i=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:o}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((l=e.onProgress)==null||l.call(e,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=e.onProgress)==null||u.call(e,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(i,s)=>{te(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:o,done:l}){if(l){s.close();return}te(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{r.cancel(o),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new dT(i,this))}),t.on("DocException",i=>{e._capability.reject(rn(i))}),t.on("PasswordRequest",i=>{g(this,Rs,Promise.withResolvers());try{if(!e.onPassword)throw rn(i);const s=r=>{r instanceof Error?a(this,Rs).reject(r):a(this,Rs).resolve({password:r})};e.onPassword(s,i.code)}catch(s){a(this,Rs).reject(s)}return a(this,Rs).promise}),t.on("DataLoaded",i=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;a(this,Wi).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,s,r])=>{var o;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":if("error"in r){const h=r.error;J(`Error during font loading: ${h}`),this.commonObjs.resolve(i,h);break}const l=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(h,d)=>globalThis.FontInspector.fontAdded(h,d):null,c=new Ak(r,l);this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(i,c)});break;case"CopyLocalImage":const{imageRef:u}=r;te(u,"The imageRef must be defined.");for(const h of a(this,Wi).values())for(const[,d]of h.objs)if((d==null?void 0:d.ref)===u)return d.dataLen?(this.commonObjs.resolve(i,structuredClone(d)),d.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([i,s,r,o])=>{var c;if(this.destroyed)return;const l=a(this,Wi).get(s);if(!l.objs.has(i)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":case"Pattern":l.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",i=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[i.type];if(!s)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&J("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((i=this._fullReader)==null?void 0:i.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=a(this,ic).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&a(this,sc).set(r.refStr,t);const o=new fT(e,r,this,this._params.pdfBug);return a(this,Wi).set(e,o),o});return a(this,ic).set(e,s),s}getPageIndex(t){return N0(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return b(this,ra,Eu).call(this,"GetFieldObjects")}hasJSActions(){return b(this,ra,Eu).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return b(this,ra,Eu).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return b(this,ra,Eu).call(this,"GetOptionalContentConfig").then(e=>new Wk(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=a(this,Ps).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(s=>{var r,o;return{info:s[0],metadata:s[1]?new Vk(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return a(this,Ps).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of a(this,Wi).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),a(this,Ps).clear(),this.filterFactory.destroy(!0),ah.cleanup()}}cachedPageNumber(t){if(!N0(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return a(this,sc).get(e)??null}}Ps=new WeakMap,Wi=new WeakMap,ic=new WeakMap,sc=new WeakMap,Rs=new WeakMap,ra=new WeakSet,Eu=function(t,e=null){const i=a(this,Ps).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,e);return a(this,Ps).set(t,s),s};var Pr;class gT{constructor(t){A(this,Pr,null);N(this,"onContinue",null);N(this,"onError",null);g(this,Pr,t)}get promise(){return a(this,Pr).capability.promise}cancel(t=0){a(this,Pr).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=a(this,Pr).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=a(this,Pr);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Pr=new WeakMap;var Rr,oa;const So=class So{constructor({callback:t,params:e,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){A(this,Rr,null);this.callback=t,this.params=e,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new gT(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var l,c;if(this.cancelled)return;if(this._canvas){if(a(So,oa).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(So,oa).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:s,transform:r,background:o}=this.params;this.gfx=new _l(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(t=null,e=0){var i,s,r;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),a(this,Rr)&&(window.cancelAnimationFrame(a(this,Rr)),g(this,Rr,null)),a(So,oa).delete(this._canvas),t||(t=new Mg(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(r=(s=this.task).onError)==null||r.call(s,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?g(this,Rr,window.requestAnimationFrame(()=>{g(this,Rr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(So,oa).delete(this._canvas),this.callback())))}};Rr=new WeakMap,oa=new WeakMap,A(So,oa,new WeakSet);let X0=So;const mS="5.3.31",yS="47ad820d9";function Ew(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function ou(n){return Math.max(0,Math.min(255,255*n))}class _w{static CMYK_G([t,e,i,s]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=ou(t),[t,t,t]}static G_HTML([t]){const e=Ew(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(ou)}static RGB_HTML(t){return`#${t.map(Ew).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,i+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,i,s]){return[ou(1-Math.min(1,t+s)),ou(1-Math.min(1,i+s)),ou(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const s=1-t,r=1-e,o=1-i,l=Math.min(s,r,o);return["CMYK",s,r,o,l]}}class mT{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){At("Abstract method `_createSVG` called.")}}class ch extends mT{_createSVG(t){return document.createElementNS(as,t)}}class N1{static setupStorage(t,e,i,s,r){const o=s.getValue(e,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?t.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",l=>{s.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const l of i.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const c=l.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:s,linkService:r}){const{attributes:o}=e,l=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&t.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!l||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,u)}l&&r.addLinkAttributes(t,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(t,o.dataId,e,i)}static render(t){var d,f;const e=t.annotationStorage,i=t.linkService,s=t.xfaHtml,r=t.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:r,linkService:i});const l=r!=="richText",c=t.div;if(c.append(o),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=p}l&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);o.append(p),l&&lh.shouldBuildText(s.name)&&u.push(p)}return{textDivs:u}}const h=[[s,-1,o]];for(;h.length>0;){const[p,y,m]=h.at(-1);if(y+1===p.children.length){h.pop();continue}const S=p.children[++h.at(-1)[1]];if(S===null)continue;const{name:v}=S;if(v==="#text"){const x=document.createTextNode(S.value);u.push(x),m.append(x);continue}const w=(d=S==null?void 0:S.attributes)!=null&&d.xmlns?document.createElementNS(S.attributes.xmlns,v):document.createElement(v);if(m.append(w),S.attributes&&this.setAttributes({html:w,element:S,storage:e,intent:r,linkService:i}),((f=S.children)==null?void 0:f.length)>0)h.push([S,-1,w]);else if(S.value){const x=document.createTextNode(S.value);l&&lh.shouldBuildText(v)&&u.push(x),w.append(x)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const qd=1e3,yT=9,Ba=new WeakSet;class Cw{static create(t){switch(t.data.annotationType){case Wt.LINK:return new vS(t);case Wt.TEXT:return new vT(t);case Wt.WIDGET:switch(t.data.fieldType){case"Tx":return new wT(t);case"Btn":return t.data.radioButton?new bS(t):t.data.checkBox?new bT(t):new xT(t);case"Ch":return new ST(t);case"Sig":return new AT(t)}return new Xa(t);case Wt.POPUP:return new q0(t);case Wt.FREETEXT:return new CS(t);case Wt.LINE:return new _T(t);case Wt.SQUARE:return new CT(t);case Wt.CIRCLE:return new kT(t);case Wt.POLYLINE:return new kS(t);case Wt.CARET:return new PT(t);case Wt.INK:return new D1(t);case Wt.POLYGON:return new TT(t);case Wt.HIGHLIGHT:return new TS(t);case Wt.UNDERLINE:return new RT(t);case Wt.SQUIGGLY:return new LT(t);case Wt.STRIKEOUT:return new MT(t);case Wt.STAMP:return new PS(t);case Wt.FILEATTACHMENT:return new IT(t);default:return new Qt(t)}}}var aa,rc,oc,id,K0;const H1=class H1{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){A(this,id);A(this,aa,null);A(this,rc,!1);A(this,oc,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t!=null&&t.str||e!=null&&e.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return H1._hasPopupData(this.data)}updateEdited(t){var i;if(!this.container)return;a(this,aa)||g(this,aa,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&b(this,id,K0).call(this,e),(i=a(this,oc))==null||i.popup.updateEdited(t)}resetEdited(){var t;a(this,aa)&&(b(this,id,K0).call(this,a(this,aa).rect),(t=a(this,oc))==null||t.popup.resetEdited(),g(this,aa,null))}_createContainer(t){const{data:e,parent:{page:i,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Xa||(r.tabIndex=qd);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof q0){const{rotation:m}=e;return!e.hasOwnCanvas&&m!==0&&this.setRotation(m,r),r}const{width:l,height:c}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const m=e.borderStyle.horizontalCornerRadius,S=e.borderStyle.verticalCornerRadius;if(m>0||S>0){const w=`calc(${m}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;o.borderRadius=w}else if(this instanceof bS){const w=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=w}switch(e.borderStyle.style){case Qa.SOLID:o.borderStyle="solid";break;case Qa.DASHED:o.borderStyle="dashed";break;case Qa.BEVELED:J("Unimplemented border style: beveled");break;case Qa.INSET:J("Unimplemented border style: inset");break;case Qa.UNDERLINE:o.borderBottomStyle="solid";break}const v=e.borderColor||null;v?(g(this,rc,!0),o.borderColor=W.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):o.borderWidth=0}const u=W.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=s.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-p)/d}%`;const{rotation:y}=e;return e.hasOwnCanvas||y===0?(o.width=`${100*l/h}%`,o.height=`${100*c/d}%`):this.setRotation(y,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims;let{width:r,height:o}=this;t%180!==0&&([r,o]=[o,r]),e.style.width=`${100*r/i}%`,e.style.height=`${100*o/s}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,s)=>{const r=s.detail[e],o=r[0],l=r.slice(1);s.target.style[i]=_w[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[i]:_w[`${o}_rgb`](l)})};return rt(this,"_commonActions",{display:e=>{const{display:i}=e.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const s of Object.keys(e.detail)){const r=t[s]||i[s];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[s,r]of Object.entries(e)){const o=i[s];if(o){const l={detail:{[s]:r},target:t};o(l),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,s,r]=this.data.rect.map(m=>Math.fround(m));if(t.length===8){const[m,S,v,w]=t.subarray(2,6);if(s===m&&r===S&&e===v&&i===w)return}const{style:o}=this.container;let l;if(a(this,rc)){const{borderColor:m,borderWidth:S}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const c=s-e,u=r-i,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),y=`clippath_${this.data.id}`;p.setAttribute("id",y),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let m=2,S=t.length;m<S;m+=8){const v=t[m],w=t[m+1],x=t[m+2],E=t[m+3],_=h.createElement("rect"),T=(x-e)/c,k=(r-w)/u,P=(v-x)/c,L=(w-E)/u;_.setAttribute("x",T),_.setAttribute("y",k),_.setAttribute("width",P),_.setAttribute("height",L),p.append(_),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${k}" width="${P}" height="${L}"/>`)}a(this,rc)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(d),this.container.style.clipPath=`url(#${y})`}_createPopup(){const{data:t}=this,e=g(this,oc,new q0({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){At("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:r,id:o,exportValues:l}of s){if(r===-1||o===e)continue;const c=typeof l=="string"?l:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!Ba.has(u)){J(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:c,domElement:u})}return i}for(const s of document.getElementsByName(t)){const{exportValue:r}=s,o=s.getAttribute("data-element-id");o!==e&&Ba.has(s)&&i.push({id:o,exportValue:r,domElement:s})}return i}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};aa=new WeakMap,rc=new WeakMap,oc=new WeakMap,id=new WeakSet,K0=function(t){const{container:{style:e},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}}}=this;i==null||i.splice(0,4,...t),e.left=`${100*(t[0]-l)/r}%`,e.top=`${100*(o-t[3]+c)/o}%`,s===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(s)};let Qt=H1;var In,vo,wS,AS;class vS extends Qt{constructor(e,i=null){super(e,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});A(this,In);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let r=!1;return e.url?(i.addLinkAttributes(s,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(s,e.action),r=!0):e.attachment?(b(this,In,wS).call(this,s,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(b(this,In,AS).call(this,s,e.setOCGState),r=!0):e.dest?(this._bindLink(s,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),r=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(e,i){e.href=this.linkService.getDestinationHash(i),e.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&b(this,In,vo).call(this)}_bindNamedAction(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(i),!1),b(this,In,vo).call(this)}_bindJSAction(e,i){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const o=s.get(r);o&&(e[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),b(this,In,vo).call(this)}_bindResetFormAction(e,i){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),b(this,In,vo).call(this),!this._fieldObjects){J('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var d;s==null||s();const{fields:r,refs:o,include:l}=i,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const y=this._fieldObjects[p]||[];for(const{id:m}of y)f.add(m)}for(const p of Object.values(this._fieldObjects))for(const y of p)f.has(y.id)===l&&c.push(y)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:p}=f;switch(h.push(p),f.type){case"text":{const m=f.defaultValue||"";u.setValue(p,{value:m});break}case"checkbox":case"radiobutton":{const m=f.defaultValue===f.exportValues;u.setValue(p,{value:m});break}case"combobox":case"listbox":{const m=f.defaultValue||"";u.setValue(p,{value:m});break}default:continue}const y=document.querySelector(`[data-element-id="${p}"]`);if(y){if(!Ba.has(y)){J(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}In=new WeakSet,vo=function(){this.container.setAttribute("data-internal-link","")},wS=function(e,i,s=null){e.href=this.linkService.getAnchorUrl(""),i.description&&(e.title=i.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(i.content,i.filename,s),!1},b(this,In,vo).call(this)},AS=function(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(i),!1),b(this,In,vo).call(this)};class vT extends Qt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Xa extends Qt{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return ve.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,s,r){i.includes("mouse")?t.addEventListener(i,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(i,o=>{var l;if(i==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o)}}))})}_setEventListeners(t,e,i,s){var r,o,l;for(const[c,u]of i)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,u,s),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):u==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":W.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||yT,r=t.style;let o;const l=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(u/(gm*s))||1,d=u/h;o=Math.min(s,c(d/gm))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(s,c(u/gm))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=W.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class wT extends Xa{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,s){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=i),r.setValue(o.id,{[s]:i})}render(){var s,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let l=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??l,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",u??l),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Ba.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=qd,this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",f=>{t.setValue(e,{value:f.target.value}),this.setPropertyOnSiblings(i,"value",f.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";i.value=h.userValue=p,h.formattedValue=null});let d=f=>{const{formattedValue:p}=h;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",p=>{var m;if(h.focused)return;const{target:y}=p;h.userValue&&(y.value=h.userValue),h.lastCommittedValue=y.value,h.commitKey=1,(m=this.data.actions)!=null&&m.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const y={value(m){h.userValue=m.detail.value??"",t.setValue(e,{value:h.userValue.toString()}),m.target.value=h.userValue},formattedValue(m){const{formattedValue:S}=m.detail;h.formattedValue=S,S!=null&&m.target!==document.activeElement&&(m.target.value=S),t.setValue(e,{formattedValue:S})},selRange(m){m.target.setSelectionRange(...m.detail.selRange)},charLimit:m=>{var x;const{charLimit:S}=m.detail,{target:v}=m;if(S===0){v.removeAttribute("maxLength");return}v.setAttribute("maxLength",S);let w=h.userValue;!w||w.length<=S||(w=w.slice(0,S),v.value=h.userValue=w,t.setValue(e,{value:w}),(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:1,selStart:v.selectionStart,selEnd:v.selectionEnd}}))}};this._dispatchEventFromSandbox(y,p)}),i.addEventListener("keydown",p=>{var S;h.commitKey=1;let y=-1;if(p.key==="Escape"?y=0:p.key==="Enter"&&!this.data.multiLine?y=2:p.key==="Tab"&&(h.commitKey=3),y===-1)return;const{value:m}=p.target;h.lastCommittedValue!==m&&(h.lastCommittedValue=m,h.userValue=m,(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:m,willCommit:!0,commitKey:y,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,i.addEventListener("blur",p=>{var m,S;if(!h.focused||!p.relatedTarget)return;(m=this.data.actions)!=null&&m.Blur||(h.focused=!1);const{value:y}=p.target;h.userValue=y,h.lastCommittedValue!==y&&((S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:y,willCommit:!0,commitKey:h.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&i.addEventListener("beforeinput",p=>{var _;h.lastCommittedValue=null;const{data:y,target:m}=p,{value:S,selectionStart:v,selectionEnd:w}=m;let x=v,E=w;switch(p.inputType){case"deleteWordBackward":{const T=S.substring(0,v).match(/\w*[^\w]*$/);T&&(x-=T[0].length);break}case"deleteWordForward":{const T=S.substring(v).match(/^[^\w]*\w*/);T&&(E+=T[0].length);break}case"deleteContentBackward":v===w&&(x-=1);break;case"deleteContentForward":v===w&&(E+=1);break}p.preventDefault(),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,change:y||"",willCommit:!1,selStart:x,selEnd:E}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&i.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${p}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class AT extends Xa{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class bT extends Xa{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Ba.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=qd,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,i)){const h=c&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=h),t.setValue(u.id,{value:h})}t.setValue(i,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue||"Off";o.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(i,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class bS extends Xa{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(i,{value:s})),s)for(const o of this._getElementsByName(e.fieldName,i))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(Ba.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=qd,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,i))t.setValue(u.id,{value:!1});t.setValue(i,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue;o.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",l=>{const c={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===i;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class xT extends vS{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class ST extends Xa{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");Ba.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=qd;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,i.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),s.append(d)}let o=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),o=()=>{h.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const l=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=s;return p?Array.prototype.filter.call(f,y=>y.selected).map(y=>y[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=l(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const p=f.detail.value,y=new Set(Array.isArray(p)?p:[p]);for(const m of s.options)m.selected=y.has(m.value);t.setValue(e,{value:l(!0)}),c=l(!1)},multipleSelection(f){s.multiple=!0},remove(f){const p=s.options,y=f.detail.remove;p[y].selected=!1,s.remove(y),p.length>0&&Array.prototype.findIndex.call(p,S=>S.selected)===-1&&(p[0].selected=!0),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},clear(f){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),c=l(!1)},insert(f){const{index:p,displayValue:y,exportValue:m}=f.detail.insert,S=s.children[p],v=document.createElement("option");v.textContent=y,v.value=m,S?S.before(v):s.append(v),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},items(f){const{items:p}=f.detail;for(;s.length!==0;)s.remove(0);for(const y of p){const{displayValue:m,exportValue:S}=y,v=document.createElement("option");v.textContent=m,v.value=S,s.append(v)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},indices(f){const p=new Set(f.detail.indices);for(const y of f.target.options)y.selected=p.has(y.index);t.setValue(e,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),s.addEventListener("input",h=>{var p;const d=l(!0),f=l(!1);t.setValue(e,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class q0 extends Qt{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:Qt._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new ET({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(i=>`${k1}${i}`).join(",")),this.container}}var ac,ag,lg,lc,cc,Bt,Ls,uc,sd,rd,hc,Ms,fi,Is,od,Ns,ad,la,ca,bt,Zf,Y0,xS,SS,ES,_S,Jf,tp,Q0;class ET{constructor({container:t,color:e,elements:i,titleObj:s,modificationDate:r,contentsObj:o,richText:l,parent:c,rect:u,parentRect:h,open:d}){A(this,bt);A(this,ac,b(this,bt,ES).bind(this));A(this,ag,b(this,bt,Q0).bind(this));A(this,lg,b(this,bt,tp).bind(this));A(this,lc,b(this,bt,Jf).bind(this));A(this,cc,null);A(this,Bt,null);A(this,Ls,null);A(this,uc,null);A(this,sd,null);A(this,rd,null);A(this,hc,null);A(this,Ms,!1);A(this,fi,null);A(this,Is,null);A(this,od,null);A(this,Ns,null);A(this,ad,null);A(this,la,null);A(this,ca,!1);var f;g(this,Bt,t),g(this,ad,s),g(this,Ls,o),g(this,Ns,l),g(this,rd,c),g(this,cc,e),g(this,od,u),g(this,hc,h),g(this,sd,i),g(this,uc,Ng.toDateObject(r)),this.trigger=i.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",a(this,lc)),p.addEventListener("mouseenter",a(this,lg)),p.addEventListener("mouseleave",a(this,ag)),p.classList.add("popupTriggerArea");for(const p of i)(f=p.container)==null||f.addEventListener("keydown",a(this,ac));a(this,Bt).hidden=!0,d&&b(this,bt,Jf).call(this)}render(){if(a(this,fi))return;const t=g(this,fi,document.createElement("div"));if(t.className="popup",a(this,cc)){const r=t.style.outlineColor=W.makeHexColor(...a(this,cc));t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=a(this,ad),t.append(e),a(this,uc)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,uc).valueOf()})),e.append(r)}const s=a(this,bt,Zf);if(s)N1.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(a(this,Ls));t.append(r)}a(this,Bt).append(t)}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let r=0,o=s.length;r<o;++r){const l=s[r];i.append(document.createTextNode(l)),r<o-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:t,popupContent:e}){var i;a(this,la)||g(this,la,{contentsObj:a(this,Ls),richText:a(this,Ns)}),t&&g(this,Is,null),e&&(g(this,Ns,b(this,bt,SS).call(this,e)),g(this,Ls,null)),(i=a(this,fi))==null||i.remove(),g(this,fi,null)}resetEdited(){var t;a(this,la)&&({contentsObj:Ge(this,Ls)._,richText:Ge(this,Ns)._}=a(this,la),g(this,la,null),(t=a(this,fi))==null||t.remove(),g(this,fi,null),g(this,Is,null))}forceHide(){g(this,ca,this.isVisible),a(this,ca)&&(a(this,Bt).hidden=!0)}maybeShow(){a(this,ca)&&(a(this,fi)||b(this,bt,tp).call(this),g(this,ca,!1),a(this,Bt).hidden=!1)}get isVisible(){return a(this,Bt).hidden===!1}}ac=new WeakMap,ag=new WeakMap,lg=new WeakMap,lc=new WeakMap,cc=new WeakMap,Bt=new WeakMap,Ls=new WeakMap,uc=new WeakMap,sd=new WeakMap,rd=new WeakMap,hc=new WeakMap,Ms=new WeakMap,fi=new WeakMap,Is=new WeakMap,od=new WeakMap,Ns=new WeakMap,ad=new WeakMap,la=new WeakMap,ca=new WeakMap,bt=new WeakSet,Zf=function(){const t=a(this,Ns),e=a(this,Ls);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&a(this,Ns).html||null},Y0=function(){var t,e,i;return((i=(e=(t=a(this,bt,Zf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.fontSize)||0},xS=function(){var t,e,i;return((i=(e=(t=a(this,bt,Zf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.color)||null},SS=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:a(this,bt,xS),fontSize:a(this,bt,Y0)?`calc(${a(this,bt,Y0)}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:s});return i},ES=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&a(this,Ms))&&b(this,bt,Jf).call(this)},_S=function(){if(a(this,Is)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:s,pageY:r}}}=a(this,rd);let o=!!a(this,hc),l=o?a(this,hc):a(this,od);for(const y of a(this,sd))if(!l||W.intersect(y.data.rect,l)!==null){l=y.data.rect,o=!0;break}const c=W.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),h=o?l[2]-l[0]+5:0,d=c[0]+h,f=c[1];g(this,Is,[100*(d-s)/e,100*(f-r)/i]);const{style:p}=a(this,Bt);p.left=`${a(this,Is)[0]}%`,p.top=`${a(this,Is)[1]}%`},Jf=function(){g(this,Ms,!a(this,Ms)),a(this,Ms)?(b(this,bt,tp).call(this),a(this,Bt).addEventListener("click",a(this,lc)),a(this,Bt).addEventListener("keydown",a(this,ac))):(b(this,bt,Q0).call(this),a(this,Bt).removeEventListener("click",a(this,lc)),a(this,Bt).removeEventListener("keydown",a(this,ac)))},tp=function(){a(this,fi)||this.render(),this.isVisible?a(this,Ms)&&a(this,Bt).classList.add("focused"):(b(this,bt,_S).call(this),a(this,Bt).hidden=!1,a(this,Bt).style.zIndex=parseInt(a(this,Bt).style.zIndex)+1e3)},Q0=function(){a(this,Bt).classList.remove("focused"),!(a(this,Ms)||!this.isVisible)&&(a(this,Bt).hidden=!0,a(this,Bt).style.zIndex=parseInt(a(this,Bt).style.zIndex)-1e3)};class CS extends Qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Q.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ld;class _T extends Qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,ld,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=g(this,ld,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,ld)}addHighlightArea(){this.container.classList.add("highlightArea")}}ld=new WeakMap;var cd;class CT extends Qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,cd,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=e.borderStyle.width,l=g(this,cd,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",i-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,cd)}addHighlightArea(){this.container.classList.add("highlightArea")}}cd=new WeakMap;var ud;class kT extends Qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,ud,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=e.borderStyle.width,l=g(this,ud,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",i/2),l.setAttribute("cy",s/2),l.setAttribute("rx",i/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,ud)}addHighlightArea(){this.container.classList.add("highlightArea")}}ud=new WeakMap;var hd;class kS extends Qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,hd,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:i,borderStyle:s,popupRef:r},width:o,height:l}=this;if(!i)return this.container;const c=this.svgFactory.create(o,l,!0);let u=[];for(let d=0,f=i.length;d<f;d+=2){const p=i[d]-e[0],y=e[3]-i[d+1];u.push(`${p},${y}`)}u=u.join(" ");const h=g(this,hd,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,hd)}addHighlightArea(){this.container.classList.add("highlightArea")}}hd=new WeakMap;class TT extends kS{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class PT extends Qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var dd,ua,fd,Z0;class D1 extends Qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,fd);A(this,dd,null);A(this,ua,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Q.HIGHLIGHT:Q.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:i,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:l,width:c,height:u}=b(this,fd,Z0).call(this,i,e),h=this.svgFactory.create(c,u,!0),d=g(this,dd,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",l);for(let f=0,p=s.length;f<p;f++){const y=this.svgFactory.createElement(this.svgElementName);a(this,ua).push(y),y.setAttribute("points",s[f].join(",")),d.append(y)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:i,points:s,rect:r}=e,o=a(this,dd);if(i>=0&&o.setAttribute("stroke-width",i||1),s)for(let l=0,c=a(this,ua).length;l<c;l++)a(this,ua)[l].setAttribute("points",s[l].join(","));if(r){const{transform:l,width:c,height:u}=b(this,fd,Z0).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return a(this,ua)}addHighlightArea(){this.container.classList.add("highlightArea")}}dd=new WeakMap,ua=new WeakMap,fd=new WeakSet,Z0=function(e,i){switch(e){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class TS extends Qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Q.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class RT extends Qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class LT extends Qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class MT extends Qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class PS extends Qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Q.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var pd,gd,J0;class IT extends Qt{constructor(e){var s;super(e,{isRenderable:!0});A(this,gd);A(this,pd,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",b(this,gd,J0).bind(this)),g(this,pd,s);const{isMac:r}=ve.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&b(this,gd,J0).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return a(this,pd)}addHighlightArea(){this.container.classList.add("highlightArea")}}pd=new WeakMap,gd=new WeakSet,J0=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var md,ha,Lr,yd,lo,ty,ey,dc;let O1=(dc=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:o,structTreeLayer:l}){A(this,lo);A(this,md,null);A(this,ha,null);A(this,Lr,new Map);A(this,yd,null);this.div=t,g(this,md,e),g(this,ha,i),g(this,yd,l||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return a(this,Lr).size>0}async render(t){var o;const{annotations:e}=t,i=this.div;so(i,this.viewport);const s=new Map,r={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ch,annotationStorage:t.annotationStorage||new P1,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const c=l.annotationType===Wt.POPUP;if(c){const d=s.get(l.id);if(!d)continue;r.elements=d}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;r.data=l;const u=Cw.create(r);if(!u.isRenderable)continue;if(!c&&l.popupRef){const d=s.get(l.popupRef);d?d.push(u):s.set(l.popupRef,[u])}const h=u.render();l.hidden&&(h.style.visibility="hidden"),await b(this,lo,ty).call(this,h,l.id),u._isEditable&&(a(this,Lr).set(u.data.id,u),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(u))}b(this,lo,ey).call(this)}async addLinkAnnotations(t,e){const i={data:null,layer:this.div,linkService:e,svgFactory:new ch,parent:this};for(const s of t){s.borderStyle||(s.borderStyle=dc._defaultBorderStyle),i.data=s;const r=Cw.create(i);if(!r.isRenderable)continue;const o=r.render();await b(this,lo,ty).call(this,o,s.id)}}update({viewport:t}){const e=this.div;this.viewport=t,so(e,{rotation:t.rotation}),b(this,lo,ey).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(a(this,Lr).values())}getEditableAnnotation(t){return a(this,Lr).get(t)}static get _defaultBorderStyle(){return rt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Qa.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},md=new WeakMap,ha=new WeakMap,Lr=new WeakMap,yd=new WeakMap,lo=new WeakSet,ty=async function(t,e){var o,l;const i=t.firstChild||t,s=i.id=`${k1}${e}`,r=await((o=a(this,yd))==null?void 0:o.getAriaAttributes(s));if(r)for(const[c,u]of r)i.setAttribute(c,u);this.div.append(t),(l=a(this,md))==null||l.moveElementInDOM(this.div,t,i,!1)},ey=function(){var e;if(!a(this,ha))return;const t=this.div;for(const[i,s]of a(this,ha)){const r=t.querySelector(`[data-annotation-id="${i}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const l=a(this,Lr).get(i);l&&(l._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(i,r.id,s),l._hasNoCanvas=!1):l.canvas=s)}a(this,ha).clear()},dc);const _f=/\r\n?|\n/g;var pi,bn,vd,da,xn,ee,RS,LS,MS,ep,Xs,np,ip,IS,iy,NS;const Et=class Et extends Ct{constructor(e){super({...e,name:"freeTextEditor"});A(this,ee);A(this,pi);A(this,bn,"");A(this,vd,`${this.id}-editor`);A(this,da,null);A(this,xn);g(this,pi,e.color||Et._defaultColor||Ct._defaultLineColor),g(this,xn,e.fontSize||Et._defaultFontSize)}static get _keyboardManager(){const e=Et.prototype,i=o=>o.isEmpty(),s=ro.TRANSLATE_SMALL,r=ro.TRANSLATE_BIG;return rt(this,"_keyboardManager",new Xd([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:i}]]))}static initialize(e,i){Ct.initialize(e,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case lt.FREETEXT_SIZE:Et._defaultFontSize=i;break;case lt.FREETEXT_COLOR:Et._defaultColor=i;break}}updateParams(e,i){switch(e){case lt.FREETEXT_SIZE:b(this,ee,RS).call(this,i);break;case lt.FREETEXT_COLOR:b(this,ee,LS).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[lt.FREETEXT_SIZE,Et._defaultFontSize],[lt.FREETEXT_COLOR,Et._defaultColor||Ct._defaultLineColor]]}get propertiesToUpdate(){return[[lt.FREETEXT_SIZE,a(this,xn)],[lt.FREETEXT_COLOR,a(this,pi)]]}_translateEmpty(e,i){this._uiManager.translateSelectedEditors(e,i,!0)}getInitialTranslation(){const e=this.parentScale;return[-Et._internalPadding*e,-(Et._internalPadding+a(this,xn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),g(this,da,new AbortController);const e=this._uiManager.combinedSignal(a(this,da));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,vd)),this._isDraggable=!0,(e=a(this,da))==null||e.abort(),g(this,da,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var i;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=a(this,bn),i=g(this,bn,b(this,ee,MS).call(this).trimEnd());if(e===i)return;const s=r=>{if(g(this,bn,r),!r){this.remove();return}b(this,ee,ip).call(this),this._uiManager.rebuild(this),b(this,ee,ep).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(e)},mustExec:!1}),b(this,ee,ep).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Et._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,i;(this._isCopy||this.annotationElementId)&&(e=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,vd)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${a(this,xn)}px * var(--total-scale-factor))`,s.color=a(this,pi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let y,m;switch(this.rotation){case 0:y=e+(l[0]-f)/h,m=i+this.height-(l[1]-p)/d;break;case 90:y=e+(l[0]-f)/h,m=i-(l[1]-p)/d,[c,u]=[u,-c];break;case 180:y=e-this.width+(l[0]-f)/h,m=i-(l[1]-p)/d,[c,u]=[-c,-u];break;case 270:y=e+(l[0]-f-this.height*d)/h,m=i+(l[1]-p-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(y*r,m*o,c,u)}else this._moveAfterPaste(e,i);b(this,ee,ip).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var y,m,S;const i=e.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const r=b(y=Et,Xs,iy).call(y,i.getData("text")||"").replaceAll(_f,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=l,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const v=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(_f,"")),v!==this.editorDiv){let w=h;for(const x of this.editorDiv.childNodes){if(x===v){w=d;continue}w.push(b(m=Et,Xs,np).call(m,x))}}h.push(c.nodeValue.slice(0,u).replaceAll(_f,""))}else if(c===this.editorDiv){let v=h,w=0;for(const x of this.editorDiv.childNodes)w++===u&&(v=d),v.push(b(S=Et,Xs,np).call(S,x))}g(this,bn,`${h.join(`
`)}${r}${d.join(`
`)}`),b(this,ee,ip).call(this);const f=new Range;let p=Math.sumPrecise(h.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const w=v.nodeValue.length;if(p<=w){f.setStart(v,p),f.setEnd(v,p);break}p-=w}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(e,i,s){var l;let r=null;if(e instanceof CS){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:p},textContent:y,textPosition:m,parent:{page:{pageNumber:S}}}=e;if(!y||y.length===0)return null;r=e={annotationType:Q.FREETEXT,color:Array.from(u),fontSize:c,value:y.join(`
`),position:m,pageIndex:S-1,rect:h.slice(0),rotation:d,id:f,deleted:!1,popupRef:p}}const o=await super.deserialize(e,i,s);return g(o,xn,e.fontSize),g(o,pi,W.makeHexColor(...e.color)),g(o,bn,b(l=Et,Xs,iy).call(l,e.value)),o.annotationElementId=e.id||null,o._initialData=r,o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Et._internalPadding*this.parentScale,s=this.getRect(i,i),r=Ct._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,pi)),o={annotationType:Q.FREETEXT,color:r,fontSize:a(this,xn),value:b(this,ee,IS).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(o.isCopy=!0,o):this.annotationElementId&&!b(this,ee,NS).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e);if(this.deleted)return i;const{style:s}=i;s.fontSize=`calc(${a(this,xn)}px * var(--total-scale-factor))`,s.color=a(this,pi),i.replaceChildren();for(const o of a(this,bn).split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),i.append(l)}const r=Et._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:a(this,bn)}),i}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};pi=new WeakMap,bn=new WeakMap,vd=new WeakMap,da=new WeakMap,xn=new WeakMap,ee=new WeakSet,RS=function(e){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-a(this,xn))*this.parentScale),g(this,xn,r),b(this,ee,ep).call(this)},s=a(this,xn);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:lt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},LS=function(e){const i=r=>{g(this,pi,this.editorDiv.style.color=r)},s=a(this,pi);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:lt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},MS=function(){var s;const e=[];this.editorDiv.normalize();let i=null;for(const r of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(b(s=Et,Xs,np).call(s,r)),i=r);return e.join(`
`)},ep=function(){const[e,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/i):(this.width=s.height/e,this.height=s.width/i),this.fixAndSetPosition()},Xs=new WeakSet,np=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(_f,"")},ip=function(){if(this.editorDiv.replaceChildren(),!!a(this,bn))for(const e of a(this,bn).split(`
`)){const i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(i)}},IS=function(){return a(this,bn).replaceAll(" "," ")},iy=function(e){return e.replaceAll(" "," ")},NS=function(e){const{value:i,fontSize:s,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||e.value!==i||e.fontSize!==s||e.color.some((l,c)=>l!==r[c])||e.pageIndex!==o},A(Et,Xs),N(Et,"_freeTextDefaultContent",""),N(Et,"_internalPadding",0),N(Et,"_defaultColor",null),N(Et,"_defaultFontSize",10),N(Et,"_type","freetext"),N(Et,"_editorType",Q.FREETEXT);let ny=Et;class B{toSVGPath(){At("Abstract method `toSVGPath` must be implemented.")}get box(){At("Abstract getter `box` must be implemented.")}serialize(t,e){At("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,s,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l]*s,o[l+1]=i+t[l+1]*r;return o}static _rescaleAndSwap(t,e,i,s,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l+1]*s,o[l+1]=i+t[l]*r;return o}static _translate(t,e,i,s){s||(s=new Float32Array(t.length));for(let r=0,o=t.length;r<o;r+=2)s[r]=e+t[r],s[r+1]=i+t[r+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,s,r){switch(r){case 90:return[1-e/i,t/s];case 180:return[1-t/i,1-e/s];case 270:return[e/i,1-t/s];default:return[t/i,e/s]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,s,r,o){return[(t+5*i)/6,(e+5*s)/6,(5*i+r)/6,(5*s+o)/6,(i+r)/2,(s+o)/2]}}N(B,"PRECISION",1e-4);var Sn,gi,fc,pc,Xi,st,fa,pa,wd,Ad,gc,mc,Mr,bd,cg,ug,le,_u,DS,OS,FS,jS,zS,$S;const ds=class ds{constructor({x:t,y:e},i,s,r,o,l=0){A(this,le);A(this,Sn);A(this,gi,[]);A(this,fc);A(this,pc);A(this,Xi,[]);A(this,st,new Float32Array(18));A(this,fa);A(this,pa);A(this,wd);A(this,Ad);A(this,gc);A(this,mc);A(this,Mr,[]);g(this,Sn,i),g(this,mc,r*s),g(this,pc,o),a(this,st).set([NaN,NaN,NaN,NaN,t,e],6),g(this,fc,l),g(this,Ad,a(ds,bd)*s),g(this,wd,a(ds,ug)*s),g(this,gc,s),a(this,Mr).push(t,e)}isEmpty(){return isNaN(a(this,st)[8])}add({x:t,y:e}){var L;g(this,fa,t),g(this,pa,e);const[i,s,r,o]=a(this,Sn);let[l,c,u,h]=a(this,st).subarray(8,12);const d=t-u,f=e-h,p=Math.hypot(d,f);if(p<a(this,wd))return!1;const y=p-a(this,Ad),m=y/p,S=m*d,v=m*f;let w=l,x=c;l=u,c=h,u+=S,h+=v,(L=a(this,Mr))==null||L.push(t,e);const E=-v/y,_=S/y,T=E*a(this,mc),k=_*a(this,mc);return a(this,st).set(a(this,st).subarray(2,8),0),a(this,st).set([u+T,h+k],4),a(this,st).set(a(this,st).subarray(14,18),12),a(this,st).set([u-T,h-k],16),isNaN(a(this,st)[6])?(a(this,Xi).length===0&&(a(this,st).set([l+T,c+k],2),a(this,Xi).push(NaN,NaN,NaN,NaN,(l+T-i)/r,(c+k-s)/o),a(this,st).set([l-T,c-k],14),a(this,gi).push(NaN,NaN,NaN,NaN,(l-T-i)/r,(c-k-s)/o)),a(this,st).set([w,x,l,c,u,h],6),!this.isEmpty()):(a(this,st).set([w,x,l,c,u,h],6),Math.abs(Math.atan2(x-c,w-l)-Math.atan2(v,S))<Math.PI/2?([l,c,u,h]=a(this,st).subarray(2,6),a(this,Xi).push(NaN,NaN,NaN,NaN,((l+u)/2-i)/r,((c+h)/2-s)/o),[l,c,w,x]=a(this,st).subarray(14,18),a(this,gi).push(NaN,NaN,NaN,NaN,((w+l)/2-i)/r,((x+c)/2-s)/o),!0):([w,x,l,c,u,h]=a(this,st).subarray(0,6),a(this,Xi).push(((w+5*l)/6-i)/r,((x+5*c)/6-s)/o,((5*l+u)/6-i)/r,((5*c+h)/6-s)/o,((l+u)/2-i)/r,((c+h)/2-s)/o),[u,h,l,c,w,x]=a(this,st).subarray(12,18),a(this,gi).push(((w+5*l)/6-i)/r,((x+5*c)/6-s)/o,((5*l+u)/6-i)/r,((5*c+h)/6-s)/o,((l+u)/2-i)/r,((c+h)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=a(this,Xi),e=a(this,gi);if(isNaN(a(this,st)[6])&&!this.isEmpty())return b(this,le,DS).call(this);const i=[];i.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);b(this,le,FS).call(this,i);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return b(this,le,OS).call(this,i),i.join(" ")}newFreeDrawOutline(t,e,i,s,r,o){return new BS(t,e,i,s,r,o)}getOutlines(){var d;const t=a(this,Xi),e=a(this,gi),i=a(this,st),[s,r,o,l]=a(this,Sn),c=new Float32Array((((d=a(this,Mr))==null?void 0:d.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(a(this,Mr)[f]-s)/o,c[f+1]=(a(this,Mr)[f+1]-r)/l;if(c[c.length-2]=(a(this,fa)-s)/o,c[c.length-1]=(a(this,pa)-r)/l,isNaN(i[6])&&!this.isEmpty())return b(this,le,jS).call(this,c);const u=new Float32Array(a(this,Xi).length+24+a(this,gi).length);let h=t.length;for(let f=0;f<h;f+=2){if(isNaN(t[f])){u[f]=u[f+1]=NaN;continue}u[f]=t[f],u[f+1]=t[f+1]}h=b(this,le,$S).call(this,u,h);for(let f=e.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(e[f+p])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=e[f+p],u[h+1]=e[f+p+1],h+=2}return b(this,le,zS).call(this,u,h),this.newFreeDrawOutline(u,c,a(this,Sn),a(this,gc),a(this,fc),a(this,pc))}};Sn=new WeakMap,gi=new WeakMap,fc=new WeakMap,pc=new WeakMap,Xi=new WeakMap,st=new WeakMap,fa=new WeakMap,pa=new WeakMap,wd=new WeakMap,Ad=new WeakMap,gc=new WeakMap,mc=new WeakMap,Mr=new WeakMap,bd=new WeakMap,cg=new WeakMap,ug=new WeakMap,le=new WeakSet,_u=function(){const t=a(this,st).subarray(4,6),e=a(this,st).subarray(16,18),[i,s,r,o]=a(this,Sn);return[(a(this,fa)+(t[0]-e[0])/2-i)/r,(a(this,pa)+(t[1]-e[1])/2-s)/o,(a(this,fa)+(e[0]-t[0])/2-i)/r,(a(this,pa)+(e[1]-t[1])/2-s)/o]},DS=function(){const[t,e,i,s]=a(this,Sn),[r,o,l,c]=b(this,le,_u).call(this);return`M${(a(this,st)[2]-t)/i} ${(a(this,st)[3]-e)/s} L${(a(this,st)[4]-t)/i} ${(a(this,st)[5]-e)/s} L${r} ${o} L${l} ${c} L${(a(this,st)[16]-t)/i} ${(a(this,st)[17]-e)/s} L${(a(this,st)[14]-t)/i} ${(a(this,st)[15]-e)/s} Z`},OS=function(t){const e=a(this,gi);t.push(`L${e[4]} ${e[5]} Z`)},FS=function(t){const[e,i,s,r]=a(this,Sn),o=a(this,st).subarray(4,6),l=a(this,st).subarray(16,18),[c,u,h,d]=b(this,le,_u).call(this);t.push(`L${(o[0]-e)/s} ${(o[1]-i)/r} L${c} ${u} L${h} ${d} L${(l[0]-e)/s} ${(l[1]-i)/r}`)},jS=function(t){const e=a(this,st),[i,s,r,o]=a(this,Sn),[l,c,u,h]=b(this,le,_u).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-i)/r,(e[3]-s)/o,NaN,NaN,NaN,NaN,(e[4]-i)/r,(e[5]-s)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(e[16]-i)/r,(e[17]-s)/o,NaN,NaN,NaN,NaN,(e[14]-i)/r,(e[15]-s)/o],0),this.newFreeDrawOutline(d,t,a(this,Sn),a(this,gc),a(this,fc),a(this,pc))},zS=function(t,e){const i=a(this,gi);return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6},$S=function(t,e){const i=a(this,st).subarray(4,6),s=a(this,st).subarray(16,18),[r,o,l,c]=a(this,Sn),[u,h,d,f]=b(this,le,_u).call(this);return t.set([NaN,NaN,NaN,NaN,(i[0]-r)/l,(i[1]-o)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-o)/c],e),e+=24},A(ds,bd,8),A(ds,cg,2),A(ds,ug,a(ds,bd)+a(ds,cg));let Vp=ds;var yc,ga,Ds,xd,En,Sd,Kt,hg,HS;class BS extends B{constructor(e,i,s,r,o,l){super();A(this,hg);A(this,yc);A(this,ga,new Float32Array(4));A(this,Ds);A(this,xd);A(this,En);A(this,Sd);A(this,Kt);g(this,Kt,e),g(this,En,i),g(this,yc,s),g(this,Sd,r),g(this,Ds,o),g(this,xd,l),this.lastPoint=[NaN,NaN],b(this,hg,HS).call(this,l);const[c,u,h,d]=a(this,ga);for(let f=0,p=e.length;f<p;f+=2)e[f]=(e[f]-c)/h,e[f+1]=(e[f+1]-u)/d;for(let f=0,p=i.length;f<p;f+=2)i[f]=(i[f]-c)/h,i[f+1]=(i[f+1]-u)/d}toSVGPath(){const e=[`M${a(this,Kt)[4]} ${a(this,Kt)[5]}`];for(let i=6,s=a(this,Kt).length;i<s;i+=6){if(isNaN(a(this,Kt)[i])){e.push(`L${a(this,Kt)[i+4]} ${a(this,Kt)[i+5]}`);continue}e.push(`C${a(this,Kt)[i]} ${a(this,Kt)[i+1]} ${a(this,Kt)[i+2]} ${a(this,Kt)[i+3]} ${a(this,Kt)[i+4]} ${a(this,Kt)[i+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,i,s,r],o){const l=s-e,c=r-i;let u,h;switch(o){case 0:u=B._rescale(a(this,Kt),e,r,l,-c),h=B._rescale(a(this,En),e,r,l,-c);break;case 90:u=B._rescaleAndSwap(a(this,Kt),e,i,l,c),h=B._rescaleAndSwap(a(this,En),e,i,l,c);break;case 180:u=B._rescale(a(this,Kt),s,i,-l,c),h=B._rescale(a(this,En),s,i,-l,c);break;case 270:u=B._rescaleAndSwap(a(this,Kt),s,r,-l,-c),h=B._rescaleAndSwap(a(this,En),s,r,-l,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return a(this,ga)}newOutliner(e,i,s,r,o,l=0){return new Vp(e,i,s,r,o,l)}getNewOutline(e,i){const[s,r,o,l]=a(this,ga),[c,u,h,d]=a(this,yc),f=o*h,p=l*d,y=s*h+c,m=r*d+u,S=this.newOutliner({x:a(this,En)[0]*f+y,y:a(this,En)[1]*p+m},a(this,yc),a(this,Sd),e,a(this,xd),i??a(this,Ds));for(let v=2;v<a(this,En).length;v+=2)S.add({x:a(this,En)[v]*f+y,y:a(this,En)[v+1]*p+m});return S.getOutlines()}}yc=new WeakMap,ga=new WeakMap,Ds=new WeakMap,xd=new WeakMap,En=new WeakMap,Sd=new WeakMap,Kt=new WeakMap,hg=new WeakSet,HS=function(e){const i=a(this,Kt);let s=i[4],r=i[5];const o=[s,r,s,r];let l=s,c=r;const u=e?Math.max:Math.min;for(let d=6,f=i.length;d<f;d+=6){const p=i[d+4],y=i[d+5];if(isNaN(i[d]))W.pointBoundingBox(p,y,o),c<y?(l=p,c=y):c===y&&(l=u(l,p));else{const m=[1/0,1/0,-1/0,-1/0];W.bezierBoundingBox(s,r,...i.slice(d,d+6),m),W.rectBoundingBox(...m,o),c<m[3]?(l=m[2],c=m[3]):c===m[3]&&(l=u(l,m[2]))}s=p,r=y}const h=a(this,ga);h[0]=o[0]-a(this,Ds),h[1]=o[1]-a(this,Ds),h[2]=o[2]-o[0]+2*a(this,Ds),h[3]=o[3]-o[1]+2*a(this,Ds),this.lastPoint=[l,c]};var Ed,_d,Ir,mi,en,US,sp,VS,GS,ry;class sy{constructor(t,e=0,i=0,s=!0){A(this,en);A(this,Ed);A(this,_d);A(this,Ir,[]);A(this,mi,[]);const r=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:y,y:m,width:S,height:v}of t){const w=Math.floor((y-e)/l)*l,x=Math.ceil((y+S+e)/l)*l,E=Math.floor((m-e)/l)*l,_=Math.ceil((m+v+e)/l)*l,T=[w,E,_,!0],k=[x,E,_,!1];a(this,Ir).push(T,k),W.rectBoundingBox(w,E,x,_,r)}const c=r[2]-r[0]+2*i,u=r[3]-r[1]+2*i,h=r[0]-i,d=r[1]-i,f=a(this,Ir).at(s?-1:-2),p=[f[0],f[2]];for(const y of a(this,Ir)){const[m,S,v]=y;y[0]=(m-h)/c,y[1]=(S-d)/u,y[2]=(v-d)/u}g(this,Ed,new Float32Array([h,d,c,u])),g(this,_d,p)}getOutlines(){a(this,Ir).sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of a(this,Ir))e[3]?(t.push(...b(this,en,ry).call(this,e)),b(this,en,VS).call(this,e)):(b(this,en,GS).call(this,e),t.push(...b(this,en,ry).call(this,e)));return b(this,en,US).call(this,t)}}Ed=new WeakMap,_d=new WeakMap,Ir=new WeakMap,mi=new WeakMap,en=new WeakSet,US=function(t){const e=[],i=new Set;for(const o of t){const[l,c,u]=o;e.push([l,c,o],[l,u,o])}e.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=e.length;o<l;o+=2){const c=e[o][2],u=e[o+1][2];c.push(u),u.push(c),i.add(c),i.add(u)}const s=[];let r;for(;i.size>0;){const o=i.values().next().value;let[l,c,u,h,d]=o;i.delete(o);let f=l,p=c;for(r=[l,u],s.push(r);;){let y;if(i.has(h))y=h;else if(i.has(d))y=d;else break;i.delete(y),[l,c,u,h,d]=y,f!==l&&(r.push(f,p,l,p===c?c:u),f=l),p=p===c?u:c}r.push(f,p)}return new NT(s,a(this,Ed),a(this,_d))},sp=function(t){const e=a(this,mi);let i=0,s=e.length-1;for(;i<=s;){const r=i+s>>1,o=e[r][0];if(o===t)return r;o<t?i=r+1:s=r-1}return s+1},VS=function([,t,e]){const i=b(this,en,sp).call(this,t);a(this,mi).splice(i,0,[t,e])},GS=function([,t,e]){const i=b(this,en,sp).call(this,t);for(let s=i;s<a(this,mi).length;s++){const[r,o]=a(this,mi)[s];if(r!==t)break;if(r===t&&o===e){a(this,mi).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[r,o]=a(this,mi)[s];if(r!==t)break;if(r===t&&o===e){a(this,mi).splice(s,1);return}}},ry=function(t){const[e,i,s]=t,r=[[e,i,s]],o=b(this,en,sp).call(this,s);for(let l=0;l<o;l++){const[c,u]=a(this,mi)[l];for(let h=0,d=r.length;h<d;h++){const[,f,p]=r[h];if(!(u<=f||p<=c)){if(f>=c){if(p>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,p>u&&r.push([e,u,p])}}}return r};var Cd,vc;class NT extends B{constructor(e,i,s){super();A(this,Cd);A(this,vc);g(this,vc,e),g(this,Cd,i),this.lastPoint=s}toSVGPath(){const e=[];for(const i of a(this,vc)){let[s,r]=i;e.push(`M${s} ${r}`);for(let o=2;o<i.length;o+=2){const l=i[o],c=i[o+1];l===s?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${l}`),s=l)}e.push("Z")}return e.join(" ")}serialize([e,i,s,r],o){const l=[],c=s-e,u=r-i;for(const h of a(this,vc)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=e+h[f]*c,d[f+1]=r-h[f+1]*u;l.push(d)}return l}get box(){return a(this,Cd)}get classNamesForOutlining(){return["highlightOutline"]}}Cd=new WeakMap,vc=new WeakMap;class oy extends Vp{newFreeDrawOutline(t,e,i,s,r,o){return new DT(t,e,i,s,r,o)}}class DT extends BS{newOutliner(t,e,i,s,r,o=0){return new oy(t,e,i,s,r,o)}}var yi,ma,wc,re,kd,Ac,Td,Pd,Nr,vi,bc,Rd,wt,ay,ly,cy,wo,WS,sr;const on=class on{constructor({editor:t=null,uiManager:e=null}){A(this,wt);A(this,yi,null);A(this,ma,null);A(this,wc);A(this,re,null);A(this,kd,!1);A(this,Ac,!1);A(this,Td,null);A(this,Pd);A(this,Nr,null);A(this,vi,null);A(this,bc);var i;t?(g(this,Ac,!1),g(this,bc,lt.HIGHLIGHT_COLOR),g(this,Td,t)):(g(this,Ac,!0),g(this,bc,lt.HIGHLIGHT_DEFAULT_COLOR)),g(this,vi,(t==null?void 0:t._uiManager)||e),g(this,Pd,a(this,vi)._eventBus),g(this,wc,(t==null?void 0:t.color)||((i=a(this,vi))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),a(on,Rd)||g(on,Rd,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return rt(this,"_keyboardManager",new Xd([[["Escape","mac+Escape"],on.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],on.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],on.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],on.prototype._moveToPrevious],[["Home","mac+Home"],on.prototype._moveToBeginning],[["End","mac+End"],on.prototype._moveToEnd]]))}renderButton(){const t=g(this,yi,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=a(this,vi)._signal;t.addEventListener("click",b(this,wt,wo).bind(this),{signal:e}),t.addEventListener("keydown",b(this,wt,cy).bind(this),{signal:e});const i=g(this,ma,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=a(this,wc),t.append(i),t}renderMainDropdown(){const t=g(this,re,b(this,wt,ay).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===a(this,yi)){b(this,wt,wo).call(this,t);return}const e=t.target.getAttribute("data-color");e&&b(this,wt,ly).call(this,e,t)}_moveToNext(t){var e,i;if(!a(this,wt,sr)){b(this,wt,wo).call(this,t);return}if(t.target===a(this,yi)){(e=a(this,re).firstChild)==null||e.focus();return}(i=t.target.nextSibling)==null||i.focus()}_moveToPrevious(t){var e,i;if(t.target===((e=a(this,re))==null?void 0:e.firstChild)||t.target===a(this,yi)){a(this,wt,sr)&&this._hideDropdownFromKeyboard();return}a(this,wt,sr)||b(this,wt,wo).call(this,t),(i=t.target.previousSibling)==null||i.focus()}_moveToBeginning(t){var e;if(!a(this,wt,sr)){b(this,wt,wo).call(this,t);return}(e=a(this,re).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!a(this,wt,sr)){b(this,wt,wo).call(this,t);return}(e=a(this,re).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=a(this,re))==null||t.classList.add("hidden"),(e=a(this,Nr))==null||e.abort(),g(this,Nr,null)}_hideDropdownFromKeyboard(){var t;if(!a(this,Ac)){if(!a(this,wt,sr)){(t=a(this,Td))==null||t.unselect();return}this.hideDropdown(),a(this,yi).focus({preventScroll:!0,focusVisible:a(this,kd)})}}updateColor(t){if(a(this,ma)&&(a(this,ma).style.backgroundColor=t),!a(this,re))return;const e=a(this,vi).highlightColors.values();for(const i of a(this,re).children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=a(this,yi))==null||t.remove(),g(this,yi,null),g(this,ma,null),(e=a(this,re))==null||e.remove(),g(this,re,null)}};yi=new WeakMap,ma=new WeakMap,wc=new WeakMap,re=new WeakMap,kd=new WeakMap,Ac=new WeakMap,Td=new WeakMap,Pd=new WeakMap,Nr=new WeakMap,vi=new WeakMap,bc=new WeakMap,Rd=new WeakMap,wt=new WeakSet,ay=function(){const t=document.createElement("div"),e=a(this,vi)._signal;t.addEventListener("contextmenu",si,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,s]of a(this,vi).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=i,r.setAttribute("data-l10n-id",a(on,Rd)[i]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=s,r.setAttribute("aria-selected",s===a(this,wc)),r.addEventListener("click",b(this,wt,ly).bind(this,s),{signal:e}),t.append(r)}return t.addEventListener("keydown",b(this,wt,cy).bind(this),{signal:e}),t},ly=function(t,e){e.stopPropagation(),a(this,Pd).dispatch("switchannotationeditorparams",{source:this,type:a(this,bc),value:t})},cy=function(t){on._keyboardManager.exec(this,t)},wo=function(t){if(a(this,wt,sr)){this.hideDropdown();return}if(g(this,kd,t.detail===0),a(this,Nr)||(g(this,Nr,new AbortController),window.addEventListener("pointerdown",b(this,wt,WS).bind(this),{signal:a(this,vi).combinedSignal(a(this,Nr))})),a(this,re)){a(this,re).classList.remove("hidden");return}const e=g(this,re,b(this,wt,ay).call(this));a(this,yi).append(e)},WS=function(t){var e;(e=a(this,re))!=null&&e.contains(t.target)||this.hideDropdown()},sr=function(){return a(this,re)&&!a(this,re).classList.contains("hidden")},A(on,Rd,null);let uh=on;var xc,Ld,Os,ya,Sc,cn,Md,Id,va,Gn,_n,Se,Ec,Fs,Fe,_c,Wn,Nd,et,uy,rp,XS,KS,qS,hy,Ao,Zn,nl,YS,op,Cu,QS,ZS,JS,tE,eE;const pt=class pt extends Ct{constructor(e){super({...e,name:"highlightEditor"});A(this,et);A(this,xc,null);A(this,Ld,0);A(this,Os);A(this,ya,null);A(this,Sc,null);A(this,cn,null);A(this,Md,null);A(this,Id,0);A(this,va,null);A(this,Gn,null);A(this,_n,null);A(this,Se,!1);A(this,Ec,null);A(this,Fs);A(this,Fe,null);A(this,_c,"");A(this,Wn);A(this,Nd,"");this.color=e.color||pt._defaultColor,g(this,Wn,e.thickness||pt._defaultThickness),g(this,Fs,e.opacity||pt._defaultOpacity),g(this,Os,e.boxes||null),g(this,Nd,e.methodOfCreation||""),g(this,_c,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(g(this,Se,!0),b(this,et,rp).call(this,e),b(this,et,Ao).call(this)):a(this,Os)&&(g(this,xc,e.anchorNode),g(this,Ld,e.anchorOffset),g(this,Md,e.focusNode),g(this,Id,e.focusOffset),b(this,et,uy).call(this),b(this,et,Ao).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=pt.prototype;return rt(this,"_keyboardManager",new Xd([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,Se)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:a(this,Wn),methodOfCreation:a(this,Nd)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,i){var s;Ct.initialize(e,i),pt._defaultColor||(pt._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case lt.HIGHLIGHT_DEFAULT_COLOR:pt._defaultColor=i;break;case lt.HIGHLIGHT_THICKNESS:pt._defaultThickness=i;break}}translateInPage(e,i){}get toolbarPosition(){return a(this,Ec)}updateParams(e,i){switch(e){case lt.HIGHLIGHT_COLOR:b(this,et,XS).call(this,i);break;case lt.HIGHLIGHT_THICKNESS:b(this,et,KS).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[lt.HIGHLIGHT_DEFAULT_COLOR,pt._defaultColor],[lt.HIGHLIGHT_THICKNESS,pt._defaultThickness]]}get propertiesToUpdate(){return[[lt.HIGHLIGHT_COLOR,this.color||pt._defaultColor],[lt.HIGHLIGHT_THICKNESS,a(this,Wn)||pt._defaultThickness],[lt.HIGHLIGHT_FREE,a(this,Se)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(g(this,Sc,new uh({editor:this})),e.addColorPicker(a(this,Sc))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(b(this,et,Cu).call(this))}getBaseTranslation(){return[0,0]}getRect(e,i){return super.getRect(e,i,b(this,et,Cu).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){b(this,et,hy).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(b(this,et,Ao).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let i=!1;this.parent&&!e?b(this,et,hy).call(this):e&&(b(this,et,Ao).call(this,e),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),i&&this.select()}rotate(e){var r,o,l;const{drawLayer:i}=this.parent;let s;a(this,Se)?(e=(e-this.rotation+360)%360,s=b(r=pt,Zn,nl).call(r,a(this,Gn).box,e)):s=b(o=pt,Zn,nl).call(o,[this.x,this.y,this.width,this.height],e),i.updateProperties(a(this,_n),{bbox:s,root:{"data-main-rotation":e}}),i.updateProperties(a(this,Fe),{bbox:b(l=pt,Zn,nl).call(l,a(this,cn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();a(this,_c)&&(e.setAttribute("aria-label",a(this,_c)),e.setAttribute("role","mark")),a(this,Se)?e.classList.add("free"):this.div.addEventListener("keydown",b(this,et,YS).bind(this),{signal:this._uiManager._signal});const i=g(this,va,document.createElement("div"));e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=a(this,ya);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),Ax(this,a(this,va),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,Fe),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,Fe),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:b(this,et,op).call(this,!0);break;case 1:case 3:b(this,et,op).call(this,!1);break}}select(){var e;super.select(),a(this,Fe)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,Fe),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),a(this,Fe)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,Fe),{rootClass:{selected:!1}}),a(this,Se)||b(this,et,op).call(this,!1))}get _mustFixPosition(){return!a(this,Se)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(a(this,_n),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(a(this,Fe),{rootClass:{hidden:!e}}))}static startHighlighting(e,i,{target:s,x:r,y:o}){const{x:l,y:c,width:u,height:h}=s.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),p=y=>{d.abort(),b(this,Zn,tE).call(this,e,y)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",qt,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",si,{signal:f}),s.addEventListener("pointermove",b(this,Zn,JS).bind(this,e),{signal:f}),this._freeHighlight=new oy({x:r,y:o},[l,c,u,h],e.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,i,s){var m,S,v,w;let r=null;if(e instanceof TS){const{data:{quadPoints:x,rect:E,rotation:_,id:T,color:k,opacity:P,popupRef:L},parent:{page:{pageNumber:R}}}=e;r=e={annotationType:Q.HIGHLIGHT,color:Array.from(k),opacity:P,quadPoints:x,boxes:null,pageIndex:R-1,rect:E.slice(0),rotation:_,id:T,deleted:!1,popupRef:L}}else if(e instanceof D1){const{data:{inkLists:x,rect:E,rotation:_,id:T,color:k,borderStyle:{rawWidth:P},popupRef:L},parent:{page:{pageNumber:R}}}=e;r=e={annotationType:Q.HIGHLIGHT,color:Array.from(k),thickness:P,inkLists:x,boxes:null,pageIndex:R-1,rect:E.slice(0),rotation:_,id:T,deleted:!1,popupRef:L}}const{color:o,quadPoints:l,inkLists:c,opacity:u}=e,h=await super.deserialize(e,i,s);h.color=W.makeHexColor(...o),g(h,Fs,u||1),c&&g(h,Wn,e.thickness),h.annotationElementId=e.id||null,h._initialData=r;const[d,f]=h.pageDimensions,[p,y]=h.pageTranslation;if(l){const x=g(h,Os,[]);for(let E=0;E<l.length;E+=8)x.push({x:(l[E]-p)/d,y:1-(l[E+1]-y)/f,width:(l[E+2]-l[E])/d,height:(l[E+1]-l[E+5])/f});b(m=h,et,uy).call(m),b(S=h,et,Ao).call(S),h.rotate(h.rotation)}else if(c){g(h,Se,!0);const x=c[0],E={x:x[0]-p,y:f-(x[1]-y)},_=new oy(E,[0,0,d,f],1,a(h,Wn)/2,!0,.001);for(let P=0,L=x.length;P<L;P+=2)E.x=x[P]-p,E.y=f-(x[P+1]-y),_.add(E);const{id:T,clipPathId:k}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);b(v=h,et,rp).call(v,{highlightOutlines:_.getOutlines(),highlightId:T,clipPathId:k}),b(w=h,et,Ao).call(w),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),s=Ct._colorManager.convert(this.color),r={annotationType:Q.HIGHLIGHT,color:s,opacity:a(this,Fs),thickness:a(this,Wn),quadPoints:b(this,et,QS).call(this),outlines:b(this,et,ZS).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:b(this,et,Cu).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!b(this,et,eE).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};xc=new WeakMap,Ld=new WeakMap,Os=new WeakMap,ya=new WeakMap,Sc=new WeakMap,cn=new WeakMap,Md=new WeakMap,Id=new WeakMap,va=new WeakMap,Gn=new WeakMap,_n=new WeakMap,Se=new WeakMap,Ec=new WeakMap,Fs=new WeakMap,Fe=new WeakMap,_c=new WeakMap,Wn=new WeakMap,Nd=new WeakMap,et=new WeakSet,uy=function(){const e=new sy(a(this,Os),.001);g(this,Gn,e.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,Gn).box;const i=new sy(a(this,Os),.0025,.001,this._uiManager.direction==="ltr");g(this,cn,i.getOutlines());const{lastPoint:s}=a(this,cn);g(this,Ec,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},rp=function({highlightOutlines:e,highlightId:i,clipPathId:s}){var d,f;if(g(this,Gn,e),g(this,cn,e.getNewOutline(a(this,Wn)/2+1.5,.0025)),i>=0)g(this,_n,i),g(this,ya,s),this.parent.drawLayer.finalizeDraw(i,{bbox:e.box,path:{d:e.toSVGPath()}}),g(this,Fe,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,cn).box,path:{d:a(this,cn).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,_n),{bbox:b(d=pt,Zn,nl).call(d,a(this,Gn).box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,Fe),{bbox:b(f=pt,Zn,nl).call(f,a(this,cn).box,p),path:{d:a(this,cn).toSVGPath()}})}const[o,l,c,u]=e.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=u;break;case 90:{const[p,y]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*y/p,this.height=u*p/y;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=u;break;case 270:{const[p,y]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*y/p,this.height=u*p/y;break}}const{lastPoint:h}=a(this,cn);g(this,Ec,[(h[0]-o)/c,(h[1]-l)/u])},XS=function(e){const i=(o,l)=>{var c,u;this.color=o,g(this,Fs,l),(c=this.parent)==null||c.drawLayer.updateProperties(a(this,_n),{root:{fill:o,"fill-opacity":l}}),(u=a(this,Sc))==null||u.updateColor(o)},s=this.color,r=a(this,Fs);this.addCommands({cmd:i.bind(this,e,pt._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:lt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},KS=function(e){const i=a(this,Wn),s=r=>{g(this,Wn,r),b(this,et,qS).call(this,r)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:lt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},qS=function(e){if(!a(this,Se))return;b(this,et,rp).call(this,{highlightOutlines:a(this,Gn).getNewOutline(e/2)}),this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)},hy=function(){a(this,_n)===null||!this.parent||(this.parent.drawLayer.remove(a(this,_n)),g(this,_n,null),this.parent.drawLayer.remove(a(this,Fe)),g(this,Fe,null))},Ao=function(e=this.parent){a(this,_n)===null&&({id:Ge(this,_n)._,clipPathId:Ge(this,ya)._}=e.drawLayer.draw({bbox:a(this,Gn).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":a(this,Fs)},rootClass:{highlight:!0,free:a(this,Se)},path:{d:a(this,Gn).toSVGPath()}},!1,!0),g(this,Fe,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,Se)},bbox:a(this,cn).box,path:{d:a(this,cn).toSVGPath()}},a(this,Se))),a(this,va)&&(a(this,va).style.clipPath=a(this,ya)))},Zn=new WeakSet,nl=function([e,i,s,r],o){switch(o){case 90:return[1-i-r,e,r,s];case 180:return[1-e-s,1-i-r,s,r];case 270:return[i,1-e-s,r,s]}return[e,i,s,r]},YS=function(e){pt._keyboardManager.exec(this,e)},op=function(e){if(!a(this,xc))return;const i=window.getSelection();e?i.setPosition(a(this,xc),a(this,Ld)):i.setPosition(a(this,Md),a(this,Id))},Cu=function(){return a(this,Se)?this.rotation:0},QS=function(){if(a(this,Se))return null;const[e,i]=this.pageDimensions,[s,r]=this.pageTranslation,o=a(this,Os),l=new Float32Array(o.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of o){const p=u*e+s,y=(1-h)*i+r;l[c]=l[c+4]=p,l[c+1]=l[c+3]=y,l[c+2]=l[c+6]=p+d*e,l[c+5]=l[c+7]=y-f*i,c+=8}return l},ZS=function(e){return a(this,Gn).serialize(e,b(this,et,Cu).call(this))},JS=function(e,i){this._freeHighlight.add(i)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},tE=function(e,i){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},eE=function(e){const{color:i}=this._initialData;return e.color.some((s,r)=>s!==i[r])},A(pt,Zn),N(pt,"_defaultColor",null),N(pt,"_defaultOpacity",1),N(pt,"_defaultThickness",12),N(pt,"_type","highlight"),N(pt,"_editorType",Q.HIGHLIGHT),N(pt,"_freeHighlightId",-1),N(pt,"_freeHighlight",null),N(pt,"_freeHighlightClipId","");let Gp=pt;var wa;class nE{constructor(){A(this,wa,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){a(this,wa)[t]=e}toSVGProperties(){const t=a(this,wa);return g(this,wa,Object.create(null)),{root:t}}reset(){g(this,wa,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){At("Not implemented")}}wa=new WeakMap;var Cn,Cc,de,Aa,ba,Dr,Or,Fr,xa,ut,dy,fy,py,ku,iE,ap,Tu,il;const U=class U extends Ct{constructor(e){super(e);A(this,ut);A(this,Cn,null);A(this,Cc);N(this,"_drawId",null);g(this,Cc,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(b(this,ut,dy).call(this,e),b(this,ut,ku).call(this))}static _mergeSVGProperties(e,i){const s=new Set(Object.keys(e));for(const[r,o]of Object.entries(i))s.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){At("Not implemented")}static get typesMap(){At("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,i){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(a(U,de).updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,i){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,i)}static get defaultPropertiesToUpdate(){const e=[],i=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)e.push([s,i[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:i}=this;for(const[s,r]of this.constructor.typesMap)e.push([s,i[r]]);return e}_updateProperty(e,i,s){const r=this._drawingOptions,o=r[i],l=c=>{var h;r.updateProperty(i,c);const u=a(this,Cn).updateProperty(i,c);u&&b(this,ut,Tu).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,U._mergeSVGProperties(a(this,Cn).getPathResizingSVGProperties(b(this,ut,ap).call(this)),{bbox:b(this,ut,il).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,U._mergeSVGProperties(a(this,Cn).getPathResizedSVGProperties(b(this,ut,ap).call(this)),{bbox:b(this,ut,il).call(this)}))}_onTranslating(e,i){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:b(this,ut,il).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,U._mergeSVGProperties(a(this,Cn).getPathTranslatedSVGProperties(b(this,ut,ap).call(this),this.parentDimensions),{bbox:b(this,ut,il).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,Cc)&&(g(this,Cc,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){b(this,ut,py).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(b(this,ut,ku).call(this),b(this,ut,Tu).call(this,a(this,Cn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let i=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),b(this,ut,py).call(this)):e&&(this._uiManager.addShouldRescale(this),b(this,ut,ku).call(this,e),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,U._mergeSVGProperties({bbox:b(this,ut,il).call(this)},a(this,Cn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&b(this,ut,Tu).call(this,a(this,Cn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,i;this._isCopy&&(e=this.x,i=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[o,l]=this.parentDimensions;return this.setDims(this.width*o,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,i),s}static createDrawerInstance(e,i,s,r,o){At("Not implemented")}static startDrawing(e,i,s,r){var S;const{target:o,offsetX:l,offsetY:c,pointerId:u,pointerType:h}=r;if(a(U,Or)&&a(U,Or)!==h)return;const{viewport:{rotation:d}}=e,{width:f,height:p}=o.getBoundingClientRect(),y=g(U,Aa,new AbortController),m=e.combinedSignal(y);if(a(U,Dr)||g(U,Dr,u),a(U,Or)??g(U,Or,h),window.addEventListener("pointerup",v=>{var w;a(U,Dr)===v.pointerId?this._endDraw(v):(w=a(U,Fr))==null||w.delete(v.pointerId)},{signal:m}),window.addEventListener("pointercancel",v=>{var w;a(U,Dr)===v.pointerId?this._currentParent.endDrawingSession():(w=a(U,Fr))==null||w.delete(v.pointerId)},{signal:m}),window.addEventListener("pointerdown",v=>{a(U,Or)===v.pointerType&&((a(U,Fr)||g(U,Fr,new Set)).add(v.pointerId),a(U,de).isCancellable()&&(a(U,de).removeLastElement(),a(U,de).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",si,{signal:m}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:m}),o.addEventListener("touchmove",v=>{v.timeStamp===a(U,xa)&&qt(v)},{signal:m}),e.toggleDrawing(),(S=i._editorUndoBar)==null||S.hide(),a(U,de)){e.drawLayer.updateProperties(this._currentDrawId,a(U,de).startNew(l,c,f,p,d));return}i.updateUIForDefaultProperties(this),g(U,de,this.createDrawerInstance(l,c,f,p,d)),g(U,ba,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(a(U,ba).toSVGProperties(),a(U,de).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(g(U,xa,-1),!a(U,de))return;const{offsetX:i,offsetY:s,pointerId:r}=e;if(a(U,Dr)===r){if(((o=a(U,Fr))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(U,de).add(i,s)),g(U,xa,e.timeStamp),qt(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,g(U,de,null),g(U,ba,null),g(U,Or,null),g(U,xa,NaN)),a(U,Aa)&&(a(U,Aa).abort(),g(U,Aa,null),g(U,Dr,NaN),g(U,Fr,null))}static _endDraw(e){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===i.div&&i.drawLayer.updateProperties(this._currentDrawId,a(U,de).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=a(U,de),r=this._currentDrawId,o=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:lt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(lt.DRAW_STEP),!a(U,de).isEmpty()){const{pageDimensions:[s,r],scale:o}=i,l=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(U,de).getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:a(U,ba),mustBeCommitted:!e});return this._cleanup(!0),l}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,i,s,r,o,l){At("Not implemented")}static async deserialize(e,i,s){var d,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}=i.viewport,u=this.deserializeDraw(l,c,r,o,this._INNER_MARGIN,e),h=await super.deserialize(e,i,s);return h.createDrawingOptions(e),b(d=h,ut,dy).call(d,{drawOutlines:u}),b(f=h,ut,ku).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[i,s]=this.pageTranslation,[r,o]=this.pageDimensions;return a(this,Cn).serialize([i,s,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Cn=new WeakMap,Cc=new WeakMap,de=new WeakMap,Aa=new WeakMap,ba=new WeakMap,Dr=new WeakMap,Or=new WeakMap,Fr=new WeakMap,xa=new WeakMap,ut=new WeakSet,dy=function({drawOutlines:e,drawId:i,drawingOptions:s}){g(this,Cn,e),this._drawingOptions||(this._drawingOptions=s),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,e.defaultProperties)):this._drawId=b(this,ut,fy).call(this,e,this.parent),b(this,ut,Tu).call(this,e.box)},fy=function(e,i){const{id:s}=i.drawLayer.draw(U._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s},py=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},ku=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=b(this,ut,fy).call(this,a(this,Cn),e)}},iE=function([e,i,s,r]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[i,1-e,s*(l/o),r*(o/l)];case 180:return[1-e,1-i,s,r];case 270:return[1-i,e,s*(l/o),r*(o/l)];default:return[e,i,s,r]}},ap=function(){const{x:e,y:i,width:s,height:r,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-i,e,s*(o/l),r*(l/o)];case 180:return[1-e,1-i,s,r];case 270:return[i,1-e,s*(o/l),r*(l/o)];default:return[e,i,s,r]}},Tu=function(e){if([this.x,this.y,this.width,this.height]=b(this,ut,iE).call(this,e),this.div){this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)}this._onResized()},il=function(){const{x:e,y:i,width:s,height:r,rotation:o,parentRotation:l,parentDimensions:[c,u]}=this;switch((o*4+l)/90){case 1:return[1-i-r,e,r,s];case 2:return[1-e-s,1-i-r,s,r];case 3:return[i,1-e-s,r,s];case 4:return[e,i-s*(c/u),r*(u/c),s*(c/u)];case 5:return[1-i,e,s*(c/u),r*(u/c)];case 6:return[1-e-r*(u/c),1-i,r*(u/c),s*(c/u)];case 7:return[i-s*(c/u),1-e-r*(u/c),s*(c/u),r*(u/c)];case 8:return[e-s,i-r,s,r];case 9:return[1-i,e-s,r,s];case 10:return[1-e,1-i,s,r];case 11:return[i-r,1-e,r,s];case 12:return[e-r*(u/c),i,r*(u/c),s*(c/u)];case 13:return[1-i-s*(c/u),e-r*(u/c),s*(c/u),r*(u/c)];case 14:return[1-e,1-i-s*(c/u),r*(u/c),s*(c/u)];case 15:return[i,1-e,s*(c/u),r*(u/c)];default:return[e,i,s,r]}},N(U,"_currentDrawId",-1),N(U,"_currentParent",null),A(U,de,null),A(U,Aa,null),A(U,ba,null),A(U,Dr,NaN),A(U,Or,null),A(U,Fr,null),A(U,xa,NaN),N(U,"_INNER_MARGIN",3);let Wp=U;var Ki,fe,pe,Sa,kc,Ke,Ee,Xn,Ea,_a,Ca,Tc,lp;class OT{constructor(t,e,i,s,r,o){A(this,Tc);A(this,Ki,new Float64Array(6));A(this,fe);A(this,pe);A(this,Sa);A(this,kc);A(this,Ke);A(this,Ee,"");A(this,Xn,0);A(this,Ea,new Yd);A(this,_a);A(this,Ca);g(this,_a,i),g(this,Ca,s),g(this,Sa,r),g(this,kc,o),[t,e]=b(this,Tc,lp).call(this,t,e);const l=g(this,fe,[NaN,NaN,NaN,NaN,t,e]);g(this,Ke,[t,e]),g(this,pe,[{line:l,points:a(this,Ke)}]),a(this,Ki).set(l,0)}updateProperty(t,e){t==="stroke-width"&&g(this,kc,e)}isEmpty(){return!a(this,pe)||a(this,pe).length===0}isCancellable(){return a(this,Ke).length<=10}add(t,e){[t,e]=b(this,Tc,lp).call(this,t,e);const[i,s,r,o]=a(this,Ki).subarray(2,6),l=t-r,c=e-o;return Math.hypot(a(this,_a)*l,a(this,Ca)*c)<=2?null:(a(this,Ke).push(t,e),isNaN(i)?(a(this,Ki).set([r,o,t,e],2),a(this,fe).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(a(this,Ki)[0])&&a(this,fe).splice(6,6),a(this,Ki).set([i,s,r,o,t,e],0),a(this,fe).push(...B.createBezierPoints(i,s,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(a(this,Ke).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,s,r){g(this,_a,i),g(this,Ca,s),g(this,Sa,r),[t,e]=b(this,Tc,lp).call(this,t,e);const o=g(this,fe,[NaN,NaN,NaN,NaN,t,e]);g(this,Ke,[t,e]);const l=a(this,pe).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),a(this,pe).push({line:o,points:a(this,Ke)}),a(this,Ki).set(o,0),g(this,Xn,0),this.toSVGPath(),null}getLastElement(){return a(this,pe).at(-1)}setLastElement(t){return a(this,pe)?(a(this,pe).push(t),g(this,fe,t.line),g(this,Ke,t.points),g(this,Xn,0),{path:{d:this.toSVGPath()}}):a(this,Ea).setLastElement(t)}removeLastElement(){if(!a(this,pe))return a(this,Ea).removeLastElement();a(this,pe).pop(),g(this,Ee,"");for(let t=0,e=a(this,pe).length;t<e;t++){const{line:i,points:s}=a(this,pe)[t];g(this,fe,i),g(this,Ke,s),g(this,Xn,0),this.toSVGPath()}return{path:{d:a(this,Ee)}}}toSVGPath(){const t=B.svgRound(a(this,fe)[4]),e=B.svgRound(a(this,fe)[5]);if(a(this,Ke).length===2)return g(this,Ee,`${a(this,Ee)} M ${t} ${e} Z`),a(this,Ee);if(a(this,Ke).length<=6){const s=a(this,Ee).lastIndexOf("M");g(this,Ee,`${a(this,Ee).slice(0,s)} M ${t} ${e}`),g(this,Xn,6)}if(a(this,Ke).length===4){const s=B.svgRound(a(this,fe)[10]),r=B.svgRound(a(this,fe)[11]);return g(this,Ee,`${a(this,Ee)} L ${s} ${r}`),g(this,Xn,12),a(this,Ee)}const i=[];a(this,Xn)===0&&(i.push(`M ${t} ${e}`),g(this,Xn,6));for(let s=a(this,Xn),r=a(this,fe).length;s<r;s+=6){const[o,l,c,u,h,d]=a(this,fe).slice(s,s+6).map(B.svgRound);i.push(`C${o} ${l} ${c} ${u} ${h} ${d}`)}return g(this,Ee,a(this,Ee)+i.join(" ")),g(this,Xn,a(this,fe).length),a(this,Ee)}getOutlines(t,e,i,s){const r=a(this,pe).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),a(this,Ea).build(a(this,pe),t,e,i,a(this,Sa),a(this,kc),s),g(this,Ki,null),g(this,fe,null),g(this,pe,null),g(this,Ee,null),a(this,Ea)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ki=new WeakMap,fe=new WeakMap,pe=new WeakMap,Sa=new WeakMap,kc=new WeakMap,Ke=new WeakMap,Ee=new WeakMap,Xn=new WeakMap,Ea=new WeakMap,_a=new WeakMap,Ca=new WeakMap,Tc=new WeakSet,lp=function(t,e){return B._normalizePoint(t,e,a(this,_a),a(this,Ca),a(this,Sa))};var qe,Dd,Od,kn,qi,Yi,Pc,Rc,ka,ke,cs,sE,rE,oE;class Yd extends B{constructor(){super(...arguments);A(this,ke);A(this,qe);A(this,Dd,0);A(this,Od);A(this,kn);A(this,qi);A(this,Yi);A(this,Pc);A(this,Rc);A(this,ka)}build(e,i,s,r,o,l,c){g(this,qi,i),g(this,Yi,s),g(this,Pc,r),g(this,Rc,o),g(this,ka,l),g(this,Od,c??0),g(this,kn,e),b(this,ke,rE).call(this)}get thickness(){return a(this,ka)}setLastElement(e){return a(this,kn).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,kn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:i}of a(this,kn)){if(e.push(`M${B.svgRound(i[4])} ${B.svgRound(i[5])}`),i.length===6){e.push("Z");continue}if(i.length===12&&isNaN(i[6])){e.push(`L${B.svgRound(i[10])} ${B.svgRound(i[11])}`);continue}for(let s=6,r=i.length;s<r;s+=6){const[o,l,c,u,h,d]=i.subarray(s,s+6).map(B.svgRound);e.push(`C${o} ${l} ${c} ${u} ${h} ${d}`)}}return e.join("")}serialize([e,i,s,r],o){const l=[],c=[],[u,h,d,f]=b(this,ke,sE).call(this);let p,y,m,S,v,w,x,E,_;switch(a(this,Rc)){case 0:_=B._rescale,p=e,y=i+r,m=s,S=-r,v=e+u*s,w=i+(1-h-f)*r,x=e+(u+d)*s,E=i+(1-h)*r;break;case 90:_=B._rescaleAndSwap,p=e,y=i,m=s,S=r,v=e+h*s,w=i+u*r,x=e+(h+f)*s,E=i+(u+d)*r;break;case 180:_=B._rescale,p=e+s,y=i,m=-s,S=r,v=e+(1-u-d)*s,w=i+h*r,x=e+(1-u)*s,E=i+(h+f)*r;break;case 270:_=B._rescaleAndSwap,p=e+s,y=i+r,m=-s,S=-r,v=e+(1-h-f)*s,w=i+(1-u-d)*r,x=e+(1-h)*s,E=i+(1-u)*r;break}for(const{line:T,points:k}of a(this,kn))l.push(_(T,p,y,m,S,o?new Array(T.length):null)),c.push(_(k,p,y,m,S,o?new Array(k.length):null));return{lines:l,points:c,rect:[v,w,x,E]}}static deserialize(e,i,s,r,o,{paths:{lines:l,points:c},rotation:u,thickness:h}){const d=[];let f,p,y,m,S;switch(u){case 0:S=B._rescale,f=-e/s,p=i/r+1,y=1/s,m=-1/r;break;case 90:S=B._rescaleAndSwap,f=-i/r,p=-e/s,y=1/r,m=1/s;break;case 180:S=B._rescale,f=e/s+1,p=-i/r,y=-1/s,m=1/r;break;case 270:S=B._rescaleAndSwap,f=i/r+1,p=e/s+1,y=-1/r,m=-1/s;break}if(!l){l=[];for(const w of c){const x=w.length;if(x===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(x===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const E=new Float32Array(3*(x-2));l.push(E);let[_,T,k,P]=w.subarray(0,4);E.set([NaN,NaN,NaN,NaN,_,T],0);for(let L=4;L<x;L+=2){const R=w[L],M=w[L+1];E.set(B.createBezierPoints(_,T,k,P,R,M),(L-2)*3),[_,T,k,P]=[k,P,R,M]}}}for(let w=0,x=l.length;w<x;w++)d.push({line:S(l[w].map(E=>E??NaN),f,p,y,m),points:S(c[w].map(E=>E??NaN),f,p,y,m)});const v=new this.prototype.constructor;return v.build(d,s,r,1,u,h,o),v}get box(){return a(this,qe)}updateProperty(e,i){return e==="stroke-width"?b(this,ke,oE).call(this,i):null}updateParentDimensions([e,i],s){const[r,o]=b(this,ke,cs).call(this);g(this,qi,e),g(this,Yi,i),g(this,Pc,s);const[l,c]=b(this,ke,cs).call(this),u=l-r,h=c-o,d=a(this,qe);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(e){return g(this,Dd,e),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,qe).map(B.svgRound).join(" ")}get defaultProperties(){const[e,i]=a(this,qe);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${B.svgRound(e)} ${B.svgRound(i)}`}}}get rotationTransform(){const[,,e,i]=a(this,qe);let s=0,r=0,o=0,l=0,c=0,u=0;switch(a(this,Dd)){case 90:r=i/e,o=-e/i,c=e;break;case 180:s=-1,l=-1,c=e,u=i;break;case 270:r=-i/e,o=e/i,u=i;break;default:return""}return`matrix(${s} ${r} ${o} ${l} ${B.svgRound(c)} ${B.svgRound(u)})`}getPathResizingSVGProperties([e,i,s,r]){const[o,l]=b(this,ke,cs).call(this),[c,u,h,d]=a(this,qe);if(Math.abs(h-o)<=B.PRECISION||Math.abs(d-l)<=B.PRECISION){const S=e+s/2-(c+h/2),v=i+r/2-(u+d/2);return{path:{"transform-origin":`${B.svgRound(e)} ${B.svgRound(i)}`,transform:`${this.rotationTransform} translate(${S} ${v})`}}}const f=(s-2*o)/(h-2*o),p=(r-2*l)/(d-2*l),y=h/s,m=d/r;return{path:{"transform-origin":`${B.svgRound(c)} ${B.svgRound(u)}`,transform:`${this.rotationTransform} scale(${y} ${m}) translate(${B.svgRound(o)} ${B.svgRound(l)}) scale(${f} ${p}) translate(${B.svgRound(-o)} ${B.svgRound(-l)})`}}}getPathResizedSVGProperties([e,i,s,r]){const[o,l]=b(this,ke,cs).call(this),c=a(this,qe),[u,h,d,f]=c;if(c[0]=e,c[1]=i,c[2]=s,c[3]=r,Math.abs(d-o)<=B.PRECISION||Math.abs(f-l)<=B.PRECISION){const v=e+s/2-(u+d/2),w=i+r/2-(h+f/2);for(const{line:x,points:E}of a(this,kn))B._translate(x,v,w,x),B._translate(E,v,w,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${B.svgRound(e)} ${B.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(s-2*o)/(d-2*o),y=(r-2*l)/(f-2*l),m=-p*(u+o)+e+o,S=-y*(h+l)+i+l;if(p!==1||y!==1||m!==0||S!==0)for(const{line:v,points:w}of a(this,kn))B._rescale(v,m,S,p,y,v),B._rescale(w,m,S,p,y,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${B.svgRound(e)} ${B.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,i],s){const[r,o]=s,l=a(this,qe),c=e-l[0],u=i-l[1];if(a(this,qi)===r&&a(this,Yi)===o)for(const{line:h,points:d}of a(this,kn))B._translate(h,c,u,h),B._translate(d,c,u,d);else{const h=a(this,qi)/r,d=a(this,Yi)/o;g(this,qi,r),g(this,Yi,o);for(const{line:f,points:p}of a(this,kn))B._rescale(f,c,u,h,d,f),B._rescale(p,c,u,h,d,p);l[2]*=h,l[3]*=d}return l[0]=e,l[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${B.svgRound(e)} ${B.svgRound(i)}`}}}get defaultSVGProperties(){const e=a(this,qe);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${B.svgRound(e[0])} ${B.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}qe=new WeakMap,Dd=new WeakMap,Od=new WeakMap,kn=new WeakMap,qi=new WeakMap,Yi=new WeakMap,Pc=new WeakMap,Rc=new WeakMap,ka=new WeakMap,ke=new WeakSet,cs=function(e=a(this,ka)){const i=a(this,Od)+e/2*a(this,Pc);return a(this,Rc)%180===0?[i/a(this,qi),i/a(this,Yi)]:[i/a(this,Yi),i/a(this,qi)]},sE=function(){const[e,i,s,r]=a(this,qe),[o,l]=b(this,ke,cs).call(this,0);return[e+o,i+l,s-2*o,r-2*l]},rE=function(){const e=g(this,qe,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of a(this,kn)){if(r.length<=12){for(let c=4,u=r.length;c<u;c+=6)W.pointBoundingBox(r[c],r[c+1],e);continue}let o=r[4],l=r[5];for(let c=6,u=r.length;c<u;c+=6){const[h,d,f,p,y,m]=r.subarray(c,c+6);W.bezierBoundingBox(o,l,h,d,f,p,y,m,e),o=y,l=m}}const[i,s]=b(this,ke,cs).call(this);e[0]=ze(e[0]-i,0,1),e[1]=ze(e[1]-s,0,1),e[2]=ze(e[2]+i,0,1),e[3]=ze(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]},oE=function(e){const[i,s]=b(this,ke,cs).call(this);g(this,ka,e);const[r,o]=b(this,ke,cs).call(this),[l,c]=[r-i,o-s],u=a(this,qe);return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u};class Og extends nE{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Ct._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Og(this._viewParameters);return t.updateAll(this),t}}var dg,aE;const vl=class vl extends Wp{constructor(e){super({...e,name:"inkEditor"});A(this,dg);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,i){Ct.initialize(e,i),this._defaultDrawingOptions=new Og(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return rt(this,"typesMap",new Map([[lt.INK_THICKNESS,"stroke-width"],[lt.INK_COLOR,"stroke"],[lt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,i,s,r,o){return new OT(e,i,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,i,s,r,o,l){return Yd.deserialize(e,i,s,r,o,l)}static async deserialize(e,i,s){let r=null;if(e instanceof D1){const{data:{inkLists:l,rect:c,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:p},popupRef:y},parent:{page:{pageNumber:m}}}=e;r=e={annotationType:Q.INK,color:Array.from(d),thickness:p,opacity:f,paths:{points:l},boxes:null,pageIndex:m-1,rect:c.slice(0),rotation:u,id:h,deleted:!1,popupRef:y}}const o=await super.deserialize(e,i,s);return o.annotationElementId=e.id||null,o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:i,opacity:s}){this._drawingOptions=vl.getDefaultDrawingOptions({stroke:W.makeHexColor(...e),"stroke-width":i,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":l,"stroke-width":c}}=this,u={annotationType:Q.INK,color:Ct._colorManager.convert(o),opacity:l,thickness:c,paths:{lines:i,points:s},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(u.isCopy=!0,u):this.annotationElementId&&!b(this,dg,aE).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(e){const{points:i,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i}),null}};dg=new WeakSet,aE=function(e){const{color:i,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((l,c)=>l!==i[c])||e.thickness!==s||e.opacity!==r||e.pageIndex!==o},N(vl,"_type","ink"),N(vl,"_editorType",Q.INK),N(vl,"_defaultDrawingOptions",null);let gy=vl;class my extends Yd{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Cf=8,au=3;var Ta,gt,yy,wi,lE,cE,vy,cp,uE,hE,dE,wy,Ay,fE;class es{static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:s},r,o,l,c){let u=new OffscreenCanvas(1,1),h=u.getContext("2d",{alpha:!1});const d=200,f=h.font=`${i} ${s} ${d}px ${e}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:y,actualBoundingBoxAscent:m,actualBoundingBoxDescent:S,fontBoundingBoxAscent:v,fontBoundingBoxDescent:w,width:x}=h.measureText(t),E=1.5,_=Math.ceil(Math.max(Math.abs(p)+Math.abs(y)||0,x)*E),T=Math.ceil(Math.max(Math.abs(m)+Math.abs(S)||d,Math.abs(v)+Math.abs(w)||d)*E);u=new OffscreenCanvas(_,T),h=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=f,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,_,T),h.fillStyle="black",h.fillText(t,_*(E-1)/2,T*(3-E)/2);const k=b(this,gt,wy).call(this,h.getImageData(0,0,_,T).data),P=b(this,gt,dE).call(this,k),L=b(this,gt,Ay).call(this,P),R=b(this,gt,vy).call(this,k,_,T,L);return this.processDrawnLines({lines:{curves:R,width:_,height:T},pageWidth:r,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(t,e,i,s,r){const[o,l,c]=b(this,gt,fE).call(this,t),[u,h]=b(this,gt,hE).call(this,o,l,c,Math.hypot(l,c)*a(this,Ta).sigmaSFactor,a(this,Ta).sigmaR,a(this,Ta).kernelSize),d=b(this,gt,Ay).call(this,h),f=b(this,gt,vy).call(this,u,l,c,d);return this.processDrawnLines({lines:{curves:f,width:l,height:c},pageWidth:e,pageHeight:i,rotation:s,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:s,innerMargin:r,mustSmooth:o,areContours:l}){s%180!==0&&([e,i]=[i,e]);const{curves:c,width:u,height:h}=t,d=t.thickness??0,f=[],p=Math.min(e/u,i/h),y=p/e,m=p/i,S=[];for(const{points:w}of c){const x=o?b(this,gt,uE).call(this,w):w;if(!x)continue;S.push(x);const E=x.length,_=new Float32Array(E),T=new Float32Array(3*(E===2?2:E-2));if(f.push({line:T,points:_}),E===2){_[0]=x[0]*y,_[1]=x[1]*m,T.set([NaN,NaN,NaN,NaN,_[0],_[1]],0);continue}let[k,P,L,R]=x;k*=y,P*=m,L*=y,R*=m,_.set([k,P,L,R],0),T.set([NaN,NaN,NaN,NaN,k,P],0);for(let M=4;M<E;M+=2){const Y=_[M]=x[M]*y,Z=_[M+1]=x[M+1]*m;T.set(B.createBezierPoints(k,P,L,R,Y,Z),(M-2)*3),[k,P,L,R]=[L,R,Y,Z]}}if(f.length===0)return null;const v=l?new my:new Yd;return v.build(f,e,i,1,s,l?0:d,r),{outline:v,newCurves:S,areContours:l,thickness:d,width:u,height:h}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:s,height:r}){let o=1/0,l=-1/0,c=0;for(const x of t){c+=x.length;for(let E=2,_=x.length;E<_;E++){const T=x[E]-x[E-2];o=Math.min(o,T),l=Math.max(l,T)}}let u;o>=-128&&l<=127?u=Int8Array:o>=-32768&&l<=32767?u=Int16Array:u=Int32Array;const h=t.length,d=Cf+au*h,f=new Uint32Array(d);let p=0;f[p++]=d*Uint32Array.BYTES_PER_ELEMENT+(c-2*h)*u.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=s,f[p++]=r,f[p++]=e?0:1,f[p++]=Math.max(0,Math.floor(i??0)),f[p++]=h,f[p++]=u.BYTES_PER_ELEMENT;for(const x of t)f[p++]=x.length-2,f[p++]=x[0],f[p++]=x[1];const y=new CompressionStream("deflate-raw"),m=y.writable.getWriter();await m.ready,m.write(f);const S=u.prototype.constructor;for(const x of t){const E=new S(x.length-2);for(let _=2,T=x.length;_<T;_++)E[_-2]=x[_]-x[_-2];m.write(E)}m.close();const v=await new Response(y.readable).arrayBuffer(),w=new Uint8Array(v);return cx(w)}static async decompressSignature(t){try{const e=dk(t),{readable:i,writable:s}=new DecompressionStream("deflate-raw"),r=s.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,l=0;for await(const x of i)o||(o=new Uint8Array(new Uint32Array(x.buffer,0,4)[0])),o.set(x,l),l+=x.length;const c=new Uint32Array(o.buffer,0,o.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const h=c[2],d=c[3],f=c[4]===0,p=c[5],y=c[6],m=c[7],S=[],v=(Cf+au*y)*Uint32Array.BYTES_PER_ELEMENT;let w;switch(m){case Int8Array.BYTES_PER_ELEMENT:w=new Int8Array(o.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:w=new Int16Array(o.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:w=new Int32Array(o.buffer,v);break}l=0;for(let x=0;x<y;x++){const E=c[au*x+Cf],_=new Float32Array(E+2);S.push(_);for(let T=0;T<au-1;T++)_[T]=c[au*x+Cf+T+1];for(let T=0;T<E;T++)_[T+2]=_[T]+w[l++]}return{areContours:f,thickness:p,outlines:S,width:h,height:d}}catch(e){return J(`decompressSignature: ${e}`),null}}}Ta=new WeakMap,gt=new WeakSet,yy=function(t,e,i,s){return i-=t,s-=e,i===0?s>0?0:4:i===1?s+6:2-s},wi=new WeakMap,lE=function(t,e,i,s,r,o,l){const c=b(this,gt,yy).call(this,i,s,r,o);for(let u=0;u<8;u++){const h=(-u+c-l+16)%8,d=a(this,wi)[2*h],f=a(this,wi)[2*h+1];if(t[(i+d)*e+(s+f)]!==0)return h}return-1},cE=function(t,e,i,s,r,o,l){const c=b(this,gt,yy).call(this,i,s,r,o);for(let u=0;u<8;u++){const h=(u+c+l+16)%8,d=a(this,wi)[2*h],f=a(this,wi)[2*h+1];if(t[(i+d)*e+(s+f)]!==0)return h}return-1},vy=function(t,e,i,s){const r=t.length,o=new Int32Array(r);for(let h=0;h<r;h++)o[h]=t[h]<=s?1:0;for(let h=1;h<i-1;h++)o[h*e]=o[h*e+e-1]=0;for(let h=0;h<e;h++)o[h]=o[e*i-1-h]=0;let l=1,c;const u=[];for(let h=1;h<i-1;h++){c=1;for(let d=1;d<e-1;d++){const f=h*e+d,p=o[f];if(p===0)continue;let y=h,m=d;if(p===1&&o[f-1]===0)l+=1,m-=1;else if(p>=1&&o[f+1]===0)l+=1,m+=1,p>1&&(c=p);else{p!==1&&(c=Math.abs(p));continue}const S=[d,h],v=m===d+1,w={isHole:v,points:S,id:l,parent:0};u.push(w);let x;for(const M of u)if(M.id===c){x=M;break}x?x.isHole?w.parent=v?x.parent:c:w.parent=v?c:x.parent:w.parent=v?c:0;const E=b(this,gt,lE).call(this,o,e,h,d,y,m,0);if(E===-1){o[f]=-l,o[f]!==1&&(c=Math.abs(o[f]));continue}let _=a(this,wi)[2*E],T=a(this,wi)[2*E+1];const k=h+_,P=d+T;y=k,m=P;let L=h,R=d;for(;;){const M=b(this,gt,cE).call(this,o,e,L,R,y,m,1);_=a(this,wi)[2*M],T=a(this,wi)[2*M+1];const Y=L+_,Z=R+T;S.push(Z,Y);const K=L*e+R;if(o[K+1]===0?o[K]=-l:o[K]===1&&(o[K]=l),Y===h&&Z===d&&L===k&&R===P){o[f]!==1&&(c=Math.abs(o[f]));break}else y=L,m=R,L=Y,R=Z}}}return u},cp=function(t,e,i,s){if(i-e<=4){for(let k=e;k<i-2;k+=2)s.push(t[k],t[k+1]);return}const r=t[e],o=t[e+1],l=t[i-4]-r,c=t[i-3]-o,u=Math.hypot(l,c),h=l/u,d=c/u,f=h*o-d*r,p=c/l,y=1/u,m=Math.atan(p),S=Math.cos(m),v=Math.sin(m),w=y*(Math.abs(S)+Math.abs(v)),x=y*(1-w+w**2),E=Math.max(Math.atan(Math.abs(v+S)*x),Math.atan(Math.abs(v-S)*x));let _=0,T=e;for(let k=e+2;k<i-2;k+=2){const P=Math.abs(f-h*t[k+1]+d*t[k]);P>_&&(T=k,_=P)}_>(u*E)**2?(b(this,gt,cp).call(this,t,e,T+2,s),b(this,gt,cp).call(this,t,T,i,s)):s.push(r,o)},uE=function(t){const e=[],i=t.length;return b(this,gt,cp).call(this,t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e},hE=function(t,e,i,s,r,o){const l=new Float32Array(o**2),c=-2*s**2,u=o>>1;for(let m=0;m<o;m++){const S=(m-u)**2;for(let v=0;v<o;v++)l[m*o+v]=Math.exp((S+(v-u)**2)/c)}const h=new Float32Array(256),d=-2*r**2;for(let m=0;m<256;m++)h[m]=Math.exp(m**2/d);const f=t.length,p=new Uint8Array(f),y=new Uint32Array(256);for(let m=0;m<i;m++)for(let S=0;S<e;S++){const v=m*e+S,w=t[v];let x=0,E=0;for(let T=0;T<o;T++){const k=m+T-u;if(!(k<0||k>=i))for(let P=0;P<o;P++){const L=S+P-u;if(L<0||L>=e)continue;const R=t[k*e+L],M=l[T*o+P]*h[Math.abs(R-w)];x+=R*M,E+=M}}const _=p[v]=Math.round(x/E);y[_]++}return[p,y]},dE=function(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e},wy=function(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let s=-1/0,r=1/0;for(let l=0,c=i.length;l<c;l++){if(t[(l<<2)+3]===0){s=i[l]=255;continue}const h=i[l]=t[l<<2];h>s&&(s=h),h<r&&(r=h)}const o=255/(s-r);for(let l=0;l<e;l++)i[l]=(i[l]-r)*o;return i},Ay=function(t){let e,i=-1/0,s=-1/0;const r=t.findIndex(c=>c!==0);let o=r,l=r;for(e=r;e<256;e++){const c=t[e];c>i&&(e-o>s&&(s=e-o,l=e-1),i=c,o=e)}for(e=l-1;e>=0&&!(t[e]>t[e+1]);e--);return e},fE=function(t){const e=t,{width:i,height:s}=t,{maxDim:r}=a(this,Ta);let o=i,l=s;if(i>r||s>r){let f=i,p=s,y=Math.log2(Math.max(i,s)/r);const m=Math.floor(y);y=y===m?m-1:m;for(let v=0;v<y;v++){o=Math.ceil(f/2),l=Math.ceil(p/2);const w=new OffscreenCanvas(o,l);w.getContext("2d").drawImage(t,0,0,f,p,0,0,o,l),f=o,p=l,t!==e&&t.close(),t=w.transferToImageBitmap()}const S=Math.min(r/o,r/l);o=Math.round(o*S),l=Math.round(l*S)}const u=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});u.filter="grayscale(1)",u.drawImage(t,0,0,t.width,t.height,0,0,o,l);const h=u.getImageData(0,0,o,l).data;return[b(this,gt,wy).call(this,h),o,l]},A(es,gt),A(es,Ta,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),A(es,wi,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class F1 extends nE{constructor(){super(),super.updateProperties({fill:Ct._defaultLineColor,"stroke-width":0})}clone(){const t=new F1;return t.updateAll(this),t}}class j1 extends Og{constructor(t){super(t),super.updateProperties({stroke:Ct._defaultLineColor,"stroke-width":1})}clone(){const t=new j1(this._viewParameters);return t.updateAll(this),t}}var jr,Tn,zr,$r;const mn=class mn extends Wp{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});A(this,jr,!1);A(this,Tn,null);A(this,zr,null);A(this,$r,null);this._willKeepAspectRatio=!0,g(this,zr,e.signatureData||null),g(this,Tn,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,i){Ct.initialize(e,i),this._defaultDrawingOptions=new F1,this._defaultDrawnSignatureOptions=new j1(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return rt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!a(this,Tn)}}static computeTelemetryFinalData(e){const i=e.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,i=this.y),super.render(),this._drawId===null)if(a(this,zr)){const{lines:r,mustSmooth:o,areContours:l,description:c,uuid:u,heightInPage:h}=a(this,zr),{rawDims:{pageWidth:d,pageHeight:f},rotation:p}=this.parent.viewport,y=es.processDrawnLines({lines:r,pageWidth:d,pageHeight:f,rotation:p,innerMargin:mn._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(y,h,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return s&&(this._isCopy=!0,this._moveAfterPaste(e,i)),this.div}setUuid(e){g(this,$r,e),this.addEditToolbar()}getUuid(){return a(this,$r)}get description(){return a(this,Tn)}set description(e){g(this,Tn,e),super.addEditToolbar().then(i=>{i==null||i.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:i,thickness:s,width:r,height:o}=a(this,zr),l=Math.max(r,o),c=es.processDrawnLines({lines:{curves:e.map(u=>({points:u})),thickness:s,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:c.outline}}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.signatureManager&&a(this,Tn)!==null&&(await e.addEditSignatureButton(this._uiManager.signatureManager,a(this,$r),a(this,Tn)),e.show()),e):null}addSignature(e,i,s,r){const{x:o,y:l}=this,{outline:c}=g(this,zr,e);g(this,jr,c instanceof my),g(this,Tn,s),this.div.setAttribute("data-l10n-args",JSON.stringify({description:s}));let u;a(this,jr)?u=mn.getDefaultDrawingOptions():(u=mn._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[h,d]=this.parentDimensions,[,f]=this.pageDimensions;let p=i/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(h*this.width,d*this.height),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return es.process(e,i,s,r,mn._INNER_MARGIN)}getFromText(e,i){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return es.extractContoursFromText(e,i,s,r,o,mn._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return es.processDrawnLines({lines:e,pageWidth:i,pageHeight:s,rotation:r,innerMargin:mn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:i}){e?this._drawingOptions=mn.getDefaultDrawingOptions():(this._drawingOptions=mn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:i,points:s,rect:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,l={annotationType:Q.SIGNATURE,isSignature:!0,areContours:a(this,jr),color:[0,0,0],thickness:a(this,jr)?0:o,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(l.paths={lines:i,points:s},l.uuid=a(this,$r),l.isCopy=!0):l.lines=i,a(this,Tn)&&(l.accessibilityData={type:"Figure",alt:a(this,Tn)}),l}static deserializeDraw(e,i,s,r,o,l){return l.areContours?my.deserialize(e,i,s,r,o,l):Yd.deserialize(e,i,s,r,o,l)}static async deserialize(e,i,s){var o;const r=await super.deserialize(e,i,s);return g(r,jr,e.areContours),g(r,Tn,((o=e.accessibilityData)==null?void 0:o.alt)||""),g(r,$r,e.uuid),r}};jr=new WeakMap,Tn=new WeakMap,zr=new WeakMap,$r=new WeakMap,N(mn,"_type","signature"),N(mn,"_editorType",Q.SIGNATURE),N(mn,"_defaultDrawingOptions",null);let by=mn;var Mt,ge,Br,js,Hr,Lc,zs,Pa,Qi,Pn,Mc,ht,Pu,Ru,up,hp,dp,Sy,fp,pE;class xy extends Ct{constructor(e){super({...e,name:"stampEditor"});A(this,ht);A(this,Mt,null);A(this,ge,null);A(this,Br,null);A(this,js,null);A(this,Hr,null);A(this,Lc,"");A(this,zs,null);A(this,Pa,!1);A(this,Qi,null);A(this,Pn,!1);A(this,Mc,!1);g(this,js,e.bitmapUrl),g(this,Hr,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,i){Ct.initialize(e,i)}static isHandlingMimeForPasting(e){return Hp.includes(e)}static paste(e,i){i.pasteEditor({mode:Q.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const i=e.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(e=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=e||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),i&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var e;a(this,ge)&&(g(this,Mt,null),this._uiManager.imageManager.deleteId(a(this,ge)),(e=a(this,zs))==null||e.remove(),g(this,zs,null),a(this,Qi)&&(clearTimeout(a(this,Qi)),g(this,Qi,null))),super.remove()}rebuild(){if(!this.parent){a(this,ge)&&b(this,ht,up).call(this);return}super.rebuild(),this.div!==null&&(a(this,ge)&&a(this,zs)===null&&b(this,ht,up).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(a(this,Br)||a(this,Mt)||a(this,js)||a(this,Hr)||a(this,ge)||a(this,Pa))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,i;return this._isCopy&&(e=this.x,i=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),a(this,Pa)||(a(this,Mt)?b(this,ht,hp).call(this):b(this,ht,up).call(this)),this._isCopy&&this._moveAfterPaste(e,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,i){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(g(this,ge,s),r&&g(this,Mt,r),g(this,Pa,!1),b(this,ht,hp).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,Qi)!==null&&clearTimeout(a(this,Qi)),g(this,Qi,setTimeout(()=>{g(this,Qi,null),b(this,ht,Sy).call(this)},200))}copyCanvas(e,i,s=!1){var p;e||(e=224);const{width:r,height:o}=a(this,Mt),l=new Ti;let c=a(this,Mt),u=r,h=o,d=null;if(i){if(r>i||o>i){const P=Math.min(i/r,i/o);u=Math.floor(r*P),h=Math.floor(o*P)}d=document.createElement("canvas");const y=d.width=Math.ceil(u*l.sx),m=d.height=Math.ceil(h*l.sy);a(this,Pn)||(c=b(this,ht,dp).call(this,y,m));const S=d.getContext("2d");S.filter=this._uiManager.hcmFilter;let v="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(v="#8f8f9d",w="#42414d");const x=15,E=x*l.sx,_=x*l.sy,T=new OffscreenCanvas(E*2,_*2),k=T.getContext("2d");k.fillStyle=v,k.fillRect(0,0,E*2,_*2),k.fillStyle=w,k.fillRect(0,0,E,_),k.fillRect(E,_,E,_),S.fillStyle=S.createPattern(T,"repeat"),S.fillRect(0,0,y,m),S.drawImage(c,0,0,c.width,c.height,0,0,y,m)}let f=null;if(s){let y,m;if(l.symmetric&&c.width<e&&c.height<e)y=c.width,m=c.height;else if(c=a(this,Mt),r>e||o>e){const w=Math.min(e/r,e/o);y=Math.floor(r*w),m=Math.floor(o*w),a(this,Pn)||(c=b(this,ht,dp).call(this,y,m))}const v=new OffscreenCanvas(y,m).getContext("2d",{willReadFrequently:!0});v.drawImage(c,0,0,c.width,c.height,0,0,y,m),f={width:y,height:m,data:v.getImageData(0,0,y,m).data}}return{canvas:d,width:u,height:h,imageData:f}}static async deserialize(e,i,s){var S;let r=null,o=!1;if(e instanceof PS){const{data:{rect:v,rotation:w,id:x,structParent:E,popupRef:_},container:T,parent:{page:{pageNumber:k}},canvas:P}=e;let L,R;P?(delete e.canvas,{id:L,bitmap:R}=s.imageManager.getFromCanvas(T.id,P),P.remove()):(o=!0,e._hasNoCanvas=!0);const M=((S=await i._structTree.getAriaAttributes(`${k1}${x}`))==null?void 0:S.get("aria-label"))||"";r=e={annotationType:Q.STAMP,bitmapId:L,bitmap:R,pageIndex:k-1,rect:v.slice(0),rotation:w,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:M},isSvg:!1,structParent:E,popupRef:_}}const l=await super.deserialize(e,i,s),{rect:c,bitmap:u,bitmapUrl:h,bitmapId:d,isSvg:f,accessibilityData:p}=e;o?(s.addMissingCanvas(e.id,l),g(l,Pa,!0)):d&&s.imageManager.isValidId(d)?(g(l,ge,d),u&&g(l,Mt,u)):g(l,js,h),g(l,Pn,f);const[y,m]=l.pageDimensions;return l.width=(c[2]-c[0])/y,l.height=(c[3]-c[1])/m,l.annotationElementId=e.id||null,p&&(l.altTextData=p),l._initialData=r,g(l,Mc,!!r),l}serialize(e=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:Q.STAMP,bitmapId:a(this,ge),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,Pn),structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=b(this,ht,fp).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=b(this,ht,pE).call(this,s);if(c.isSame)return null;c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,i===null)return s;i.stamps||(i.stamps=new Map);const l=a(this,Pn)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(a(this,ge)))i.stamps.set(a(this,ge),{area:l,serialized:s}),s.bitmap=b(this,ht,fp).call(this,!1);else if(a(this,Pn)){const c=i.stamps.get(a(this,ge));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=b(this,ht,fp).call(this,!1))}return s}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}Mt=new WeakMap,ge=new WeakMap,Br=new WeakMap,js=new WeakMap,Hr=new WeakMap,Lc=new WeakMap,zs=new WeakMap,Pa=new WeakMap,Qi=new WeakMap,Pn=new WeakMap,Mc=new WeakMap,ht=new WeakSet,Pu=function(e,i=!1){if(!e){this.remove();return}g(this,Mt,e.bitmap),i||(g(this,ge,e.id),g(this,Pn,e.isSvg)),e.file&&g(this,Lc,e.file.name),b(this,ht,hp).call(this)},Ru=function(){if(g(this,Br,null),this._uiManager.enableWaiting(!1),!!a(this,zs)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Mt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Mt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},up=function(){if(a(this,ge)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,ge)).then(s=>b(this,ht,Pu).call(this,s,!0)).finally(()=>b(this,ht,Ru).call(this));return}if(a(this,js)){const s=a(this,js);g(this,js,null),this._uiManager.enableWaiting(!0),g(this,Br,this._uiManager.imageManager.getFromUrl(s).then(r=>b(this,ht,Pu).call(this,r)).finally(()=>b(this,ht,Ru).call(this)));return}if(a(this,Hr)){const s=a(this,Hr);g(this,Hr,null),this._uiManager.enableWaiting(!0),g(this,Br,this._uiManager.imageManager.getFromFile(s).then(r=>b(this,ht,Pu).call(this,r)).finally(()=>b(this,ht,Ru).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Hp.join(",");const i=this._uiManager._signal;g(this,Br,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),b(this,ht,Pu).call(this,r)}s()},{signal:i}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>b(this,ht,Ru).call(this))),e.click()},hp=function(){var d;const{div:e}=this;let{width:i,height:s}=a(this,Mt);const[r,o]=this.pageDimensions,l=.75;if(this.width)i=this.width*r,s=this.height*o;else if(i>l*r||s>l*o){const f=Math.min(l*r/i,l*o/s);i*=f,s*=f}const[c,u]=this.parentDimensions;this.setDims(i*c/r,s*u/o),this._uiManager.enableWaiting(!1);const h=g(this,zs,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=i/r,this.height=s/o,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),b(this,ht,Sy).call(this),a(this,Mc)||(this.parent.addUndoableEditor(this),g(this,Mc,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,Lc)&&this.div.setAttribute("aria-description",a(this,Lc))},dp=function(e,i){const{width:s,height:r}=a(this,Mt);let o=s,l=r,c=a(this,Mt);for(;o>2*e||l>2*i;){const u=o,h=l;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*i&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const d=new OffscreenCanvas(o,l);d.getContext("2d").drawImage(c,0,0,u,h,0,0,o,l),c=d.transferToImageBitmap()}return c},Sy=function(){const[e,i]=this.parentDimensions,{width:s,height:r}=this,o=new Ti,l=Math.ceil(s*e*o.sx),c=Math.ceil(r*i*o.sy),u=a(this,zs);if(!u||u.width===l&&u.height===c)return;u.width=l,u.height=c;const h=a(this,Pn)?a(this,Mt):b(this,ht,dp).call(this,l,c),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,l,c)},fp=function(e){if(e){if(a(this,Pn)){const r=this._uiManager.imageManager.getSvgUrl(a(this,ge));if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=a(this,Mt),i.getContext("2d").drawImage(a(this,Mt),0,0),i.toDataURL()}if(a(this,Pn)){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*Js.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*Js.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(a(this,Mt),0,0,a(this,Mt).width,a(this,Mt).height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(a(this,Mt))},pE=function(e){var l;const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=e.pageIndex===i,o=(((l=e.accessibilityData)==null?void 0:l.alt)||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},N(xy,"_type","stamp"),N(xy,"_editorType",Q.STAMP);var Ra,Ic,Zi,Ur,$s,Kn,Vr,Nc,La,Ai,Bs,je,Hs,G,Gr,It,gE,Di,Ey,_y,pp;const ai=class ai{constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:s,accessibilityManager:r,annotationLayer:o,drawLayer:l,textLayer:c,viewport:u,l10n:h}){A(this,It);A(this,Ra);A(this,Ic,!1);A(this,Zi,null);A(this,Ur,null);A(this,$s,null);A(this,Kn,new Map);A(this,Vr,!1);A(this,Nc,!1);A(this,La,!1);A(this,Ai,null);A(this,Bs,null);A(this,je,null);A(this,Hs,null);A(this,G);const d=[...a(ai,Gr).values()];if(!ai._initialized){ai._initialized=!0;for(const f of d)f.initialize(h,t)}t.registerEditorTypes(d),g(this,G,t),this.pageIndex=e,this.div=i,g(this,Ra,r),g(this,Zi,o),this.viewport=u,g(this,je,c),this.drawLayer=l,this._structTree=s,a(this,G).addLayer(this)}get isEmpty(){return a(this,Kn).size===0}get isInvisible(){return this.isEmpty&&a(this,G).getMode()===Q.NONE}updateToolbar(t){a(this,G).updateToolbar(t)}updateMode(t=a(this,G).getMode()){switch(b(this,It,pp).call(this),t){case Q.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Q.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Q.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of a(ai,Gr).values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=a(this,je))==null?void 0:e.div)}setEditingState(t){a(this,G).setEditingState(t)}addCommands(t){a(this,G).addCommands(t)}cleanUndoStack(t){a(this,G).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=a(this,Zi))==null||e.div.classList.toggle("disabled",!t)}async enable(){g(this,La,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of a(this,Kn).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(a(this,G).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!a(this,Zi)){g(this,La,!1);return}const e=a(this,Zi).getEditableAnnotations();for(const i of e){if(i.hide(),a(this,G).isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}g(this,La,!1)}disable(){var s;g(this,Nc,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of a(this,Kn).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(s=this.getEditableAnnotation(r.annotationElementId))==null||s.show(),r.remove()}if(a(this,Zi)){const r=a(this,Zi).getEditableAnnotations();for(const o of r){const{id:l}=o.data;if(a(this,G).isDeletedAnnotationElement(l))continue;let c=e.get(l);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=t.get(l),c&&(a(this,G).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}b(this,It,pp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of a(ai,Gr).values())i.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),g(this,Nc,!1)}getEditableAnnotation(t){var e;return((e=a(this,Zi))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){a(this,G).getActive()!==t&&a(this,G).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=a(this,je))!=null&&t.div&&!a(this,Hs)){g(this,Hs,new AbortController);const e=a(this,G).combinedSignal(a(this,Hs));a(this,je).div.addEventListener("pointerdown",b(this,It,gE).bind(this),{signal:e}),a(this,je).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=a(this,je))!=null&&t.div&&a(this,Hs)&&(a(this,Hs).abort(),g(this,Hs,null),a(this,je).div.classList.remove("highlighting"))}enableClick(){if(a(this,Ur))return;g(this,Ur,new AbortController);const t=a(this,G).combinedSignal(a(this,Ur));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=a(this,Ur))==null||t.abort(),g(this,Ur,null)}attach(t){a(this,Kn).set(t.id,t);const{annotationElementId:e}=t;e&&a(this,G).isDeletedAnnotationElement(e)&&a(this,G).removeDeletedAnnotationElement(t)}detach(t){var e;a(this,Kn).delete(t.id),(e=a(this,Ra))==null||e.removePointerInTextLayer(t.contentDiv),!a(this,Nc)&&t.annotationElementId&&a(this,G).addDeletedAnnotationElement(t)}remove(t){this.detach(t),a(this,G).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(a(this,G).addDeletedAnnotationElement(t.annotationElementId),Ct.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),a(this,G).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!a(this,La)),a(this,G).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var i;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!a(this,$s)&&(t._focusEventsAllowed=!1,g(this,$s,setTimeout(()=>{g(this,$s,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:a(this,G)._signal}),e.focus())},0))),t._structTreeParentId=(i=a(this,Ra))==null?void 0:i.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return a(this,G).getId()}combinedSignal(t){return a(this,G).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=a(this,It,Di))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await a(this,G).updateMode(t.mode);const{offsetX:i,offsetY:s}=b(this,It,_y).call(this),r=this.getNextId(),o=b(this,It,Ey).call(this,{parent:this,id:r,x:i,y:s,uiManager:a(this,G),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=a(ai,Gr).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,a(this,G)))||null}createAndAddNewEditor(t,e,i={}){const s=this.getNextId(),r=b(this,It,Ey).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:a(this,G),isCentered:e,...i});return r&&this.add(r),r}addNewEditor(t={}){this.createAndAddNewEditor(b(this,It,_y).call(this),!0,t)}setSelected(t){a(this,G).setSelected(t)}toggleSelected(t){a(this,G).toggleSelected(t)}unselect(t){a(this,G).unselect(t)}pointerup(t){var s;const{isMac:e}=ve.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!a(this,Vr)||(g(this,Vr,!1),(s=a(this,It,Di))!=null&&s.isDrawer&&a(this,It,Di).supportMultipleDrawings))return;if(!a(this,Ic)){g(this,Ic,!0);return}const i=a(this,G).getMode();if(i===Q.STAMP||i===Q.SIGNATURE){a(this,G).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var s;if(a(this,G).getMode()===Q.HIGHLIGHT&&this.enableTextSelection(),a(this,Vr)){g(this,Vr,!1);return}const{isMac:e}=ve.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(g(this,Vr,!0),(s=a(this,It,Di))!=null&&s.isDrawer){this.startDrawingSession(t);return}const i=a(this,G).getActive();g(this,Ic,!i||i.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),a(this,Ai)){a(this,It,Di).startDrawing(this,a(this,G),!1,t);return}a(this,G).setCurrentDrawingSession(this),g(this,Ai,new AbortController);const e=a(this,G).combinedSignal(a(this,Ai));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(g(this,Bs,null),this.commitOrRemove())},{signal:e}),a(this,It,Di).startDrawing(this,a(this,G),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&g(this,Bs,e);return}a(this,Bs)&&setTimeout(()=>{var e;(e=a(this,Bs))==null||e.focus(),g(this,Bs,null)},0)}endDrawingSession(t=!1){return a(this,Ai)?(a(this,G).setCurrentDrawingSession(null),a(this,Ai).abort(),g(this,Ai,null),g(this,Bs,null),a(this,It,Di).endDrawing(t)):null}findNewParent(t,e,i){const s=a(this,G).findParent(e,i);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return a(this,Ai)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,Ai)&&a(this,It,Di).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=a(this,G).getActive())==null?void 0:t.parent)===this&&(a(this,G).commitOrRemove(),a(this,G).setActiveEditor(null)),a(this,$s)&&(clearTimeout(a(this,$s)),g(this,$s,null));for(const i of a(this,Kn).values())(e=a(this,Ra))==null||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,a(this,Kn).clear(),a(this,G).removeLayer(this)}render({viewport:t}){this.viewport=t,so(this.div,t);for(const e of a(this,G).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){a(this,G).commitOrRemove(),b(this,It,pp).call(this);const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,so(this.div,{rotation:i}),e!==i)for(const s of a(this,Kn).values())s.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return a(this,G).viewParameters.realScale}};Ra=new WeakMap,Ic=new WeakMap,Zi=new WeakMap,Ur=new WeakMap,$s=new WeakMap,Kn=new WeakMap,Vr=new WeakMap,Nc=new WeakMap,La=new WeakMap,Ai=new WeakMap,Bs=new WeakMap,je=new WeakMap,Hs=new WeakMap,G=new WeakMap,Gr=new WeakMap,It=new WeakSet,gE=function(t){a(this,G).unselectAll();const{target:e}=t;if(e===a(this,je).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&a(this,je).div.contains(e)){const{isMac:i}=ve.platform;if(t.button!==0||t.ctrlKey&&i)return;a(this,G).showAllEditors("highlight",!0,!0),a(this,je).div.classList.add("free"),this.toggleDrawing(),Gp.startHighlighting(this,a(this,G).direction==="ltr",{target:a(this,je).div,x:t.x,y:t.y}),a(this,je).div.addEventListener("pointerup",()=>{a(this,je).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,G)._signal}),t.preventDefault()}},Di=function(){return a(ai,Gr).get(a(this,G).getMode())},Ey=function(t){const e=a(this,It,Di);return e?new e.prototype.constructor(t):null},_y=function(){const{x:t,y:e,width:i,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),l=Math.min(window.innerWidth,t+i),c=Math.min(window.innerHeight,e+s),u=(r+l)/2-t,h=(o+c)/2-e,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},pp=function(){for(const t of a(this,Kn).values())t.isEmpty()&&t.remove()},N(ai,"_initialized",!1),A(ai,Gr,new Map([ny,gy,xy,Gp,by].map(t=>[t._editorType,t])));let Xp=ai;var bi,Ye,Ma,Fd,fg,mE,ss,Cy,yE,ky;const ie=class ie{constructor({pageIndex:t}){A(this,ss);A(this,bi,null);A(this,Ye,new Map);A(this,Ma,new Map);this.pageIndex=t}setParent(t){if(!a(this,bi)){g(this,bi,t);return}if(a(this,bi)!==t){if(a(this,Ye).size>0)for(const e of a(this,Ye).values())e.remove(),t.append(e);g(this,bi,t)}}static get _svgFactory(){return rt(this,"_svgFactory",new ch)}draw(t,e=!1,i=!1){const s=Ge(ie,Fd)._++,r=b(this,ss,Cy).call(this),o=ie._svgFactory.createElement("defs");r.append(o);const l=ie._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),e&&a(this,Ma).set(s,l);const u=i?b(this,ss,yE).call(this,o,c):null,h=ie._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(r,t),a(this,Ye).set(s,r),{id:s,clipPathId:`url(#${u})`}}drawOutline(t,e){const i=Ge(ie,Fd)._++,s=b(this,ss,Cy).call(this),r=ie._svgFactory.createElement("defs");s.append(r);const o=ie._svgFactory.createElement("path");r.append(o);const l=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const d=ie._svgFactory.createElement("mask");r.append(d),c=`mask_p${this.pageIndex}_${i}`,d.setAttribute("id",c),d.setAttribute("maskUnits","objectBoundingBox");const f=ie._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=ie._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${l}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=ie._svgFactory.createElement("use");s.append(u),u.setAttribute("href",`#${l}`),c&&u.setAttribute("mask",`url(#${c})`);const h=u.cloneNode();return s.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,t),a(this,Ye).set(i,s),i}finalizeDraw(t,e){a(this,Ma).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;const{root:i,bbox:s,rootClass:r,path:o}=e,l=typeof t=="number"?a(this,Ye).get(t):t;if(l){if(i&&b(this,ss,ky).call(this,l,i),s&&b(c=ie,fg,mE).call(c,l,s),r){const{classList:u}=l;for(const[h,d]of Object.entries(r))u.toggle(h,d)}if(o){const h=l.firstChild.firstChild;b(this,ss,ky).call(this,h,o)}}}updateParent(t,e){if(e===this)return;const i=a(this,Ye).get(t);i&&(a(e,bi).append(i),a(this,Ye).delete(t),a(e,Ye).set(t,i))}remove(t){a(this,Ma).delete(t),a(this,bi)!==null&&(a(this,Ye).get(t).remove(),a(this,Ye).delete(t))}destroy(){g(this,bi,null);for(const t of a(this,Ye).values())t.remove();a(this,Ye).clear(),a(this,Ma).clear()}};bi=new WeakMap,Ye=new WeakMap,Ma=new WeakMap,Fd=new WeakMap,fg=new WeakSet,mE=function(t,[e,i,s,r]){const{style:o}=t;o.top=`${100*i}%`,o.left=`${100*e}%`,o.width=`${100*s}%`,o.height=`${100*r}%`},ss=new WeakSet,Cy=function(){const t=ie._svgFactory.create(1,1,!0);return a(this,bi).append(t),t.setAttribute("aria-hidden",!0),t},yE=function(t,e){const i=ie._svgFactory.createElement("clipPath");t.append(i);const s=`clip_${e}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const r=ie._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),s},ky=function(t,e){for(const[i,s]of Object.entries(e))s===null?t.removeAttribute(i):t.setAttribute(i,s)},A(ie,fg),A(ie,Fd,0);let Kp=ie;globalThis._pdfjsTestingUtils={HighlightOutliner:sy};globalThis.pdfjsLib={AbortException:Zs,AnnotationEditorLayer:Xp,AnnotationEditorParamsType:lt,AnnotationEditorType:Q,AnnotationEditorUIManager:ro,AnnotationLayer:O1,AnnotationMode:ts,AnnotationType:Wt,build:yS,ColorPicker:uh,createValidAbsoluteUrl:E1,DOMSVGFactory:ch,DrawLayer:Kp,FeatureTest:ve,fetchData:Xc,getDocument:M1,getFilenameFromUrl:ux,getPdfFilenameFromUrl:hx,getUuid:C1,getXfaPageViewport:dx,GlobalWorkerOptions:Qn,ImageKind:$u,InvalidPDFException:Bp,isDataScheme:Wd,isPdfFile:Ig,isValidExplicitDest:Xx,MathClamp:ze,noContextMenu:si,normalizeUnicode:lx,OPS:sh,OutputScale:Ti,PasswordResponses:ox,PDFDataRangeTransport:I1,PDFDateString:Ng,PDFWorker:Hc,PermissionFlag:rx,PixelsPerInch:Js,RenderingCancelledException:Mg,ResponseException:rh,setLayerDimensions:so,shadow:rt,SignatureExtractor:es,stopEvent:qt,SupportedImageMimeTypes:Hp,TextLayer:ah,TouchManager:oh,updateUrlHash:_1,Util:W,VerbosityLevel:Ud,version:mS,XfaLayer:N1};const FT=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Zs,AnnotationEditorLayer:Xp,AnnotationEditorParamsType:lt,AnnotationEditorType:Q,AnnotationEditorUIManager:ro,AnnotationLayer:O1,AnnotationMode:ts,AnnotationType:Wt,ColorPicker:uh,DOMSVGFactory:ch,DrawLayer:Kp,FeatureTest:ve,GlobalWorkerOptions:Qn,ImageKind:$u,InvalidPDFException:Bp,MathClamp:ze,OPS:sh,OutputScale:Ti,PDFDataRangeTransport:I1,PDFDateString:Ng,PDFWorker:Hc,PasswordResponses:ox,PermissionFlag:rx,PixelsPerInch:Js,RenderingCancelledException:Mg,ResponseException:rh,SignatureExtractor:es,SupportedImageMimeTypes:Hp,TextLayer:ah,TouchManager:oh,Util:W,VerbosityLevel:Ud,XfaLayer:N1,build:yS,createValidAbsoluteUrl:E1,fetchData:Xc,getDocument:M1,getFilenameFromUrl:ux,getPdfFilenameFromUrl:hx,getUuid:C1,getXfaPageViewport:dx,isDataScheme:Wd,isPdfFile:Ig,isValidExplicitDest:Xx,noContextMenu:si,normalizeUnicode:lx,setLayerDimensions:so,shadow:rt,stopEvent:qt,updateUrlHash:_1,version:mS},Symbol.toStringTag,{value:"Module"})),jT=["onCopy","onCut","onPaste"],zT=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],$T=["onFocus","onBlur"],BT=["onInput","onInvalid","onReset","onSubmit"],HT=["onLoad","onError"],UT=["onKeyDown","onKeyPress","onKeyUp"],VT=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],GT=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],WT=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],XT=["onSelect"],KT=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],qT=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],YT=["onScroll"],QT=["onWheel"],ZT=["onAnimationStart","onAnimationEnd","onAnimationIteration"],JT=["onTransitionEnd"],tP=["onToggle"],eP=["onChange"],nP=[...jT,...zT,...$T,...BT,...HT,...UT,...VT,...GT,...WT,...XT,...KT,...qT,...YT,...QT,...ZT,...JT,...eP,...tP];function vE(n,t){const e={};for(const i of nP){const s=n[i];s&&(t?e[i]=r=>s(r,t(i)):e[i]=s)}return e}function Qd(n){let t=!1;return{promise:new Promise((i,s)=>{n.then(r=>!t&&i(r)).catch(r=>!t&&s(r))}),cancel(){t=!0}}}function wE(n){var t,e,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(t=0;t<s;t++)n[t]&&(e=wE(n[t]))&&(i&&(i+=" "),i+=e)}else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function Fg(){for(var n,t,e=0,i="",s=arguments.length;e<s;e++)(n=arguments[e])&&(t=wE(n))&&(i&&(i+=" "),i+=t);return i}var iP="Invariant failed";function xt(n,t){if(!n)throw new Error(iP)}var sP=function(){},rP=sP;const He=jw(rP);var kw=Object.prototype.hasOwnProperty;function Tw(n,t,e){for(e of n.keys())if(Cl(e,t))return e}function Cl(n,t){var e,i,s;if(n===t)return!0;if(n&&t&&(e=n.constructor)===t.constructor){if(e===Date)return n.getTime()===t.getTime();if(e===RegExp)return n.toString()===t.toString();if(e===Array){if((i=n.length)===t.length)for(;i--&&Cl(n[i],t[i]););return i===-1}if(e===Set){if(n.size!==t.size)return!1;for(i of n)if(s=i,s&&typeof s=="object"&&(s=Tw(t,s),!s)||!t.has(s))return!1;return!0}if(e===Map){if(n.size!==t.size)return!1;for(i of n)if(s=i[0],s&&typeof s=="object"&&(s=Tw(t,s),!s)||!Cl(i[1],t.get(s)))return!1;return!0}if(e===ArrayBuffer)n=new Uint8Array(n),t=new Uint8Array(t);else if(e===DataView){if((i=n.byteLength)===t.byteLength)for(;i--&&n.getInt8(i)===t.getInt8(i););return i===-1}if(ArrayBuffer.isView(n)){if((i=n.byteLength)===t.byteLength)for(;i--&&n[i]===t[i];);return i===-1}if(!e||typeof n=="object"){i=0;for(e in n)if(kw.call(n,e)&&++i&&!kw.call(t,e)||!(e in t)||!Cl(n[e],t[e]))return!1;return Object.keys(t).length===i}}return n!==n&&t!==t}const AE=D.createContext(null);function kl({children:n,type:t}){return C.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:n})}const oP="noopener noreferrer nofollow";class aP{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return xt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){xt(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{xt(this.pdfDocument),xt(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{xt(Array.isArray(e));const i=e[0];new Promise(s=>{xt(this.pdfDocument),i instanceof Object?this.pdfDocument.getPageIndex(i).then(r=>{s(r)}).catch(()=>{xt(!1)}):typeof i=="number"?s(i):xt(!1)}).then(s=>{const r=s+1;xt(this.pdfViewer),xt(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:s,pageNumber:r})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;xt(this.pdfViewer),xt(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,i){t.href=e,t.rel=this.externalLinkRel||oP,t.target=i?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const Pw={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},jg=typeof window<"u",bE=jg&&window.location.protocol==="file:";function lP(n){return typeof n<"u"}function go(n){return lP(n)&&n!==null}function cP(n){return typeof n=="string"}function uP(n){return n instanceof ArrayBuffer}function hP(n){return xt(jg),n instanceof Blob}function Ty(n){return cP(n)&&/^data:/.test(n)}function Rw(n){xt(Ty(n));const[t="",e=""]=n.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function dP(){return jg&&window.devicePixelRatio||1}const xE="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Lw(){He(!bE,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${xE}`)}function fP(){He(!bE,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${xE}`)}function Ha(n){n!=null&&n.cancel&&n.cancel()}function Py(n,t){return Object.defineProperty(n,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function pP(n){return n.name==="RenderingCancelledException"}function gP(n){return new Promise((t,e)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return e(new Error("Error while reading a file."));t(i.result)},i.onerror=s=>{if(!s.target)return e(new Error("Error while reading a file."));const{error:r}=s.target;if(!r)return e(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},i.readAsArrayBuffer(n)})}function mP(n,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function Uc(){return D.useReducer(mP,{value:void 0,error:void 0})}var Mw=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};const{PDFDataRangeTransport:yP}=FT,vP=(n,t)=>{switch(t){case Pw.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");n(e);break}case Pw.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");n(e);break}}};function Iw(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const wP=D.forwardRef(function(t,e){var{children:i,className:s,error:r="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:l,file:c,inputRef:u,imageResourcesPath:h,loading:d="Loading PDF…",noData:f="No PDF file specified.",onItemClick:p,onLoadError:y,onLoadProgress:m,onLoadSuccess:S,onPassword:v=vP,onSourceError:w,onSourceSuccess:x,options:E,renderMode:_,rotate:T,scale:k}=t,P=Mw(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate","scale"]);const[L,R]=Uc(),{value:M,error:Y}=L,[Z,K]=Uc(),{value:nt,error:F}=Z,j=D.useRef(new aP),O=D.useRef([]),V=D.useRef(void 0),X=D.useRef(void 0);c&&c!==V.current&&Iw(c)&&(He(!Cl(c,V.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),V.current=c),E&&E!==X.current&&(He(!Cl(E,X.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),X.current=E);const at=D.useRef({scrollPageIntoView:St=>{const{dest:ce,pageNumber:Gt,pageIndex:nr=Gt-1}=St;if(p){p({dest:ce,pageIndex:nr,pageNumber:Gt});return}const Ka=O.current[nr];if(Ka){Ka.scrollIntoView();return}He(!1,`An internal link leading to page ${Gt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});D.useImperativeHandle(e,()=>({linkService:j,pages:O,viewer:at}),[]);function tt(){x&&x()}function dt(){Y&&(He(!1,Y.toString()),w&&w(Y))}function Vt(){R({type:"RESET"})}D.useEffect(Vt,[c,R]);const ne=D.useCallback(async()=>{if(!c)return null;if(typeof c=="string")return Ty(c)?{data:Rw(c)}:(Lw(),{url:c});if(c instanceof yP)return{range:c};if(uP(c))return{data:c};if(jg&&hP(c))return{data:await gP(c)};if(xt(typeof c=="object"),xt(Iw(c)),"url"in c&&typeof c.url=="string"){if(Ty(c.url)){const{url:St}=c,ce=Mw(c,["url"]),Gt=Rw(St);return Object.assign({data:Gt},ce)}Lw()}return c},[c]);D.useEffect(()=>{const St=Qd(ne());return St.promise.then(ce=>{R({type:"RESOLVE",value:ce})}).catch(ce=>{R({type:"REJECT",error:ce})}),()=>{Ha(St)}},[ne,R]),D.useEffect(()=>{if(!(typeof M>"u")){if(M===!1){dt();return}tt()}},[M]);function Dt(){nt&&(S&&S(nt),O.current=new Array(nt.numPages),j.current.setDocument(nt))}function ft(){F&&(He(!1,F.toString()),y&&y(F))}D.useEffect(function(){K({type:"RESET"})},[K,M]),D.useEffect(function(){if(!M)return;const ce=E?Object.assign(Object.assign({},M),E):M,Gt=M1(ce);m&&(Gt.onProgress=m),v&&(Gt.onPassword=v);const nr=Gt,Ka=nr.promise.then(Kc=>{K({type:"RESOLVE",value:Kc})}).catch(Kc=>{nr.destroyed||K({type:"REJECT",error:Kc})});return()=>{Ka.finally(()=>nr.destroy())}},[E,K,M]),D.useEffect(()=>{if(!(typeof nt>"u")){if(nt===!1){ft();return}Dt()}},[nt]),D.useEffect(function(){j.current.setViewer(at.current),j.current.setExternalLinkRel(o),j.current.setExternalLinkTarget(l)},[o,l]);const Ri=D.useCallback((St,ce)=>{O.current[St]=ce},[]),Li=D.useCallback(St=>{delete O.current[St]},[]),Rt=D.useMemo(()=>({imageResourcesPath:h,linkService:j.current,onItemClick:p,pdf:nt,registerPage:Ri,renderMode:_,rotate:T,scale:k,unregisterPage:Li}),[h,p,nt,Ri,_,T,k,Li]),rs=D.useMemo(()=>vE(P,()=>nt),[P,nt]);function os(){return C.jsx(AE.Provider,{value:Rt,children:i})}function Ve(){return c?nt==null?C.jsx(kl,{type:"loading",children:typeof d=="function"?d():d}):nt===!1?C.jsx(kl,{type:"error",children:typeof r=="function"?r():r}):os():C.jsx(kl,{type:"no-data",children:typeof f=="function"?f():f})}return C.jsx("div",Object.assign({className:Fg("react-pdf__Document",s),ref:u},rs,{children:Ve()}))});function SE(){return D.useContext(AE)}function EE(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=n.filter(Boolean);if(e.length<=1){var i=e[0];return i||null}return function(r){for(var o=0,l=e;o<l.length;o++){var c=l[o];typeof c=="function"?c(r):c&&(c.current=r)}}}const _E=D.createContext(null),CE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},AP=/^H(\d+)$/;function bP(n){return n in CE}function zg(n){return"children"in n}function kE(n){return zg(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function xP(n){const t={};if(zg(n)){const{role:e}=n,i=e.match(AP);if(i)t.role="heading",t["aria-level"]=Number(i[1]);else if(bP(e)){const s=CE[e];s&&(t.role=s)}}return t}function TE(n){const t={};if(zg(n)){if(n.alt!==void 0&&(t["aria-label"]=n.alt),n.lang!==void 0&&(t.lang=n.lang),kE(n)){const[e]=n.children;if(e){const i=TE(e);return Object.assign(Object.assign({},t),i)}}}else"id"in n&&(t["aria-owns"]=n.id);return t}function SP(n){return n?Object.assign(Object.assign({},xP(n)),TE(n)):null}function PE({className:n,node:t}){const e=D.useMemo(()=>SP(t),[t]),i=D.useMemo(()=>!zg(t)||kE(t)?null:t.children.map((s,r)=>C.jsx(PE,{node:s},r)),[t]);return C.jsx("span",Object.assign({className:n},e,{children:i}))}function $g(){return D.useContext(_E)}function EP(){const n=$g();xt(n);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=n,[i,s]=Uc(),{value:r,error:o}=i,{customTextRenderer:l,page:c}=n;function u(){r&&e&&e(r)}function h(){o&&(He(!1,o.toString()),t&&t(o))}return D.useEffect(function(){s({type:"RESET"})},[s,c]),D.useEffect(function(){if(l||!c)return;const f=Qd(c.getStructTree()),p=f;return f.promise.then(y=>{s({type:"RESOLVE",value:y})}).catch(y=>{s({type:"REJECT",error:y})}),()=>Ha(p)},[l,c,s]),D.useEffect(()=>{if(r!==void 0){if(r===!1){h();return}u()}},[r]),r?C.jsx(PE,{className:"react-pdf__Page__structTree structTree",node:r}):null}const Nw=ts;function _P(n){const t=$g();xt(t);const e=Object.assign(Object.assign({},t),n),{_className:i,canvasBackground:s,devicePixelRatio:r=dP(),onRenderError:o,onRenderSuccess:l,page:c,renderForms:u,renderTextLayer:h,rotate:d,scale:f}=e,{canvasRef:p}=n;xt(c);const y=D.useRef(null);function m(){c&&l&&l(Py(c,f))}function S(E){pP(E)||(He(!1,E.toString()),o&&o(E))}const v=D.useMemo(()=>c.getViewport({scale:f*r,rotation:d}),[r,c,d,f]),w=D.useMemo(()=>c.getViewport({scale:f,rotation:d}),[c,d,f]);D.useEffect(function(){if(!c)return;c.cleanup();const{current:_}=y;if(!_)return;_.width=v.width,_.height=v.height,_.style.width=`${Math.floor(w.width)}px`,_.style.height=`${Math.floor(w.height)}px`,_.style.visibility="hidden";const T={annotationMode:u?Nw.ENABLE_FORMS:Nw.ENABLE,canvasContext:_.getContext("2d",{alpha:!1}),viewport:v};s&&(T.background=s);const k=c.render(T),P=k;return k.promise.then(()=>{_.style.visibility="",m()}).catch(S),()=>Ha(P)},[s,c,u,v,w]);const x=D.useCallback(()=>{const{current:E}=y;E&&(E.width=0,E.height=0)},[]);return D.useEffect(()=>x,[x]),C.jsx("canvas",{className:`${i}__canvas`,dir:"ltr",ref:EE(p,y),style:{display:"block",userSelect:"none"},children:h?C.jsx(EP,{}):null})}function CP(n){return"str"in n}function kP(){const n=$g();xt(n);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:i,onRenderTextLayerError:s,onRenderTextLayerSuccess:r,page:o,pageIndex:l,pageNumber:c,rotate:u,scale:h}=n;xt(o);const[d,f]=Uc(),{value:p,error:y}=d,m=D.useRef(null);He(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function S(){p&&i&&i(p)}function v(){y&&(He(!1,y.toString()),e&&e(y))}D.useEffect(function(){f({type:"RESET"})},[o,f]),D.useEffect(function(){if(!o)return;const P=Qd(o.getTextContent()),L=P;return P.promise.then(R=>{f({type:"RESOLVE",value:R})}).catch(R=>{f({type:"REJECT",error:R})}),()=>Ha(L)},[o,f]),D.useEffect(()=>{if(p!==void 0){if(p===!1){v();return}S()}},[p]);const w=D.useCallback(()=>{r&&r()},[r]),x=D.useCallback(k=>{He(!1,k.toString()),s&&s(k)},[s]);function E(){const k=m.current;k&&k.classList.add("selecting")}function _(){const k=m.current;k&&k.classList.remove("selecting")}const T=D.useMemo(()=>o.getViewport({scale:h,rotation:u}),[o,u,h]);return D.useLayoutEffect(function(){if(!o||!p)return;const{current:P}=m;if(!P)return;P.innerHTML="";const L=o.streamTextContent({includeMarkedContent:!0}),R={container:P,textContentSource:L,viewport:T},M=new ah(R),Y=M;return M.render().then(()=>{const Z=document.createElement("div");Z.className="endOfContent",P.append(Z);const K=P.querySelectorAll('[role="presentation"]');if(t){let nt=0;p.items.forEach((F,j)=>{if(!CP(F))return;const O=K[nt];if(!O)return;const V=t(Object.assign({pageIndex:l,pageNumber:c,itemIndex:j},F));O.innerHTML=V,nt+=F.str&&F.hasEOL?2:1})}w()}).catch(x),()=>Ha(Y)},[t,x,w,o,l,c,p,T]),C.jsx("div",{className:Fg("react-pdf__Page__textContent","textLayer"),onMouseUp:_,onMouseDown:E,ref:m})}function TP(){const n=SE(),t=$g();xt(t);const e=Object.assign(Object.assign({},n),t),{imageResourcesPath:i,linkService:s,onGetAnnotationsError:r,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:c,page:u,pdf:h,renderForms:d,rotate:f,scale:p=1}=e;xt(h),xt(u),xt(s);const[y,m]=Uc(),{value:S,error:v}=y,w=D.useRef(null);He(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function x(){S&&o&&o(S)}function E(){v&&(He(!1,v.toString()),r&&r(v))}D.useEffect(function(){m({type:"RESET"})},[m,u]),D.useEffect(function(){if(!u)return;const L=Qd(u.getAnnotations()),R=L;return L.promise.then(M=>{m({type:"RESOLVE",value:M})}).catch(M=>{m({type:"REJECT",error:M})}),()=>{Ha(R)}},[m,u]),D.useEffect(()=>{if(S!==void 0){if(S===!1){E();return}x()}},[S]);function _(){c&&c()}function T(P){He(!1,`${P}`),l&&l(P)}const k=D.useMemo(()=>u.getViewport({scale:p,rotation:f}),[u,f,p]);return D.useEffect(function(){if(!h||!u||!s||!S)return;const{current:L}=w;if(!L)return;const R=k.clone({dontFlip:!0}),M={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:L,l10n:null,page:u,structTreeLayer:null,viewport:R},Y={annotations:S,annotationStorage:h.annotationStorage,div:L,imageResourcesPath:i,linkService:s,page:u,renderForms:d,viewport:R};L.innerHTML="";try{new O1(M).render(Y),_()}catch(Z){T(Z)}return()=>{}},[S,i,s,u,h,d,k]),C.jsx("div",{className:Fg("react-pdf__Page__annotations","annotationLayer"),ref:w})}var PP=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};const Dw=1;function RP(n){const t=SE(),e=Object.assign(Object.assign({},t),n),{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:r,canvasRef:o,children:l,className:c,customRenderer:u,customTextRenderer:h,devicePixelRatio:d,error:f="Failed to load the page.",height:p,inputRef:y,loading:m="Loading page…",noData:S="No page specified.",onGetAnnotationsError:v,onGetAnnotationsSuccess:w,onGetStructTreeError:x,onGetStructTreeSuccess:E,onGetTextError:_,onGetTextSuccess:T,onLoadError:k,onLoadSuccess:P,onRenderAnnotationLayerError:L,onRenderAnnotationLayerSuccess:R,onRenderError:M,onRenderSuccess:Y,onRenderTextLayerError:Z,onRenderTextLayerSuccess:K,pageIndex:nt,pageNumber:F,pdf:j,registerPage:O,renderAnnotationLayer:V=!0,renderForms:X=!1,renderMode:at="canvas",renderTextLayer:tt=!0,rotate:dt,scale:Vt=Dw,unregisterPage:ne,width:Dt}=e,ft=PP(e,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Ri,Li]=Uc(),{value:Rt,error:rs}=Ri,os=D.useRef(null);xt(j);const Ve=go(F)?F-1:nt??null,St=F??(go(nt)?nt+1:null),ce=dt??(Rt?Rt.rotate:null),Gt=D.useMemo(()=>{if(!Rt)return null;let qa=1;const Jd=Vt??Dw;if(Dt||p){const tf=Rt.getViewport({scale:1,rotation:ce});Dt?qa=Dt/tf.width:p&&(qa=p/tf.height)}return Jd*qa},[p,Rt,ce,Vt,Dt]);D.useEffect(function(){return()=>{go(Ve)&&s&&ne&&ne(Ve)}},[s,j,Ve,ne]);function nr(){if(P){if(!Rt||!Gt)return;P(Py(Rt,Gt))}if(s&&O){if(!go(Ve)||!os.current)return;O(Ve,os.current)}}function Ka(){rs&&(He(!1,rs.toString()),k&&k(rs))}D.useEffect(function(){Li({type:"RESET"})},[Li,j,Ve]),D.useEffect(function(){if(!j||!St)return;const Jd=Qd(j.getPage(St)),tf=Jd;return Jd.promise.then(Bg=>{Li({type:"RESOLVE",value:Bg})}).catch(Bg=>{Li({type:"REJECT",error:Bg})}),()=>Ha(tf)},[Li,j,St]),D.useEffect(()=>{if(Rt!==void 0){if(Rt===!1){Ka();return}nr()}},[Rt,Gt]);const Kc=D.useMemo(()=>Rt&&go(Ve)&&St&&go(ce)&&go(Gt)?{_className:i,canvasBackground:r,customTextRenderer:h,devicePixelRatio:d,onGetAnnotationsError:v,onGetAnnotationsSuccess:w,onGetStructTreeError:x,onGetStructTreeSuccess:E,onGetTextError:_,onGetTextSuccess:T,onRenderAnnotationLayerError:L,onRenderAnnotationLayerSuccess:R,onRenderError:M,onRenderSuccess:Y,onRenderTextLayerError:Z,onRenderTextLayerSuccess:K,page:Rt,pageIndex:Ve,pageNumber:St,renderForms:X,renderTextLayer:tt,rotate:ce,scale:Gt}:null,[i,r,h,d,v,w,x,E,_,T,L,R,M,Y,Z,K,Rt,Ve,St,X,tt,ce,Gt]),RE=D.useMemo(()=>vE(ft,()=>Rt&&(Gt?Py(Rt,Gt):void 0)),[ft,Rt,Gt]),Zd=`${Ve}@${Gt}/${ce}`;function LE(){switch(at){case"custom":return xt(u),C.jsx(u,{},`${Zd}_custom`);case"none":return null;case"canvas":default:return C.jsx(_P,{canvasRef:o},`${Zd}_canvas`)}}function ME(){return tt?C.jsx(kP,{},`${Zd}_text`):null}function IE(){return V?C.jsx(TP,{},`${Zd}_annotations`):null}function NE(){return C.jsxs(_E.Provider,{value:Kc,children:[LE(),ME(),IE(),l]})}function DE(){return St?j===null||Rt===void 0||Rt===null?C.jsx(kl,{type:"loading",children:typeof m=="function"?m():m}):j===!1||Rt===!1?C.jsx(kl,{type:"error",children:typeof f=="function"?f():f}):NE():C.jsx(kl,{type:"no-data",children:typeof S=="function"?S():S})}return C.jsx("div",Object.assign({className:Fg(i,c),"data-page-number":St,ref:EE(y,os),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Gt}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},RE,{children:DE()}))}fP();Qn.workerSrc="pdf.worker.mjs";Qn.workerSrc="/Portfolio/pdf.worker.mjs";const LP=()=>{const{t:n}=Ga(),{theme:t}=ri(),e=fo(t),[i,s]=D.useState(!1),r="/Portfolio/resume.pdf",o=()=>{const c=document.createElement("a");c.href=r,c.download="resume.pdf",c.click()},l=()=>{s(!i)};return C.jsx("section",{id:"resume",className:`py-20 ${t==="dark"?"bg-gray-800":"bg-gray-50"}`,children:C.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[C.jsx(Be,{animation:"fadeInUp",children:C.jsxs("div",{className:"text-center mb-16",children:[C.jsx("h2",{className:`text-3xl sm:text-4xl font-bold mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:n.resume.title}),C.jsx("div",{className:`w-[9rem] h-1 bg-gradient-to-r ${e.primary} mx-auto`})]})}),C.jsxs("div",{className:"max-w-4xl mx-auto",children:[C.jsx(Be,{animation:"fadeInUp",delay:200,children:C.jsxs("div",{className:"text-center mb-8",children:[C.jsx("p",{className:`text-lg leading-relaxed mb-6 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:n.resume.description}),C.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[C.jsxs("button",{onClick:o,className:`flex items-center gap-2 px-6 py-3 rounded-lg bg-gradient-to-r ${e.primary} text-white font-medium hover:scale-105 transition-all duration-300 shadow-lg`,children:[C.jsx(mC,{className:"w-5 h-5"}),n.resume.download]}),C.jsx("button",{onClick:l,className:`flex items-center gap-2 px-6 py-3 rounded-lg border-2 ${t==="dark"?"border-gray-600 text-gray-300 hover:border-gray-500":"border-gray-300 text-gray-700 hover:border-gray-400"} font-medium hover:scale-105 transition-all duration-300`,children:i?C.jsxs(C.Fragment,{children:[C.jsx(vC,{className:"w-5 h-5"}),n.resume.hidePreview]}):C.jsxs(C.Fragment,{children:[C.jsx(wC,{className:"w-5 h-5"}),n.resume.showPreview]})})]})]})}),i&&C.jsx(Be,{animation:"fadeInUp",delay:400,children:C.jsx("div",{className:`flex justify-center items-center relative rounded-2xl overflow-hidden shadow-2xl border ${t==="dark"?"border-gray-700":"border-gray-200"}`,style:{minHeight:"80vh"},children:C.jsx(wP,{file:r,loading:"Загрузка...",children:C.jsx(RP,{pageNumber:1,width:Math.min(window.innerWidth*.95,900),renderTextLayer:!1,renderAnnotationLayer:!1,className:"pdf-page"})})})})]})]})})},MP=()=>{const{t:n}=Ga(),{theme:t}=ri(),e=fo(t),i=[{icon:C.jsx(_C,{className:"w-7 h-7"}),href:"https://t.me/DanisKhasanov",label:"Telegram"},{icon:C.jsx(xC,{className:"w-7 h-7"}),href:"https://www.instagram.com/khasanovdanis/profilecard/?igsh=MTZiYnN4azBoY2JtbQ==",label:"Instagram"},{icon:C.jsx(nx,{className:"w-7 h-7"}),href:"https://github.com/DanisKhasanov",label:"GitHub"},{icon:C.jsx(SC,{className:"w-7 h-7"}),href:"https://www.linkedin.com/in/danis-khasanov-a8b79930b/",label:"LinkedIn"}];return C.jsx("section",{id:"contact",className:`py-20 ${t==="dark"?"bg-gray-900":"bg-white"}`,children:C.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[C.jsx(Be,{animation:"fadeInUp",children:C.jsxs("div",{className:"text-center mb-16",children:[C.jsx("h2",{className:`text-3xl sm:text-4xl font-bold mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:n.contact.title}),C.jsx("div",{className:`w-[20rem] h-1 bg-gradient-to-r ${e.primary} mx-auto mb-6`}),C.jsx("p",{className:`text-lg max-w-2xl mx-auto ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:n.contact.description})]})}),C.jsx(Be,{animation:"fadeInUp",delay:200,children:C.jsx("div",{className:"flex justify-center items-center space-x-6",children:i.map((s,r)=>C.jsx("a",{href:s.href,target:"_blank",rel:"noopener noreferrer","aria-label":s.label,className:`w-16 h-16 flex items-center justify-center rounded-full transition-all duration-300 transform hover:scale-110
                  ${t==="dark"?"bg-gray-800 text-gray-300 hover:bg-gradient-to-br from-blue-500 to-purple-600 hover:text-white":"bg-gray-100 text-gray-600 hover:bg-gradient-to-br from-blue-500 to-purple-600 hover:text-white"}
                `,children:s.icon},r))})})]})})},IP=()=>{const{theme:n}=ri();return C.jsx("footer",{className:"py-12 bg-gray-900 text-white",children:C.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:C.jsxs("div",{className:"border-t border-gray-800  pt-8 text-center",children:[C.jsxs("p",{className:"text-gray-400 flex items-center justify-center",children:["Made with ",C.jsx(bC,{className:"w-4 h-4 mx-1 text-red-500"})," by React Developer Danis Khasanov"]}),C.jsxs("p",{className:"text-gray-500 text-sm mt-2",children:["© ",new Date().getFullYear()," Portfolio. All rights reserved."]})]})})})};function NP(){const{theme:n}=ri();return C.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${n==="dark"?"bg-gray-900":"bg-white"}`,children:[C.jsx(PC,{}),C.jsxs("main",{children:[C.jsx(MC,{}),C.jsx(FC,{}),C.jsx(ZC,{}),C.jsx(ek,{}),C.jsx(LP,{}),C.jsx(MP,{})]}),C.jsx(IP,{})]})}function DP(){return C.jsx(uC,{children:C.jsx(dC,{children:C.jsx(NP,{})})})}Qb(document.getElementById("root")).render(C.jsx(D.StrictMode,{children:C.jsx(DP,{})}));
